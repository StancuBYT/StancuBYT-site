<!DOCTYPE html>
<html><head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>StancuBYT | Token Digital Avansat</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chartjs-chart-financial@0.1.1"></script>
<style>
        /* Variabile culori conform psihologiei marketingului */
        :root {
            --blue-tech: #0066ff;
            --green-growth: #00ff88;
            --purple-innov: #8a2be2;
            --neon-cyan: #00ffff;
            --dark-bg: #0a0a1f;
            --darker-bg: #050510;
            --orange-alert: #ff9500;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Arial', sans-serif;
        }

        body {
            background: var(--dark-bg);
            color: white;
            overflow-x: hidden;
            background-image: 
                radial-gradient(circle at 10% 20%, rgba(0, 102, 255, 0.1) 0%, transparent 20%),
                radial-gradient(circle at 90% 60%, rgba(0, 255, 136, 0.1) 0%, transparent 20%),
                radial-gradient(circle at 50% 80%, rgba(138, 43, 226, 0.1) 0%, transparent 20%);
        }

        /* Particle Animation Background */
        #particles-js {
            position: fixed;
            width: 100%;
            height: 100%;
            z-index: -1;
        }

        /* Logo Background pentru Hero Section */
        .hero-logo-bg {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 600px;
            height: 600px;
            opacity: 0.05;
            z-index: -1;
            pointer-events: none;
        }

        .logo-3d-bg {
            width: 100%;
            height: 100%;
            position: relative;
            animation: float3d 20s infinite ease-in-out;
        }

        .logo-3d-bg img {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            filter: blur(1px) brightness(1.2);
        }

        @keyframes float3d {
            0%, 100% { 
                transform: translateY(0px) rotateX(0deg) rotateY(0deg); 
            }
            25% { 
                transform: translateY(-20px) rotateX(5deg) rotateY(5deg); 
            }
            50% { 
                transform: translateY(0px) rotateX(0deg) rotateY(10deg); 
            }
            75% { 
                transform: translateY(20px) rotateX(-5deg) rotateY(5deg); 
            }
        }

        /* 3D Logo Animation */
        .logo-3d-container {
            position: relative;
            width: 80px;
            height: 80px;
            perspective: 1000px;
        }

        .logo-3d {
            width: 100%;
            height: 100%;
            position: relative;
            transform-style: preserve-3d;
            animation: rotate3d 8s infinite linear;
        }

        .logo-3d img {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            position: absolute;
            backface-visibility: hidden;
        }

        .backnote-orbit {
            position: absolute;
            top: 50%;
            left: 50%;
            width: 120px;
            height: 120px;
            transform: translate(-50%, -50%);
            animation: orbit 6s infinite linear;
        }

        .backnote {
            position: absolute;
            width: 20px;
            height: 20px;
            background: var(--neon-cyan);
            border-radius: 50%;
            filter: blur(2px);
            opacity: 0.7;
        }

        .backnote:nth-child(1) { top: 0; left: 50%; transform: translateX(-50%); }
        .backnote:nth-child(2) { top: 50%; right: 0; transform: translateY(-50%); }
        .backnote:nth-child(3) { bottom: 0; left: 50%; transform: translateX(-50%); }
        .backnote:nth-child(4) { top: 50%; left: 0; transform: translateY(-50%); }

        @keyframes rotate3d {
            0% { transform: rotateY(0deg) rotateX(5deg); }
            100% { transform: rotateY(360deg) rotateX(5deg); }
        }

        @keyframes orbit {
            0% { transform: translate(-50%, -50%) rotate(0deg); }
            100% { transform: translate(-50%, -50%) rotate(360deg); }
        }

        /* Buton Modern Re√ÆmprospƒÉteazƒÉ Datele */
        .btn-refresh-modern {
            background: linear-gradient(45deg, var(--blue-tech), var(--purple-innov));
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            position: relative;
            overflow: hidden;
            margin-top: 1rem;
            box-shadow: 0 5px 20px rgba(0, 102, 255, 0.3);
        }

        .btn-refresh-modern:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 10px 30px rgba(0, 102, 255, 0.5);
        }

        .btn-refresh-modern:active {
            transform: translateY(0) scale(1);
        }

        .refresh-icon {
            font-size: 1.3rem;
            transition: transform 0.5s ease;
        }

        .btn-refresh-modern:hover .refresh-icon {
            animation: rotate360 1s linear infinite;
        }

        .refresh-pulse {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            border-radius: 50px;
            background: linear-gradient(45deg, var(--green-growth), var(--neon-cyan));
            opacity: 0;
            z-index: -1;
            animation: pulseEffect 2s infinite;
        }

        @keyframes rotate360 {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        @keyframes pulseEffect {
            0% { 
                transform: scale(1); 
                opacity: 0.7; 
            }
            100% { 
                transform: scale(1.2); 
                opacity: 0; 
            }
        }

        /* Loading animation pentru buton */
        .btn-refresh-modern.loading {
            background: linear-gradient(45deg, #666, #888);
            cursor: wait;
        }

        .btn-refresh-modern.loading .refresh-icon {
            animation: rotate360 1s linear infinite;
        }

        .btn-refresh-modern.loading .refresh-text {
            opacity: 0.7;
        }

        /* Animatie pentru actualizare succes */
        @keyframes successFlash {
            0%, 100% { 
                background: linear-gradient(45deg, var(--blue-tech), var(--purple-innov)); 
            }
            50% { 
                background: linear-gradient(45deg, var(--green-growth), #00cc66); 
            }
        }

        .btn-refresh-modern.success {
            animation: successFlash 0.5s ease 2;
        }

        /* Navigation - Scientific Style */
        .scientific-nav {
            background: rgba(10, 10, 31, 0.9);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid var(--blue-tech);
            position: fixed;
            width: 100%;
            z-index: 1000;
        }

        .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 2rem;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .logo-text {
            font-size: 1.5rem;
            font-weight: bold;
            background: linear-gradient(45deg, var(--blue-tech), var(--green-growth));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .nav-links {
            display: flex;
            gap: 2rem;
        }

        .nav-links a {
            color: white;
            text-decoration: none;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .nav-links a:hover {
            background: rgba(0, 102, 255, 0.2);
            transform: translateY(-2px);
        }

        .nav-links a::before {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 0;
            height: 2px;
            background: linear-gradient(45deg, var(--blue-tech), var(--green-growth));
            transition: width 0.3s ease;
        }

        .nav-links a:hover::before {
            width: 100%;
        }

        /* Main Content Sections */
        .page-section {
            min-height: 100vh;
            padding: 120px 2rem 2rem;
            max-width: 1200px;
            margin: 0 auto;
            display: none;
            position: relative;
            overflow: hidden;
        }

        .active-section {
            display: block;
        }

        /* Hero Section - Prezentare */
        .hero {
            text-align: center;
            padding-top: 150px;
            position: relative;
            z-index: 1;
        }

        .hero h1 {
            font-size: 4.5rem;
            margin-bottom: 1rem;
            background: linear-gradient(45deg, var(--blue-tech), var(--green-growth), var(--purple-innov));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: gradientShift 3s ease infinite;
            text-shadow: 0 0 30px rgba(0, 102, 255, 0.3);
            position: relative;
            z-index: 2;
        }

        @keyframes gradientShift {
            0%, 100% { filter: hue-rotate(0deg); }
            50% { filter: hue-rotate(45deg); }
        }

        /* Sectiune Noutati */
        .news-section {
            margin: 3rem 0;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 20px;
            padding: 2rem;
            border: 1px solid rgba(0, 255, 136, 0.2);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }

        .news-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid var(--green-growth);
        }

        .news-title {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.8rem;
            background: linear-gradient(45deg, var(--green-growth), var(--neon-cyan));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .news-controls {
            display: flex;
            gap: 1rem;
        }

        .news-btn {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(0, 102, 255, 0.3);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }

        .news-btn:hover {
            background: rgba(0, 102, 255, 0.2);
            transform: translateY(-2px);
        }

        .news-grid {
            display: grid;
            grid-template-columns: repeat(2, minmax(0, 1fr));
            gap: 1.5rem;
        }

        @media (max-width: 768px) {
            .news-grid {
                grid-template-columns: 1fr;
            }
        }

        .news-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 1.5rem;
            border: 1px solid rgba(0, 102, 255, 0.2);
            transition: all 0.3s ease;
        }

        .news-card:hover {
            transform: translateY(-5px);
            border-color: var(--green-growth);
            box-shadow: 0 10px 25px rgba(0, 255, 136, 0.1);
        }

        .news-card.pinned {
            border: 2px solid var(--orange-alert);
            background: rgba(255, 149, 0, 0.05);
        }

        
        /* --- News card header layout + type highlighting --- */
        .news-card-head{
            display:flex;
            align-items:center;
            justify-content:space-between;
            gap:12px;
            margin-bottom:10px;
        }
        .news-type{
            font-weight:700;
            font-size:0.85rem;
            padding:6px 10px;
            border-radius:999px;
            letter-spacing:0.2px;
            text-transform:uppercase;
            border:1px solid rgba(255,255,255,0.12);
            background: rgba(255,255,255,0.06);
        }
        .news-date{
            font-size:0.85rem;
            opacity:0.85;
            white-space:nowrap;
        }
        .news-emoji{ margin-left:8px; font-size:1.05rem; }
        .news-card.has-bg{ background-blend-mode: normal; }

        .news-type.update{ background: rgba(0,255,136,0.10); border-color: rgba(0,255,136,0.35); }
        .news-type.announcement{ background: rgba(255,149,0,0.12); border-color: rgba(255,149,0,0.45); }
        .news-type.news{ background: rgba(0,102,255,0.12); border-color: rgba(0,102,255,0.45); }

        /* subtle left accent per type */
        .news-card{ position:relative; overflow:hidden; }
        .news-card.update{ border-left: 4px solid rgba(0,255,136,0.75); }
        .news-card.announcement{ border-left: 4px solid rgba(255,149,0,0.9); }
        .news-card.news{ border-left: 4px solid rgba(0,102,255,0.9); }
        .news-badge {
            display: inline-block;
            padding: 0.3rem 0.8rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: bold;
            margin-bottom: 1rem;
        }

        .badge-update {
            background: rgba(0, 102, 255, 0.2);
            color: var(--blue-tech);
            border: 1px solid var(--blue-tech);
        }

        .badge-announcement {
            background: rgba(255, 149, 0, 0.2);
            color: var(--orange-alert);
            border: 1px solid var(--orange-alert);
        }

        .badge-event {
            background: rgba(0, 255, 136, 0.2);
            color: var(--green-growth);
            border: 1px solid var(--green-growth);
        }

        .news-date {
            font-size: 0.85rem;
            color: #888;
            margin-top: 1rem;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .news-form {
            margin-top: 2rem;
            padding-top: 1.5rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        .form-row {
            display: flex;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .form-row input {
            flex: 1;
            padding: 0.8rem 1rem;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(0, 102, 255, 0.3);
            border-radius: 8px;
            color: white;
            font-size: 1rem;
        }

        .form-row input:focus {
            border-color: var(--neon-cyan);
            box-shadow: 0 0 15px rgba(0, 255, 255, 0.2);
            outline: none;
        }

        
.news-card{position:relative; overflow:hidden;}
.news-bg{position:absolute; inset:0; background-size:cover; background-position:center; filter:brightness(0.55) blur(0px); transform:scale(1.08);}
.news-card > *{position:relative; z-index:2;}
.news-delete-btn{margin-top:10px; background:rgba(255,77,109,0.15); border:1px solid rgba(255,77,109,0.55); color:#fff; padding:8px 10px; border-radius:10px; cursor:pointer;}
.news-delete-btn:hover{background:rgba(255,77,109,0.25);}
.admin-news-box{background:rgba(10,10,31,0.55); border:1px solid rgba(0,255,255,0.25); padding:14px; border-radius:14px;}

/* Contor Vizite */
        .visit-counter {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: rgba(10, 10, 31, 0.9);
            backdrop-filter: blur(10px);
            border: 1px solid var(--blue-tech);
            border-radius: 15px;
            padding: 0.8rem 1.2rem;
            z-index: 1000;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 0.9rem;
            transition: all 0.3s ease;
        }

        .visit-counter:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(0, 102, 255, 0.3);
        }

        .counter-icon {
            animation: pulse 2s infinite;
        }

        .token-info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
            margin: 3rem 0;
        }

        .info-card {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(0, 102, 255, 0.3);
            border-radius: 15px;
            padding: 2rem;
            text-align: center;
            transition: transform 0.3s ease;
        }

        .info-card:hover {
            transform: translateY(-10px);
            border-color: var(--green-growth);
        }

        /* Social Links in Hero */
        .social-links {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin: 2rem 0;
            flex-wrap: wrap;
        }

        .social-btn {
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            color: white;
            text-decoration: none;
            font-size: 1.2rem;
            transition: all 0.3s ease;
            border: 1px solid rgba(0, 102, 255, 0.3);
        }

        .social-btn:hover {
            background: rgba(0, 102, 255, 0.3);
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 102, 255, 0.3);
        }

        /* Buton Uniswap */
        .uniswap-btn {
            background: linear-gradient(45deg, #ff007a, #8a2be2);
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: 25px;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
            margin: 1rem 0;
            font-weight: bold;
        }

        .uniswap-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(255, 0, 122, 0.4);
        }

        /* Scientific Data Visualization */
        .data-visualization {
            background: rgba(255, 255, 255, 0.02);
            border-radius: 20px;
            padding: 2rem;
            margin: 2rem 0;
            border: 1px solid rgba(0, 255, 136, 0.2);
        }

        .chart-container {
            position: relative;
            height: 400px;
            margin: 2rem 0;
        }

        .chart-controls {
            display: flex;
            gap: 1rem;
            margin-bottom: 1rem;
            flex-wrap: wrap;
        }

        .period-btn {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(0, 102, 255, 0.3);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .period-btn.active {
            background: var(--blue-tech);
            border-color: var(--blue-tech);
        }

        .period-btn:hover {
            background: rgba(0, 102, 255, 0.2);
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-top: 1rem;
        }

        .stat-item {
            background: rgba(255, 255, 255, 0.05);
            padding: 1rem;
            border-radius: 10px;
            text-align: center;
        }

        .stat-value {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--neon-cyan);
            margin: 0.5rem 0;
        }

        .neon-glow {
            box-shadow: 
                0 0 20px rgba(0, 102, 255, 0.3),
                0 0 40px rgba(0, 255, 136, 0.2),
                inset 0 0 20px rgba(138, 43, 226, 0.1);
        }

        /* Status Indicators */
        .status-online {
            color: #00ff88;
            animation: pulse 2s infinite;
        }

        .status-offline {
            color: #ff4444;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        /* Token Price Display */
        .price-display {
            font-size: 2.5rem;
            font-weight: bold;
            margin: 1rem 0;
        }

        .price-change {
            font-size: 1.2rem;
            padding: 0.3rem 1rem;
            border-radius: 20px;
            display: inline-block;
            margin: 0.5rem 0;
        }

        .positive { color: #00ff88; background: rgba(0, 255, 136, 0.1); }
        .negative { color: #ff4444; background: rgba(255, 68, 68, 0.1); }

        /* Whitepaper Specific Styles */
        .whitepaper-header {
            text-align: center;
            margin-bottom: 3rem;
            padding-top: 20px;
        }

        .whitepaper-logo {
            width: 150px;
            height: 150px;
            margin: 0 auto 1.5rem;
            border-radius: 50%;
            background: linear-gradient(45deg, var(--blue-tech), var(--purple-innov));
            padding: 15px;
            box-shadow: 0 0 40px rgba(0, 102, 255, 0.4);
        }

        .whitepaper-logo img {
            width: 100%;
            height: 100%;
            border-radius: 50%;
        }

        .toc {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 2rem;
            margin: 2rem 0;
            border-left: 4px solid var(--green-growth);
        }

        .toc h3 {
            margin-bottom: 1rem;
            color: var(--neon-cyan);
        }

        .toc ul {
            columns: 2;
            column-gap: 3rem;
        }

        .toc li {
            margin-bottom: 0.8rem;
            break-inside: avoid;
        }

        .toc a {
            color: white;
            text-decoration: none;
            transition: color 0.3s ease;
        }

        .toc a:hover {
            color: var(--neon-cyan);
            text-decoration: underline;
        }

        .section-card {
            background: rgba(255, 255, 255, 0.03);
            border-radius: 15px;
            padding: 2rem;
            margin: 2rem 0;
            border: 1px solid rgba(0, 102, 255, 0.2);
            transition: transform 0.3s ease, border-color 0.3s ease;
        }

        .section-card:hover {
            transform: translateY(-5px);
            border-color: var(--neon-cyan);
        }

        .section-card h3 {
            color: var(--green-growth);
            margin-bottom: 1.5rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid rgba(0, 255, 136, 0.3);
        }

        .table-container {
            overflow-x: auto;
            margin: 1.5rem 0;
        }

        .whitepaper-table {
            width: 100%;
            border-collapse: collapse;
            background: rgba(255, 255, 255, 0.02);
            border-radius: 10px;
            overflow: hidden;
        }

        .whitepaper-table th {
            background: linear-gradient(45deg, var(--blue-tech), var(--purple-innov));
            color: white;
            padding: 1rem;
            text-align: left;
            font-weight: bold;
        }

        .whitepaper-table td {
            padding: 1rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .whitepaper-table tr:last-child td {
            border-bottom: none;
        }

        .whitepaper-table tr:hover {
            background: rgba(255, 255, 255, 0.05);
        }

        .badge {
            display: inline-block;
            padding: 0.3rem 0.8rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: bold;
            margin: 0.2rem;
        }

        .badge-success {
            background: rgba(0, 255, 136, 0.2);
            color: var(--green-growth);
            border: 1px solid rgba(0, 255, 136, 0.3);
        }

        .badge-warning {
            background: rgba(255, 204, 0, 0.2);
            color: #ffcc00;
            border: 1px solid rgba(255, 204, 0, 0.3);
        }

        .badge-info {
            background: rgba(0, 204, 255, 0.2);
            color: var(--neon-cyan);
            border: 1px solid rgba(0, 204, 255, 0.3);
        }

        .roadmap-timeline {
            position: relative;
            padding-left: 30px;
            margin: 2rem 0;
        }

        .roadmap-timeline::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 3px;
            background: linear-gradient(to bottom, var(--blue-tech), var(--purple-innov));
        }

        .timeline-item {
            position: relative;
            margin-bottom: 2rem;
            padding-left: 30px;
        }

        .timeline-item::before {
            content: '';
            position: absolute;
            left: -33px;
            top: 5px;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: var(--neon-cyan);
            box-shadow: 0 0 10px var(--neon-cyan);
        }

        .timeline-date {
            font-weight: bold;
            color: var(--green-growth);
            margin-bottom: 0.5rem;
        }

        .download-btn {
            background: linear-gradient(45deg, var(--green-growth), var(--blue-tech));
            color: white;
            border: none;
            padding: 0.8rem 1.5rem;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            transition: all 0.3s ease;
        }

        .download-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 255, 136, 0.3);
        }

        .contact-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            margin-bottom: 3rem;
        }

        .form-group {
            margin-bottom: 1rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            color: var(--neon-cyan);
            font-size: 0.9rem;
        }

        .form-group input,
        .form-group textarea,
        .form-group select {
            width: 100%;
            padding: 0.8rem 1rem;
            background: rgba(255,255,255,0.05);
            border: 1px solid rgba(0, 102, 255, 0.3);
            border-radius: 8px;
            color: white;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .form-group textarea {
            resize: vertical;
            min-height: 120px;
        }

        .form-group input:focus,
        .form-group textarea:focus,
        .form-group select:focus {
            border-color: var(--neon-cyan);
            box-shadow: 0 0 15px rgba(0, 255, 255, 0.2);
            outline: none;
        }

        .social-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
        }

        .social-card {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 1rem;
            background: rgba(255,255,255,0.03);
            border-radius: 10px;
            text-decoration: none;
            color: white;
            transition: all 0.3s ease;
            border: 1px solid rgba(255,255,255,0.1);
        }

        .social-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 102, 255, 0.2);
            border-color: var(--blue-tech);
        }

        .social-icon {
            width: 50px;
            height: 50px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
        }

        .required {
            color: #ff4444;
        }

        .contact-card {
            background: rgba(255,255,255,0.03);
            padding: 1rem;
            border-radius: 10px;
            border-left: 3px solid;
            margin-bottom: 1rem;
        }

        .contact-card.business {
            border-color: var(--green-growth);
            background: rgba(0, 255, 136, 0.05);
        }

        .contact-card.partnership {
            border-color: var(--blue-tech);
            background: rgba(0, 102, 255, 0.05);
        }

        .contact-card.security {
            border-color: var(--purple-innov);
            background: rgba(138, 43, 226, 0.05);
        }

        .time-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-top: 1rem;
        }

        .time-item {
            text-align: center;
            padding: 1rem;
        }

        .time-item .icon {
            font-size: 2rem;
            margin-bottom: 0.5rem;
        }

        /* Mobile Responsive */
        @media (max-width: 768px) {
            .nav-container {
                flex-direction: column;
                gap: 1rem;
            }

            .nav-links {
                gap: 1rem;
                flex-wrap: wrap;
                justify-content: center;
            }

            .hero h1 {
                font-size: 2.8rem;
            }

            .hero-logo-bg {
                width: 400px;
                height: 400px;
            }

            .token-info-grid {
                grid-template-columns: 1fr;
            }

            .price-display {
                font-size: 2rem;
            }

            .chart-container {
                height: 300px;
            }

            .btn-refresh-modern {
                padding: 0.8rem 1.5rem;
                font-size: 1rem;
            }

            .contact-grid {
                grid-template-columns: 1fr;
            }

            .social-grid {
                grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            }

            .toc ul {
                columns: 1;
            }

            .whitepaper-table {
                font-size: 0.9rem;
            }

            .whitepaper-table th,
            .whitepaper-table td {
                padding: 0.5rem;
            }

            .news-grid {
                grid-template-columns: 1fr;
            }

            .form-row {
                flex-direction: column;
            }

            .visit-counter {
                bottom: 10px;
                right: 10px;
                font-size: 0.8rem;
                padding: 0.6rem 1rem;
            }
        }

        @media (max-width: 480px) {
            .hero h1 {
                font-size: 2.2rem;
            }

            .nav-links a {
                padding: 0.4rem 0.8rem;
                font-size: 0.9rem;
            }

            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .social-grid {
                grid-template-columns: 1fr;
            }

            .whitepaper-logo {
                width: 100px;
                height: 100px;
            }
        }
    
        .form-group select option {
            background: var(--darker-bg);
            color: #ffffff;
        }

    
/* ====== ADMIN LOGIN + ADMIN ONLY ====== */
.admin-login{
  margin-top: 80px;
  padding: 40px 20px;
  background: linear-gradient(135deg, #1e1e2f, #2b2b45);
  border-top: 2px solid rgba(122,92,255,.8);
  text-align: center;
  border-radius: 16px;
}
.admin-login h2{ color:#fff; margin:0 0 10px; }
.admin-login .admin-desc{ color:#cfcfe8; margin:0 0 18px; opacity:.9; }
.admin-login-box{ display:flex; justify-content:center; gap:10px; flex-wrap:wrap; }
.admin-login-box input{
  padding:12px 14px; width:280px; max-width:92vw;
  border-radius:10px; border:1px solid rgba(255,255,255,.12);
  background: rgba(0,0,0,.25); color:#fff; outline:none;
}
.admin-login-box button{
  padding:12px 16px; border-radius:10px; border:none;
  background:#7a5cff; color:#fff; font-weight:700; cursor:pointer;
}
.admin-login-box button:hover{ filter: brightness(1.08); }
.admin-msg{ margin-top:12px; font-weight:700; }
.admin-pill{
  display:inline-flex; align-items:center; gap:8px;
  padding:6px 10px; border-radius:999px; font-size:.9rem;
  background: rgba(0,255,136,.12); color:#00ff88; border:1px solid rgba(0,255,136,.22);
}
.admin-pill.off{
  background: rgba(255,77,77,.12); color:#ff4d4d; border-color: rgba(255,77,77,.22);
}
.admin-only{ display:none !important; }

/* ====== TROPHY BUTTON (Giveaway add) ====== */
.trophy-btn{
  padding: 10px 14px !important;
  display:inline-flex; align-items:center; justify-content:center; gap:10px;
  min-width: 54px;
}
.trophy-btn .trophy-wrap{ font-size: 1.2rem; }
.trophy-btn .trophy-logo{
  width: 22px; height: 22px; border-radius: 6px;
  box-shadow: 0 0 12px rgba(0,255,136,.25);
}
.table-responsive{ overflow-x:auto; width:100%; }
.lb-table{ width:100%; border-collapse: collapse; }
.lb-table th,.lb-table td{ padding:10px 10px; border-bottom:1px solid rgba(255,255,255,.08); text-align:left; }
.lb-top1{ background: rgba(255,215,0,.12); }
.lb-top2{ background: rgba(192,192,192,.12); }
.lb-top3{ background: rgba(205,127,50,.12); }
.mono{ font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono","Courier New", monospace; }

</style>
<!-- Firebase (compat) -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-storage-compat.js"></script>
<script>
  // Firebase init (must run before any firebase.auth()/firestore/storage usage)
  window.firebaseConfig = {
    apiKey: "AIzaSyBPGUlNhohbVrfsIRcIfYAD5Fh7GMZlw2Q",
    authDomain: "stancubyt-fc2b9.firebaseapp.com",
    projectId: "stancubyt-fc2b9",
    storageBucket: "stancubyt-fc2b9.firebasestorage.app",
    messagingSenderId: "263244200492",
    appId: "1:263244200492:web:28adf253b726cfdafaaf89",
    measurementId: "G-272S9HSY3K"
  };
  try {
    if (typeof firebase !== "undefined" && firebase.apps && !firebase.apps.length) {
      firebase.initializeApp(window.firebaseConfig);
    }
  } catch (e) {
    console.warn("Firebase init warning:", e);
  }
</script>

</head><body>
<div id="particles-js"></div>
<div class="visit-counter" id="visitCounter">
<span class="counter-icon">üëÅÔ∏è</span>
<span id="visitCount">0</span> vizite
    </div>
<nav class="scientific-nav">
<div class="nav-container">
<div class="logo">
<div class="logo-3d-container">
<div class="logo-3d">
<img alt="StancuBYT Logo" onerror="this.src='https://via.placeholder.com/80/0a0a1f/00ff88?text=SBYT'" src="https://i.ibb.co/Zzb6ZTG0/logo.png"/>
</div>
<div class="backnote-orbit">
<div class="backnote"></div>
<div class="backnote"></div>
<div class="backnote"></div>
<div class="backnote"></div>
</div>
</div>
<div class="logo-text">StancuBYT</div>
</div>
<div class="nav-links">
<a href="#prezentare" onclick="showSection('prezentare')">Prezentare</a>




</div>
</div>
</nav><section class="page-section active-section" id="prezentare">
<!-- Logo Background 3D -->
<div class="hero-logo-bg">
<div class="logo-3d-bg">
<img alt="StancuBYT Logo Background" src="https://i.ibb.co/Zzb6ZTG0/logo.png"/>
</div>
</div>
<div class="hero">
<h1>StancuBYT Token</h1>
<p style="font-size: 1.2rem; margin-bottom: 2rem; opacity: 0.9;">
                Revolu»õie DigitalƒÉ √Æn Blockchain - Viitorul Tehnologiei Decentralizate
            </p>
<!-- Live Price Display -->
<div id="sbyt-price-box" style="margin-top:20px;">
  <div style="font-size:18px; opacity:.85;">1 SBYT √Æn USD</div>
  <div id="sbyt-price"
       style="font-size:32px; font-weight:bold; color:#00ff88;">
       Se √ÆncarcƒÉ...
  </div>
</div>
<!-- Buton Uniswap -->
<a class="uniswap-btn" href="https://app.uniswap.org/swap?outputCurrency=0x44Cf220399be798baeaE45fd7C4fF44623713833" target="_blank">
                üîÑ Tranzac»õioneazƒÉ pe Uniswap
            </a>
<a class="uniswap-btn" href="https://www.geckoterminal.com/eth/pools/0xabfa4bdb1b4485e0c590bba4adc93a3980f591e44e7ca17d61aa7420e6b81d07?utm_source=coingecko&amp;utm_medium=referral&amp;utm_campaign=searchresults" style="background: linear-gradient(45deg, var(--green-growth), var(--blue-tech));" target="_blank">
                ü¶é VizualizeazƒÉ »ôi Tranzac»õioneazƒÉ pe GeckoTerminal
            </a>
<div class="token-info-grid">
<div class="info-card neon-glow">
<h3>üîó Contract Address</h3>
<a href="https://etherscan.io/token/0x44Cf220399be798baeaE45fd7C4fF44623713833" style="word-break: break-all; font-family: monospace; margin-top: 1rem; color: var(--neon-cyan); text-decoration: none; display: block;" target="_blank">
                        0x44Cf220399be798baeaE45fd7C4fF44623713833
                    </a>
<small style="color: #888;">(Click pentru a vedea pe Etherscan)</small>
</div>
<div class="info-card neon-glow">
<h3>üí∞ Total Supply REAL</h3>
<p id="mainTotalSupply" style="font-size: 2rem; font-weight: bold; color: var(--green-growth);">
<span id="supplyValue">Se √ÆncarcƒÉ...</span> SBYT
                    </p>
<small style="color: #888;">Date live de pe Etherscan</small>
</div>
<div class="info-card neon-glow">
<h3>üèÜ Fondator</h3>
<p style="font-size: 1.2rem; margin-top: 1rem;">
                        Stancu Marian
                    </p>
</div>
</div>
<!-- SECTIUNE NOUTATI -->
<div class="news-section">
<div class="news-header">
<h2 class="news-title">
<span>üì¢</span> NoutƒÉ»õi &amp; Anun»õuri
                    </h2>
<!-- legacy news-controls removed -->
<div id="newsAdminBox" class="admin-news-box" style="display:none; margin-bottom:1rem;">
  <div class="form-row" style="display:flex; gap:10px; flex-wrap:wrap;">
    <select id="newsEmojiSelect" style="max-width:140px;">
      <option value="">Emoji</option>
      <option value="üöÄ">üöÄ</option>
      <option value="üî•">üî•</option>
      <option value="üíé">üíé</option>
      <option value="üì¢">üì¢</option>
      <option value="üéÅ">üéÅ</option>
      <option value="‚úÖ">‚úÖ</option>
      <option value="‚ö†Ô∏è">‚ö†Ô∏è</option>
      <option value="üìà">üìà</option>
      <option value="üì∞">üì∞</option>
    </select>
    <input id="newsEmojiInput" type="text" placeholder="sau scrie (ex: üöÄüî•)" maxlength="10" style="max-width:160px;" />
    <select id="newsTypeInput" style="max-width:220px;">
      <option value="update">Noutate</option>
      <option value="announcement">Anunt</option>
      <option value="news">Stire</option>
    </select>
    <label style="display:flex; align-items:center; gap:8px; color:rgba(255,255,255,0.9);">
      <input id="newsPinnedInput" type="checkbox" /> Pinned
    </label>
  </div>
  <div class="form-row" style="margin-top:10px;">
    <input id="newsTitleInput" type="text" placeholder="Titlu" />
  </div>
  <div class="form-row" style="margin-top:10px;">
    <textarea id="newsContentInput" rows="4" placeholder="Continut"></textarea>
  </div>
  <div class="form-row" style="margin-top:10px; display:flex; gap:10px; align-items:center; flex-wrap:wrap;">
    <input id="newsBgInput" type="file" accept="image/*" />
    <button type="button" id="newsAddBtn" type="button" onclick="adminCreateNews()">‚ûï Adauga</button>
  </div>
</div>
</div>

<div class="news-grid" id="newsContainer">
<!-- NoutƒÉ»õile vor fi adƒÉugate aici dinamic -->
</div>
<!-- Formular pentru adƒÉugare »ôtiri -->
<div class="news-form" id="newsForm" style="display: none;">
<h3 style="margin-bottom: 1rem; color: var(--neon-cyan);">AdaugƒÉ o »ôtire nouƒÉ</h3>
<div class="form-row">
<input id="newsTitle" maxlength="100" placeholder="Titlu »ôtire" type="text"/>
<select id="newsType">
<option value="update">Update</option>
<option value="announcement">Anun»õ Important</option>
<option value="event">Eveniment</option>
</select>
</div>
<div class="form-row">
<input id="newsContent" maxlength="500" placeholder="Con»õinut »ôtire" type="text"/>
</div>
<div class="form-row">
<label style="display: flex; align-items: center; gap: 10px; font-size: 0.9rem;">
<input id="pinNews" type="checkbox"/>
                            FixeazƒÉ aceastƒÉ »ôtire
                        </label>
</div>
<div style="display: flex; gap: 1rem; margin-top: 1rem;">
<button class="news-btn" onclick="saveNews()">üíæ SalveazƒÉ</button>
<button class="news-btn" onclick="cancelAddNews()">‚ùå AnuleazƒÉ</button>
</div>
</div>
</div>
<div class="social-links">
<a class="social-btn" href="https://twitter.com/StancuBYT" title="Twitter">üê¶</a>
<a class="social-btn" href="https://t.me/StancuBYT_Official" title="Telegram">üì¢</a>
<a class="social-btn" href="https://www.reddit.com/user/Upbeat_Fig_936/" target="_blank" title="Reddit">üëΩ</a>
<a class="social-btn" href="https://github.com/StancuBYT" title="GitHub">üíª</a>
<a class="social-btn" href="https://www.linkedin.com/in/sbyt-stancu-212728392/" title="LinkedIn">üëî</a>
<a class="social-btn" href="https://stancubyt.com" title="Website">üåê</a>
</div>
<!-- Status Server -->
<div style="margin-top: 2rem; text-align: center;">
<div class="status-online" id="serverStatus">
                    ‚úÖ Date √ÆncƒÉrcate de pe Etherscan
                </div>
</div>
</div>
<!-- ADMIN LOGIN (Prezentare - josul paginii) -->
<section class="admin-login" id="admin-login">
<h2>üîê Administrator Login</h2>
<p class="admin-desc">Autentificare necesara pentru adaugare/stergere membri, anunturi, noutati, giveaway si promotii.</p>
<div class="admin-login-box">
<input autocomplete="username" id="adminEmail" placeholder="Email administrator" type="email"/>
<input autocomplete="current-password" id="adminPass" placeholder="Parola administrator" type="password"/>
<button onclick="adminSignIn()" type="button">Autentificare</button>
<button id="adminLogoutBtn" onclick="adminSignOut()" style="display:none;" type="button">Delogare</button>
</div>
<div class="admin-status-row">
<span class="admin-badge admin-badge-off" id="adminStatusBadge">Neautentificat</span>
<span class="admin-user-label" id="adminUserLabel"></span>
</div>
<p class="admin-msg" id="adminLoginMsg"></p>

</section>
</section><script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chartjs-chart-financial@0.1.1"></script>
<style>
        /* Variabile culori conform psihologiei marketingului */
        :root {
            --blue-tech: #0066ff;
            --green-growth: #00ff88;
            --purple-innov: #8a2be2;
            --neon-cyan: #00ffff;
            --dark-bg: #0a0a1f;
            --darker-bg: #050510;
            --orange-alert: #ff9500;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Arial', sans-serif;
        }

        body {
            background: var(--dark-bg);
            color: white;
            overflow-x: hidden;
            background-image: 
                radial-gradient(circle at 10% 20%, rgba(0, 102, 255, 0.1) 0%, transparent 20%),
                radial-gradient(circle at 90% 60%, rgba(0, 255, 136, 0.1) 0%, transparent 20%),
                radial-gradient(circle at 50% 80%, rgba(138, 43, 226, 0.1) 0%, transparent 20%);
        }

        /* Particle Animation Background */
        #particles-js {
            position: fixed;
            width: 100%;
            height: 100%;
            z-index: -1;
        }

        /* Logo Background pentru Hero Section */
        .hero-logo-bg {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 600px;
            height: 600px;
            opacity: 0.05;
            z-index: -1;
            pointer-events: none;
        }

        .logo-3d-bg {
            width: 100%;
            height: 100%;
            position: relative;
            animation: float3d 20s infinite ease-in-out;
        }

        .logo-3d-bg img {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            filter: blur(1px) brightness(1.2);
        }

        @keyframes float3d {
            0%, 100% { 
                transform: translateY(0px) rotateX(0deg) rotateY(0deg); 
            }
            25% { 
                transform: translateY(-20px) rotateX(5deg) rotateY(5deg); 
            }
            50% { 
                transform: translateY(0px) rotateX(0deg) rotateY(10deg); 
            }
            75% { 
                transform: translateY(20px) rotateX(-5deg) rotateY(5deg); 
            }
        }

        /* 3D Logo Animation */
        .logo-3d-container {
            position: relative;
            width: 80px;
            height: 80px;
            perspective: 1000px;
        }

        .logo-3d {
            width: 100%;
            height: 100%;
            position: relative;
            transform-style: preserve-3d;
            animation: rotate3d 8s infinite linear;
        }

        .logo-3d img {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            position: absolute;
            backface-visibility: hidden;
        }

        .backnote-orbit {
            position: absolute;
            top: 50%;
            left: 50%;
            width: 120px;
            height: 120px;
            transform: translate(-50%, -50%);
            animation: orbit 6s infinite linear;
        }

        .backnote {
            position: absolute;
            width: 20px;
            height: 20px;
            background: var(--neon-cyan);
            border-radius: 50%;
            filter: blur(2px);
            opacity: 0.7;
        }

        .backnote:nth-child(1) { top: 0; left: 50%; transform: translateX(-50%); }
        .backnote:nth-child(2) { top: 50%; right: 0; transform: translateY(-50%); }
        .backnote:nth-child(3) { bottom: 0; left: 50%; transform: translateX(-50%); }
        .backnote:nth-child(4) { top: 50%; left: 0; transform: translateY(-50%); }

        @keyframes rotate3d {
            0% { transform: rotateY(0deg) rotateX(5deg); }
            100% { transform: rotateY(360deg) rotateX(5deg); }
        }

        @keyframes orbit {
            0% { transform: translate(-50%, -50%) rotate(0deg); }
            100% { transform: translate(-50%, -50%) rotate(360deg); }
        }

        /* Buton Modern Re√ÆmprospƒÉteazƒÉ Datele */
        .btn-refresh-modern {
            background: linear-gradient(45deg, var(--blue-tech), var(--purple-innov));
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            position: relative;
            overflow: hidden;
            margin-top: 1rem;
            box-shadow: 0 5px 20px rgba(0, 102, 255, 0.3);
        }

        .btn-refresh-modern:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 10px 30px rgba(0, 102, 255, 0.5);
        }

        .btn-refresh-modern:active {
            transform: translateY(0) scale(1);
        }

        .refresh-icon {
            font-size: 1.3rem;
            transition: transform 0.5s ease;
        }

        .btn-refresh-modern:hover .refresh-icon {
            animation: rotate360 1s linear infinite;
        }

        .refresh-pulse {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            border-radius: 50px;
            background: linear-gradient(45deg, var(--green-growth), var(--neon-cyan));
            opacity: 0;
            z-index: -1;
            animation: pulseEffect 2s infinite;
        }

        @keyframes rotate360 {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        @keyframes pulseEffect {
            0% { 
                transform: scale(1); 
                opacity: 0.7; 
            }
            100% { 
                transform: scale(1.2); 
                opacity: 0; 
            }
        }

        /* Loading animation pentru buton */
        .btn-refresh-modern.loading {
            background: linear-gradient(45deg, #666, #888);
            cursor: wait;
        }

        .btn-refresh-modern.loading .refresh-icon {
            animation: rotate360 1s linear infinite;
        }

        .btn-refresh-modern.loading .refresh-text {
            opacity: 0.7;
        }

        /* Animatie pentru actualizare succes */
        @keyframes successFlash {
            0%, 100% { 
                background: linear-gradient(45deg, var(--blue-tech), var(--purple-innov)); 
            }
            50% { 
                background: linear-gradient(45deg, var(--green-growth), #00cc66); 
            }
        }

        .btn-refresh-modern.success {
            animation: successFlash 0.5s ease 2;
        }

        /* Navigation - Scientific Style */
        .scientific-nav {
            background: rgba(10, 10, 31, 0.9);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid var(--blue-tech);
            position: fixed;
            width: 100%;
            z-index: 1000;
        }

        .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 2rem;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .logo-text {
            font-size: 1.5rem;
            font-weight: bold;
            background: linear-gradient(45deg, var(--blue-tech), var(--green-growth));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .nav-links {
            display: flex;
            gap: 2rem;
        }

        .nav-links a {
            color: white;
            text-decoration: none;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .nav-links a:hover {
            background: rgba(0, 102, 255, 0.2);
            transform: translateY(-2px);
        }

        .nav-links a::before {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 0;
            height: 2px;
            background: linear-gradient(45deg, var(--blue-tech), var(--green-growth));
            transition: width 0.3s ease;
        }

        .nav-links a:hover::before {
            width: 100%;
        }

        /* Main Content Sections */
        .page-section {
            min-height: 100vh;
            padding: 120px 2rem 2rem;
            max-width: 1200px;
            margin: 0 auto;
            display: none;
            position: relative;
            overflow: hidden;
        }

        .active-section {
            display: block;
        }

        /* Hero Section - Prezentare */
        .hero {
            text-align: center;
            padding-top: 150px;
            position: relative;
            z-index: 1;
        }

        .hero h1 {
            font-size: 4.5rem;
            margin-bottom: 1rem;
            background: linear-gradient(45deg, var(--blue-tech), var(--green-growth), var(--purple-innov));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: gradientShift 3s ease infinite;
            text-shadow: 0 0 30px rgba(0, 102, 255, 0.3);
            position: relative;
            z-index: 2;
        }

        @keyframes gradientShift {
            0%, 100% { filter: hue-rotate(0deg); }
            50% { filter: hue-rotate(45deg); }
        }

        /* Sectiune Noutati */
        .news-section {
            margin: 3rem 0;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 20px;
            padding: 2rem;
            border: 1px solid rgba(0, 255, 136, 0.2);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }

        .news-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid var(--green-growth);
        }

        .news-title {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.8rem;
            background: linear-gradient(45deg, var(--green-growth), var(--neon-cyan));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .news-controls {
            display: flex;
            gap: 1rem;
        }

        .news-btn {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(0, 102, 255, 0.3);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }

        .news-btn:hover {
            background: rgba(0, 102, 255, 0.2);
            transform: translateY(-2px);
        }

        .news-grid {
            display: grid;
            grid-template-columns: repeat(2, minmax(0, 1fr));
            gap: 1.5rem;
        }

        @media (max-width: 768px) {
            .news-grid {
                grid-template-columns: 1fr;
            }
        }

        .news-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 1.5rem;
            border: 1px solid rgba(0, 102, 255, 0.2);
            transition: all 0.3s ease;
        }

        .news-card:hover {
            transform: translateY(-5px);
            border-color: var(--green-growth);
            box-shadow: 0 10px 25px rgba(0, 255, 136, 0.1);
        }

        .news-card.pinned {
            border: 2px solid var(--orange-alert);
            background: rgba(255, 149, 0, 0.05);
        }

        .news-badge {
            display: inline-block;
            padding: 0.3rem 0.8rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: bold;
            margin-bottom: 1rem;
        }

        .badge-update {
            background: rgba(0, 102, 255, 0.2);
            color: var(--blue-tech);
            border: 1px solid var(--blue-tech);
        }

        .badge-announcement {
            background: rgba(255, 149, 0, 0.2);
            color: var(--orange-alert);
            border: 1px solid var(--orange-alert);
        }

        .badge-event {
            background: rgba(0, 255, 136, 0.2);
            color: var(--green-growth);
            border: 1px solid var(--green-growth);
        }

        .news-date {
            font-size: 0.85rem;
            color: #888;
            margin-top: 1rem;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .news-form {
            margin-top: 2rem;
            padding-top: 1.5rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        .form-row {
            display: flex;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .form-row input {
            flex: 1;
            padding: 0.8rem 1rem;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(0, 102, 255, 0.3);
            border-radius: 8px;
            color: white;
            font-size: 1rem;
        }

        .form-row input:focus {
            border-color: var(--neon-cyan);
            box-shadow: 0 0 15px rgba(0, 255, 255, 0.2);
            outline: none;
        }

        /* Contor Vizite */
        .visit-counter {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: rgba(10, 10, 31, 0.9);
            backdrop-filter: blur(10px);
            border: 1px solid var(--blue-tech);
            border-radius: 15px;
            padding: 0.8rem 1.2rem;
            z-index: 1000;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 0.9rem;
            transition: all 0.3s ease;
        }

        .visit-counter:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(0, 102, 255, 0.3);
        }

        .counter-icon {
            animation: pulse 2s infinite;
        }

        .token-info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
            margin: 3rem 0;
        }

        .info-card {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(0, 102, 255, 0.3);
            border-radius: 15px;
            padding: 2rem;
            text-align: center;
            transition: transform 0.3s ease;
        }

        .info-card:hover {
            transform: translateY(-10px);
            border-color: var(--green-growth);
        }

        /* Social Links in Hero */
        .social-links {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin: 2rem 0;
            flex-wrap: wrap;
        }

        .social-btn {
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            color: white;
            text-decoration: none;
            font-size: 1.2rem;
            transition: all 0.3s ease;
            border: 1px solid rgba(0, 102, 255, 0.3);
        }

        .social-btn:hover {
            background: rgba(0, 102, 255, 0.3);
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 102, 255, 0.3);
        }

        /* Buton Uniswap */
        .uniswap-btn {
            background: linear-gradient(45deg, #ff007a, #8a2be2);
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: 25px;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
            margin: 1rem 0;
            font-weight: bold;
        }

        .uniswap-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(255, 0, 122, 0.4);
        }

        /* Scientific Data Visualization */
        .data-visualization {
            background: rgba(255, 255, 255, 0.02);
            border-radius: 20px;
            padding: 2rem;
            margin: 2rem 0;
            border: 1px solid rgba(0, 255, 136, 0.2);
        }

        .chart-container {
            position: relative;
            height: 400px;
            margin: 2rem 0;
        }

        .chart-controls {
            display: flex;
            gap: 1rem;
            margin-bottom: 1rem;
            flex-wrap: wrap;
        }

        .period-btn {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(0, 102, 255, 0.3);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .period-btn.active {
            background: var(--blue-tech);
            border-color: var(--blue-tech);
        }

        .period-btn:hover {
            background: rgba(0, 102, 255, 0.2);
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-top: 1rem;
        }

        .stat-item {
            background: rgba(255, 255, 255, 0.05);
            padding: 1rem;
            border-radius: 10px;
            text-align: center;
        }

        .stat-value {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--neon-cyan);
            margin: 0.5rem 0;
        }

        .neon-glow {
            box-shadow: 
                0 0 20px rgba(0, 102, 255, 0.3),
                0 0 40px rgba(0, 255, 136, 0.2),
                inset 0 0 20px rgba(138, 43, 226, 0.1);
        }

        /* Status Indicators */
        .status-online {
            color: #00ff88;
            animation: pulse 2s infinite;
        }

        .status-offline {
            color: #ff4444;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        /* Token Price Display */
        .price-display {
            font-size: 2.5rem;
            font-weight: bold;
            margin: 1rem 0;
        }

        .price-change {
            font-size: 1.2rem;
            padding: 0.3rem 1rem;
            border-radius: 20px;
            display: inline-block;
            margin: 0.5rem 0;
        }

        .positive { color: #00ff88; background: rgba(0, 255, 136, 0.1); }
        .negative { color: #ff4444; background: rgba(255, 68, 68, 0.1); }

        /* Whitepaper Specific Styles */
        .whitepaper-header {
            text-align: center;
            margin-bottom: 3rem;
            padding-top: 20px;
        }

        .whitepaper-logo {
            width: 150px;
            height: 150px;
            margin: 0 auto 1.5rem;
            border-radius: 50%;
            background: linear-gradient(45deg, var(--blue-tech), var(--purple-innov));
            padding: 15px;
            box-shadow: 0 0 40px rgba(0, 102, 255, 0.4);
        }

        .whitepaper-logo img {
            width: 100%;
            height: 100%;
            border-radius: 50%;
        }

        .toc {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 2rem;
            margin: 2rem 0;
            border-left: 4px solid var(--green-growth);
        }

        .toc h3 {
            margin-bottom: 1rem;
            color: var(--neon-cyan);
        }

        .toc ul {
            columns: 2;
            column-gap: 3rem;
        }

        .toc li {
            margin-bottom: 0.8rem;
            break-inside: avoid;
        }

        .toc a {
            color: white;
            text-decoration: none;
            transition: color 0.3s ease;
        }

        .toc a:hover {
            color: var(--neon-cyan);
            text-decoration: underline;
        }

        .section-card {
            background: rgba(255, 255, 255, 0.03);
            border-radius: 15px;
            padding: 2rem;
            margin: 2rem 0;
            border: 1px solid rgba(0, 102, 255, 0.2);
            transition: transform 0.3s ease, border-color 0.3s ease;
        }

        .section-card:hover {
            transform: translateY(-5px);
            border-color: var(--neon-cyan);
        }

        .section-card h3 {
            color: var(--green-growth);
            margin-bottom: 1.5rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid rgba(0, 255, 136, 0.3);
        }

        .table-container {
            overflow-x: auto;
            margin: 1.5rem 0;
        }

        .whitepaper-table {
            width: 100%;
            border-collapse: collapse;
            background: rgba(255, 255, 255, 0.02);
            border-radius: 10px;
            overflow: hidden;
        }

        .whitepaper-table th {
            background: linear-gradient(45deg, var(--blue-tech), var(--purple-innov));
            color: white;
            padding: 1rem;
            text-align: left;
            font-weight: bold;
        }

        .whitepaper-table td {
            padding: 1rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .whitepaper-table tr:last-child td {
            border-bottom: none;
        }

        .whitepaper-table tr:hover {
            background: rgba(255, 255, 255, 0.05);
        }

        .badge {
            display: inline-block;
            padding: 0.3rem 0.8rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: bold;
            margin: 0.2rem;
        }

        .badge-success {
            background: rgba(0, 255, 136, 0.2);
            color: var(--green-growth);
            border: 1px solid rgba(0, 255, 136, 0.3);
        }

        .badge-warning {
            background: rgba(255, 204, 0, 0.2);
            color: #ffcc00;
            border: 1px solid rgba(255, 204, 0, 0.3);
        }

        .badge-info {
            background: rgba(0, 204, 255, 0.2);
            color: var(--neon-cyan);
            border: 1px solid rgba(0, 204, 255, 0.3);
        }

        .roadmap-timeline {
            position: relative;
            padding-left: 30px;
            margin: 2rem 0;
        }

        .roadmap-timeline::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 3px;
            background: linear-gradient(to bottom, var(--blue-tech), var(--purple-innov));
        }

        .timeline-item {
            position: relative;
            margin-bottom: 2rem;
            padding-left: 30px;
        }

        .timeline-item::before {
            content: '';
            position: absolute;
            left: -33px;
            top: 5px;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: var(--neon-cyan);
            box-shadow: 0 0 10px var(--neon-cyan);
        }

        .timeline-date {
            font-weight: bold;
            color: var(--green-growth);
            margin-bottom: 0.5rem;
        }

        .download-btn {
            background: linear-gradient(45deg, var(--green-growth), var(--blue-tech));
            color: white;
            border: none;
            padding: 0.8rem 1.5rem;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            transition: all 0.3s ease;
        }

        .download-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 255, 136, 0.3);
        }

        .contact-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            margin-bottom: 3rem;
        }

        .form-group {
            margin-bottom: 1rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            color: var(--neon-cyan);
            font-size: 0.9rem;
        }

        .form-group input,
        .form-group textarea,
        .form-group select {
            width: 100%;
            padding: 0.8rem 1rem;
            background: rgba(255,255,255,0.05);
            border: 1px solid rgba(0, 102, 255, 0.3);
            border-radius: 8px;
            color: white;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .form-group textarea {
            resize: vertical;
            min-height: 120px;
        }

        .form-group input:focus,
        .form-group textarea:focus,
        .form-group select:focus {
            border-color: var(--neon-cyan);
            box-shadow: 0 0 15px rgba(0, 255, 255, 0.2);
            outline: none;
        }

        .social-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
        }

        .social-card {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 1rem;
            background: rgba(255,255,255,0.03);
            border-radius: 10px;
            text-decoration: none;
            color: white;
            transition: all 0.3s ease;
            border: 1px solid rgba(255,255,255,0.1);
        }

        .social-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 102, 255, 0.2);
            border-color: var(--blue-tech);
        }

        .social-icon {
            width: 50px;
            height: 50px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
        }

        .required {
            color: #ff4444;
        }

        .contact-card {
            background: rgba(255,255,255,0.03);
            padding: 1rem;
            border-radius: 10px;
            border-left: 3px solid;
            margin-bottom: 1rem;
        }

        .contact-card.business {
            border-color: var(--green-growth);
            background: rgba(0, 255, 136, 0.05);
        }

        .contact-card.partnership {
            border-color: var(--blue-tech);
            background: rgba(0, 102, 255, 0.05);
        }

        .contact-card.security {
            border-color: var(--purple-innov);
            background: rgba(138, 43, 226, 0.05);
        }

        .time-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-top: 1rem;
        }

        .time-item {
            text-align: center;
            padding: 1rem;
        }

        .time-item .icon {
            font-size: 2rem;
            margin-bottom: 0.5rem;
        }

        /* Mobile Responsive */
        @media (max-width: 768px) {
            .nav-container {
                flex-direction: column;
                gap: 1rem;
            }

            .nav-links {
                gap: 1rem;
                flex-wrap: wrap;
                justify-content: center;
            }

            .hero h1 {
                font-size: 2.8rem;
            }

            .hero-logo-bg {
                width: 400px;
                height: 400px;
            }

            .token-info-grid {
                grid-template-columns: 1fr;
            }

            .price-display {
                font-size: 2rem;
            }

            .chart-container {
                height: 300px;
            }

            .btn-refresh-modern {
                padding: 0.8rem 1.5rem;
                font-size: 1rem;
            }

            .contact-grid {
                grid-template-columns: 1fr;
            }

            .social-grid {
                grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            }

            .toc ul {
                columns: 1;
            }

            .whitepaper-table {
                font-size: 0.9rem;
            }

            .whitepaper-table th,
            .whitepaper-table td {
                padding: 0.5rem;
            }

            .news-grid {
                grid-template-columns: 1fr;
            }

            .form-row {
                flex-direction: column;
            }

            .visit-counter {
                bottom: 10px;
                right: 10px;
                font-size: 0.8rem;
                padding: 0.6rem 1rem;
            }
        }

        @media (max-width: 480px) {
            .hero h1 {
                font-size: 2.2rem;
            }

            .nav-links a {
                padding: 0.4rem 0.8rem;
                font-size: 0.9rem;
            }

            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .social-grid {
                grid-template-columns: 1fr;
            }

            .whitepaper-logo {
                width: 100px;
                height: 100px;
            }
        }
    
        .form-group select option {
            background: var(--darker-bg);
            color: #ffffff;
        }

    
/* ====== ADMIN LOGIN + ADMIN ONLY ====== */
.admin-login{
  margin-top: 80px;
  padding: 40px 20px;
  background: linear-gradient(135deg, #1e1e2f, #2b2b45);
  border-top: 2px solid rgba(122,92,255,.8);
  text-align: center;
  border-radius: 16px;
}
.admin-login h2{ color:#fff; margin:0 0 10px; }
.admin-login .admin-desc{ color:#cfcfe8; margin:0 0 18px; opacity:.9; }
.admin-login-box{ display:flex; justify-content:center; gap:10px; flex-wrap:wrap; }
.admin-login-box input{
  padding:12px 14px; width:280px; max-width:92vw;
  border-radius:10px; border:1px solid rgba(255,255,255,.12);
  background: rgba(0,0,0,.25); color:#fff; outline:none;
}
.admin-login-box button{
  padding:12px 16px; border-radius:10px; border:none;
  background:#7a5cff; color:#fff; font-weight:700; cursor:pointer;
}
.admin-login-box button:hover{ filter: brightness(1.08); }
.admin-msg{ margin-top:12px; font-weight:700; }
.admin-pill{
  display:inline-flex; align-items:center; gap:8px;
  padding:6px 10px; border-radius:999px; font-size:.9rem;
  background: rgba(0,255,136,.12); color:#00ff88; border:1px solid rgba(0,255,136,.22);
}
.admin-pill.off{
  background: rgba(255,77,77,.12); color:#ff4d4d; border-color: rgba(255,77,77,.22);
}
.admin-only{ display:none !important; }

/* ====== TROPHY BUTTON (Giveaway add) ====== */
.trophy-btn{
  padding: 10px 14px !important;
  display:inline-flex; align-items:center; justify-content:center; gap:10px;
  min-width: 54px;
}
.trophy-btn .trophy-wrap{ font-size: 1.2rem; }
.trophy-btn .trophy-logo{
  width: 22px; height: 22px; border-radius: 6px;
  box-shadow: 0 0 12px rgba(0,255,136,.25);
}
.table-responsive{ overflow-x:auto; width:100%; }
.lb-table{ width:100%; border-collapse: collapse; }
.lb-table th,.lb-table td{ padding:10px 10px; border-bottom:1px solid rgba(255,255,255,.08); text-align:left; }
.lb-top1{ background: rgba(255,215,0,.12); }
.lb-top2{ background: rgba(192,192,192,.12); }
.lb-top3{ background: rgba(205,127,50,.12); }
.mono{ font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono","Courier New", monospace; }

</style>
<!-- Firebase (compat) -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-storage-compat.js"></script>

<body>
<!-- Particles Background -->
<div id="particles-js"></div>
<!-- Contor Vizite -->
<div class="visit-counter" id="visitCounter">
<span class="counter-icon">üëÅÔ∏è</span>
<span id="visitCount">0</span> vizite
    </div>
<!-- Scientific Navigation -->
<nav class="scientific-nav">
<div class="nav-container">
<div class="logo">
<div class="logo-3d-container">
<div class="logo-3d">
<img alt="StancuBYT Logo" onerror="this.src='https://via.placeholder.com/80/0a0a1f/00ff88?text=SBYT'" src="https://i.ibb.co/Zzb6ZTG0/logo.png"/>
</div>
<div class="backnote-orbit">
<div class="backnote"></div>
<div class="backnote"></div>
<div class="backnote"></div>
<div class="backnote"></div>
</div>
</div>
<div class="logo-text">StancuBYT</div>
</div>
<div class="nav-links">
<a href="#prezentare" onclick="showSection('prezentare')">Prezentare</a>
<a href="#statistici" onclick="showSection('statistici'); fetchAllData();">Statistici</a>
<a href="#whitepaper" onclick="showSection('whitepaper')">Whitepaper</a>
<a href="#contact" onclick="showSection('contact')">Contact</a>
<a href="#giveaway" onclick="showSection('giveaway')">Giveaway &amp; Promo»õii</a>
</div>
</div>
</nav>
<!-- Prezentare Section -->
<section class="page-section active-section" id="prezentare">
<!-- Logo Background 3D -->
<div class="hero-logo-bg">
<div class="logo-3d-bg">
<img alt="StancuBYT Logo Background" src="https://i.ibb.co/Zzb6ZTG0/logo.png"/>
</div>
</div>
<div class="hero">
<h1>StancuBYT Token</h1>
<p style="font-size: 1.2rem; margin-bottom: 2rem; opacity: 0.9;">
                Revolu»õie DigitalƒÉ √Æn Blockchain - Viitorul Tehnologiei Decentralizate
            </p>
<!-- Live Price Display -->
<div id="livePriceDisplay" style="margin: 2rem 0;">
<div class="price-display" id="currentPrice">Se √ÆncarcƒÉ...</div>
<div class="price-change" id="priceChange"></div>
<small id="lastUpdated">Ultima actualizare: --:--:--</small>
</div>
<!-- Buton Uniswap -->
<a class="uniswap-btn" href="https://app.uniswap.org/swap?outputCurrency=0x44Cf220399be798baeaE45fd7C4fF44623713833" target="_blank">
                üîÑ Tranzac»õioneazƒÉ pe Uniswap
            </a>
<a class="uniswap-btn" href="https://www.geckoterminal.com/eth/pools/0xabfa4bdb1b4485e0c590bba4adc93a3980f591e44e7ca17d61aa7420e6b81d07?utm_source=coingecko&amp;utm_medium=referral&amp;utm_campaign=searchresults" style="background: linear-gradient(45deg, var(--green-growth), var(--blue-tech));" target="_blank">
                ü¶é VizualizeazƒÉ »ôi Tranzac»õioneazƒÉ pe GeckoTerminal
            </a>
<div class="token-info-grid">
<div class="info-card neon-glow">
<h3>üîó Contract Address</h3>
<a href="https://etherscan.io/token/0x44Cf220399be798baeaE45fd7C4fF44623713833" style="word-break: break-all; font-family: monospace; margin-top: 1rem; color: var(--neon-cyan); text-decoration: none; display: block;" target="_blank">
                        0x44Cf220399be798baeaE45fd7C4fF44623713833
                    </a>
<small style="color: #888;">(Click pentru a vedea pe Etherscan)</small>
</div>
<div class="info-card neon-glow">
<h3>üí∞ Total Supply REAL</h3>
<p id="mainTotalSupply" style="font-size: 2rem; font-weight: bold; color: var(--green-growth);">
<span id="supplyValue">Se √ÆncarcƒÉ...</span> SBYT
                    </p>
<small style="color: #888;">Date live de pe Etherscan</small>
</div>
<div class="info-card neon-glow">
<h3>üèÜ Fondator</h3>
<p style="font-size: 1.2rem; margin-top: 1rem;">
                        Stancu Marian
                    </p>
</div>
</div>
<!-- SECTIUNE NOUTATI -->
<div class="news-section">
<div class="news-header">
<h2 class="news-title">
<span>üì¢</span> NoutƒÉ»õi &amp; Anun»õuri
                    </h2>
<!-- legacy news-controls removed -->
<div class="news-grid" id="newsContainer">
<!-- NoutƒÉ»õile vor fi adƒÉugate aici dinamic -->
</div>
<!-- Formular pentru adƒÉugare »ôtiri -->
<div class="news-form" id="newsForm" style="display: none;">
<h3 style="margin-bottom: 1rem; color: var(--neon-cyan);">AdaugƒÉ o »ôtire nouƒÉ</h3>
<div class="form-row">
<input id="newsTitle" maxlength="100" placeholder="Titlu »ôtire" type="text"/>
<select id="newsType">
<option value="update">Update</option>
<option value="announcement">Anun»õ Important</option>
<option value="event">Eveniment</option>
</select>
</div>
<div class="form-row">
<input id="newsContent" maxlength="500" placeholder="Con»õinut »ôtire" type="text"/>
</div>
<div class="form-row">
<label style="display: flex; align-items: center; gap: 10px; font-size: 0.9rem;">
<input id="pinNews" type="checkbox"/>
                            FixeazƒÉ aceastƒÉ »ôtire
                        </label>
</div>
<div style="display: flex; gap: 1rem; margin-top: 1rem;">
<button class="news-btn" onclick="saveNews()">üíæ SalveazƒÉ</button>
<button class="news-btn" onclick="cancelAddNews()">‚ùå AnuleazƒÉ</button>
</div>
</div>
</div>
<div class="social-links">
<a class="social-btn" href="https://twitter.com/StancuBYT" title="Twitter">üê¶</a>
<a class="social-btn" href="https://t.me/StancuBYT_Official" title="Telegram">üì¢</a>
<a class="social-btn" href="https://www.reddit.com/user/Upbeat_Fig_936/" target="_blank" title="Reddit">üëΩ</a>
<a class="social-btn" href="https://github.com/StancuBYT" title="GitHub">üíª</a>
<a class="social-btn" href="https://www.linkedin.com/in/sbyt-stancu-212728392/" title="LinkedIn">üëî</a>
<a class="social-btn" href="https://stancubyt.com" title="Website">üåê</a>
</div>
<!-- Status Server -->
<div style="margin-top: 2rem; text-align: center;">
<div class="status-online" id="serverStatus">
                    ‚úÖ Date √ÆncƒÉrcate de pe Etherscan
                </div>
</div>
</div>
<!-- ADMIN LOGIN (Prezentare - josul paginii) -->
<section class="admin-login" id="admin-login">
<h2>üîê Administrator Login</h2>
<p class="admin-desc">Autentificare (Firebase Auth) necesara pentru adaugare/stergere membri, anunturi, noutati, giveaway si promotii.</p>
<div class="admin-login-box">
<input autocomplete="username" id="adminEmail" placeholder="Email administrator" type="email">
<input autocomplete="current-password" id="adminPass" placeholder="Parola administrator" type="password">
<button onclick="adminSignIn()" type="button">Autentificare</button>
<button id="adminLogoutBtn" onclick="adminSignOut()" style="display:none;" type="button">Delogare</button>
</input></input></div>
<div class="admin-status-row">
<span class="admin-badge admin-badge-off" id="adminStatusBadge">Neautentificat</span>
<span class="admin-user-label" id="adminUserLabel"></span>
</div>
<p class="admin-msg" id="adminLoginMsg"></p>

</section>
</section>
<!-- Statistici Section -->
<section class="page-section" id="statistici">
<div style="text-align: center; margin-bottom: 3rem; padding-top: 20px;">
<h1 style="font-size: 2.5rem; margin-bottom: 0.5rem;">AnalizƒÉ »òtiin»õificƒÉ √Æn Timp Real</h1>
<p>Date live preluate de pe Etherscan</p>
<!-- Buton Modern Re√ÆmprospƒÉteazƒÉ Datele -->
<button class="btn-refresh-modern" id="refreshButton" onclick="fetchAllData()">
<span class="refresh-icon">üîÑ</span>
<span class="refresh-text">Re√ÆmprospƒÉteazƒÉ Datele</span>
<span class="refresh-pulse"></span>
</button>
</div>
<div class="data-visualization neon-glow">
<h3>üìà Pre»õ √Æn Timp Real</h3>
<!-- Chart Controls -->
<div class="chart-controls">
<button class="period-btn active" onclick="changeChartPeriod('1h')">1H</button>
<button class="period-btn" onclick="changeChartPeriod('24h')">24H</button>
<button class="period-btn" onclick="changeChartPeriod('7d')">7 Zile</button>
<button class="period-btn" onclick="changeChartPeriod('1m')">1 LunƒÉ</button>
<button class="period-btn" onclick="changeChartType('candlestick')">Lum√¢nƒÉri</button>
<button class="period-btn" onclick="changeChartType('line')">Linie</button>
</div>
<div class="chart-container">
<canvas id="priceChart"></canvas>
</div>
<div class="loading" id="priceData">Se √ÆncarcƒÉ datele live...</div>
</div>
<div class="data-visualization neon-glow">
<h3>üìä Metrici Contract - Live</h3>
<div class="stats-grid" id="etherscanStats">
<div class="stat-item">
<div>Holders</div>
<div class="stat-value" id="holdersCount">-</div>
<div>De»õinƒÉtori</div>
</div>
<div class="stat-item">
<div>Total Supply REAL</div>
<div class="stat-value" id="totalSupply">-</div>
<div>SBYT</div>
</div>
<div class="stat-item">
<div>Tranzac»õii</div>
<div class="stat-value" id="transactionsCount">-</div>
<div>Total TX</div>
</div>
<div class="stat-item">
<div>Market Cap</div>
<div class="stat-value" id="marketCap">-</div>
<div>USD</div>
</div>
<div class="stat-item">
<div>Volum 24h</div>
<div class="stat-value" id="volume24h">-</div>
<div>USD</div>
</div>
</div>
</div>
<div class="data-visualization neon-glow">
<h3>üìã Detalii Contract</h3>
<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1rem; margin-top: 1rem;">
<div>
<p><strong>Token Name:</strong> <span id="tokenName">StancuBYT</span></p>
<p><strong>Symbol:</strong> <span id="tokenSymbol">SBYT</span></p>
<p><strong>Decimals:</strong> <span id="tokenDecimals">18</span></p>
<p><strong>Creation Date:</strong> <span id="creationDate">-</span></p>
</div>
<div>
<p><strong>Contract Address:</strong> <span id="contractCreator">0x44Cf220399be798baeaE45fd7C4fF44623713833</span></p>
<p><strong>Contract Age:</strong> <span id="contractAge">-</span> zile</p>
<p><strong>Last Update:</strong> <span id="lastUpdateTime">-</span></p>
<p><strong>Contract verificat pe Etherscan</strong></p>
</div>
</div>
</div>
<div class="token-info-grid">
<div class="info-card">
<h3>üîç Vezi pe Etherscan</h3>
<a href="https://etherscan.io/token/0x44Cf220399be798baeaE45fd7C4fF44623713833" style="color: var(--neon-cyan); text-decoration: none;" target="_blank">
                    AnalizƒÉ detaliatƒÉ Etherscan ‚Ä∫
                </a>
</div>
<div class="info-card">
<h3>üìà Vezi pe DexTools</h3>
<a href="https://www.dextools.io/app/ether/pair-explorer/0xad4140b82dc8e2249af076b5669a8d868d2d55be8920f0a3882b7149dc507b18?t=1764524205462" style="color: var(--neon-cyan); text-decoration: none;" target="_blank">
                    Chart live DexTools ‚Ä∫
                </a>
</div>
<div class="info-card">
<h3>ü¶ç Vezi pe Apespace</h3>
<a href="https://apespace.io/eth/0x83ced65e291d19c436a6f85aaa0a24e47f6e4368" style="color: var(--neon-cyan); text-decoration: none;" target="_blank">
                    AnalizƒÉ Apespace ‚Ä∫
                </a>
</div>
<div class="info-card">
<h3>ü¶é Vezi pe GeckoTerminal</h3>
<a href="https://www.geckoterminal.com/eth/pools/0xabfa4bdb1b4485e0c590bba4adc93a3980f591e44e7ca17d61aa7420e6b81d07?utm_source=coingecko&amp;utm_medium=referral&amp;utm_campaign=searchresults" style="color: var(--neon-cyan); text-decoration: none;" target="_blank">
                    Pool &amp; tranzac»õionare GeckoTerminal ‚Ä∫
                </a>
</div>
<div class="info-card">
<h3>üìå Vezi pe CoinMarketCap DEX</h3>
<a href="https://dex.coinmarketcap.com/token/ethereum/0x44cf220399be798baeae45fd7c4ff44623713833/" style="color: var(--neon-cyan); text-decoration: none;" target="_blank">
                    coinmarketcap DEX ‚Ä∫
                </a>
</div>
</div>
</section>
<!-- Whitepaper Section - VERSIUNE PROFESIONALƒÇ -->
<section class="page-section" id="whitepaper">
<div class="whitepaper-header">
<div class="whitepaper-logo">
<img alt="StancuBYT Logo" src="https://i.ibb.co/Zzb6ZTG0/logo.png"/>
</div>
<h1 style="font-size: 3rem; margin-bottom: 0.5rem; background: linear-gradient(45deg, var(--blue-tech), var(--green-growth), var(--purple-innov)); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">
                StancuBYT (SBYT) Whitepaper
            </h1>
<p style="font-size: 1.2rem; opacity: 0.9; margin-bottom: 0.5rem;">
                Documenta»õie TehnologicƒÉ CompletƒÉ
            </p>
<p style="color: var(--neon-cyan); font-family: monospace;">
                Lansare token: Oct 26, 2025 ‚Äî 11:23:11‚ÄØPM‚ÄØ+UTC
            </p>
<!-- Butoane Download -->
<div style="margin: 2rem 0; display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap;">
<button class="download-btn" onclick="downloadWhitepaper('ro')">
<span>üì•</span> DescarcƒÉ Whitepaper RO
                </button>
<button class="download-btn" onclick="downloadWhitepaper('en')">
<span>üì•</span> Download Whitepaper EN
                </button>
<button class="download-btn" onclick="window.open('https://etherscan.io/token/0x44Cf220399be798baeaE45fd7C4fF44623713833', '_blank')">
<span>üîç</span> Vezi Contract pe Etherscan
                </button>
</div>
</div>
<!-- Cuprins -->
<div class="toc neon-glow">
<h3>üìö Cuprins</h3>
<ul>
<li><a href="#executive-summary" onclick="scrollToSection('executive-summary')">1. Executive Summary</a></li>
<li><a href="#informatii-generale" onclick="scrollToSection('informatii-generale')">2. Informa»õii generale</a></li>
<li><a href="#tokenomics" onclick="scrollToSection('tokenomics')">3. Tokenomics &amp; Distribu»õie</a></li>
<li><a href="#utilitate" onclick="scrollToSection('utilitate')">4. Utilitate &amp; Scop</a></li>
<li><a href="#roadmap" onclick="scrollToSection('roadmap')">5. Plan de lansare / Roadmap</a></li>
<li><a href="#taxe" onclick="scrollToSection('taxe')">6. Taxe &amp; Tranzac»õii</a></li>
<li><a href="#echipa" onclick="scrollToSection('echipa')">7. Echipa</a></li>
<li><a href="#contact-wp" onclick="scrollToSection('contact-wp')">8. Contact &amp; Linkuri</a></li>
<li><a href="#recomandari" onclick="scrollToSection('recomandari')">9. Note &amp; RecomandƒÉri</a></li>
<li><a href="#disclaimer" onclick="scrollToSection('disclaimer')">10. Disclaimer &amp; Riscuri</a></li>
</ul>
</div>
<!-- 1. Executive Summary -->
<div class="section-card neon-glow" id="executive-summary">
<h3>1. Executive Summary</h3>
<p>StancuBYT (SBYT) este un token ERC‚Äë20 creat pentru a sus»õine o comunitate digitalƒÉ modernƒÉ, transparentƒÉ »ôi orientatƒÉ spre utilitate. Cu un supply total de 4.000.000 SBYT »ôi un pre»õ de lansare de 200‚ÄØ000 SBYT = 1 ETH, SBYT este conceput pentru a oferi utilitate realƒÉ ‚Äî plƒÉ»õi interne, recompense, acces la servicii »ôi participare comunitarƒÉ. Lansarea oficialƒÉ a avut loc pe 26 octombrie 2025.</p>
</div>
<!-- 2. Informa»õii generale -->
<div class="section-card neon-glow" id="informatii-generale">
<h3>2. Informa»õii generale</h3>
<div class="table-container">
<table class="whitepaper-table">
<tr>
<th>Parametru</th>
<th>Valoare</th>
</tr>
<tr>
<td><strong>Token</strong></td>
<td>StancuBYT (SBYT)</td>
</tr>
<tr>
<td><strong>Standard</strong></td>
<td>ERC‚Äë20</td>
</tr>
<tr>
<td><strong>Smart‚Äëcontract address</strong></td>
<td>
<a href="https://etherscan.io/token/0x44Cf220399be798baeaE45fd7C4fF44623713833" style="color: var(--neon-cyan); text-decoration: none; font-family: monospace;" target="_blank">
                                0x44Cf220399be798baeaE45fd7C4fF44623713833
                            </a>
</td>
</tr>
<tr>
<td><strong>Website oficial</strong></td>
<td>
<a href="https://stancubyt.com/" style="color: var(--neon-cyan); text-decoration: none;" target="_blank">
                                https://stancubyt.com/
                            </a>
</td>
</tr>
</table>
</div>
<div style="margin-top: 2rem;">
<h4 style="color: var(--blue-tech); margin-bottom: 1rem;">Social Media / Comunicare</h4>
<div class="social-grid">
<a class="social-card" href="https://twitter.com/StancuBYT" target="_blank">
<div class="social-icon" style="background: rgba(29, 161, 242, 0.2);">
                            üê¶
                        </div>
<div>
<strong>Twitter</strong>
<small>@StancuBYT</small>
</div>
</a>
<a class="social-card" href="https://t.me/StancuBYT_Official" target="_blank">
<div class="social-icon" style="background: rgba(0, 136, 204, 0.2);">
                            üì¢
                        </div>
<div>
<strong>Telegram</strong>
<small>Official Channel</small>
</div>
</a>
<a class="social-card" href="https://github.com/StancuBYT" target="_blank">
<div class="social-icon" style="background: rgba(24, 23, 23, 0.2);">
                            üíª
                        </div>
<div>
<strong>GitHub</strong>
<small>Cod sursƒÉ</small>
</div>
</a>
</div>
</div>
</div>
<!-- 3. Tokenomics & Distribu»õie -->
<div class="section-card neon-glow" id="tokenomics">
<h3>3. Tokenomics &amp; Distribu»õie</h3>
<div class="table-container">
<table class="whitepaper-table">
<tr>
<th>Aspect</th>
<th>Valoare</th>
</tr>
<tr>
<td><strong>Total supply</strong></td>
<td>4.000.000 SBYT (18 decimale)</td>
</tr>
<tr>
<td><strong>Pre»õ ini»õial</strong></td>
<td>200.000 SBYT = 1 ETH</td>
</tr>
</table>
</div>
<div style="margin: 2rem 0;">
<h4 style="color: var(--green-growth); margin-bottom: 1rem;">Distribu»õie Token</h4>
<div class="table-container">
<table class="whitepaper-table">
<tr>
<th>Categorie</th>
<th>Procentaj</th>
<th>Cantitate SBYT</th>
</tr>
<tr>
<td>Fondator / Echipa</td>
<td>15%</td>
<td>600.000 SBYT</td>
</tr>
<tr>
<td>RezervƒÉ proiect / Dezvoltare</td>
<td>40%</td>
<td>1.600.000 SBYT</td>
</tr>
<tr>
<td>Marketing &amp; Comunitate</td>
<td>15%</td>
<td>600.000 SBYT</td>
</tr>
<tr>
<td>Presale / Investitori</td>
<td>30%</td>
<td>1.200.000 SBYT</td>
</tr>
</table>
</div>
</div>
<div style="background: rgba(0, 255, 136, 0.05); padding: 1rem; border-radius: 10px; border-left: 3px solid var(--green-growth); margin-top: 1.5rem;">
<p style="margin: 0; font-size: 0.9rem;">
<strong>üìù NotƒÉ:</strong> Se recomandƒÉ lock‚Äëup pentru partea echipei (ex: 12 luni cu eliberare treptatƒÉ) pentru a asigura stabilitate »ôi √Æncredere.
                </p>
</div>
</div>
<!-- 4. Utilitate & Scop -->
<div class="section-card neon-glow" id="utilitate">
<h3>4. Utilitate &amp; Scop</h3>
<p>SBYT este conceput sƒÉ fie coloana vertebralƒÉ a ecosistemului digital al comunitƒÉ»õii StancuBYT. UtilitƒÉ»õi anticipate:</p>
<div style="margin: 1.5rem 0;">
<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1rem;">
<div style="padding: 1rem; background: rgba(0, 102, 255, 0.1); border-radius: 10px;">
<div style="font-size: 2rem; margin-bottom: 0.5rem;">‚ö°</div>
<strong>Tranzac»õii interne</strong>
<p style="font-size: 0.9rem; margin-top: 0.5rem; opacity: 0.8;">Rapide »ôi sigure pe blockchain</p>
</div>
<div style="padding: 1rem; background: rgba(0, 255, 136, 0.1); border-radius: 10px;">
<div style="font-size: 2rem; margin-bottom: 0.5rem;">üèÜ</div>
<strong>Recompense comunitate</strong>
<p style="font-size: 0.9rem; margin-top: 0.5rem; opacity: 0.8;">Beneficii pentru membri activi</p>
</div>
<div style="padding: 1rem; background: rgba(138, 43, 226, 0.1); border-radius: 10px;">
<div style="font-size: 2rem; margin-bottom: 0.5rem;">üîí</div>
<strong>Acces exclusiv</strong>
<p style="font-size: 0.9rem; margin-top: 0.5rem; opacity: 0.8;">Servicii »ôi con»õinut premium</p>
</div>
</div>
</div>
<p style="margin-top: 1.5rem;">
                Prin tokenomics clar »ôi supply limitat, SBYT urmƒÉre»ôte sƒÉ devinƒÉ un instrument util ‚Äî nu doar un obiect de specula»õie.
            </p>
</div>
<!-- 5. Plan de lansare / Roadmap -->
<div class="section-card neon-glow" id="roadmap">
<h3>5. Plan de lansare / Roadmap</h3>
<div class="roadmap-timeline">
<div class="timeline-item">
<div class="timeline-date">Faza 1: Lansare</div>
<p>Publicare smart‚Äëcontract, verificare pe Etherscan, v√¢nzare cƒÉtre investitori early adopters.</p>
<span class="badge badge-success">Completat</span>
</div>
<div class="timeline-item">
<div class="timeline-date">Faza 2: Listare</div>
<p>Creare pool lichiditate pe Uniswap, listare pe DEX, campanii marketing, construire comunitate.</p>
<span class="badge badge-warning">√én Curs</span>
</div>
<div class="timeline-item">
<div class="timeline-date">Faza 3: Dezvoltare</div>
<p>Integrare token √Æn platforme, servicii, func»õii extra, gestionare rezervƒÉ, update‚Äëuri periodice.</p>
<span class="badge badge-info">Planificat</span>
</div>
<div class="timeline-item">
<div class="timeline-date">Faza 4: Extindere</div>
<p>Integrare token √Æn platforme/servicii, func»õionalitƒÉ»õi suplimentare, audit smart-contract.</p>
<span class="badge badge-info">Planificat</span>
</div>
</div>
</div>
<!-- 6. Taxe & Tranzac»õii -->
<div class="section-card neon-glow" id="taxe">
<h3>6. Taxe &amp; Tranzac»õii</h3>
<div class="table-container">
<table class="whitepaper-table">
<tr>
<th>Tip TaxƒÉ</th>
<th>Procent</th>
<th>Destina»õie</th>
</tr>
<tr>
<td>Comision DEX (Uniswap)</td>
<td>‚âà 0.30%</td>
<td>Lichiditate &amp; Furnizori</td>
</tr>
<tr>
<td>Gas Fee (Ethereum)</td>
<td>Variabil</td>
<td>Re»õea Ethereum</td>
</tr>
<tr>
<td>TaxƒÉ suplimentarƒÉ*</td>
<td>ConfigurabilƒÉ</td>
<td>Marketing / Burn / Recompense</td>
</tr>
</table>
</div>
<div style="background: rgba(255, 204, 0, 0.05); padding: 1rem; border-radius: 10px; border-left: 3px solid #ffcc00; margin-top: 1.5rem;">
<p style="margin: 0; font-size: 0.9rem;">
<strong>‚ö†Ô∏è NotƒÉ:</strong> DacƒÉ implementezi *taxƒÉ suplimentarƒÉ pe transfer*, aceasta trebuie definitƒÉ clar √Æn smart‚Äëcontract »ôi poate merge spre lichiditate, marketing, burn sau recompense comunitate.
                </p>
</div>
</div>
<!-- 7. Echipa -->
<div class="section-card neon-glow" id="echipa">
<h3>7. Echipa</h3>
<div style="display: flex; align-items: center; gap: 2rem; margin: 2rem 0; flex-wrap: wrap;">
<div style="width: 100px; height: 100px; border-radius: 50%; background: linear-gradient(45deg, var(--blue-tech), var(--purple-innov)); display: flex; align-items: center; justify-content: center; font-size: 2.5rem;">
                    üë®‚Äçüíº
                </div>
<div>
<h4 style="color: var(--green-growth); margin-bottom: 0.5rem;">Stancu Marian</h4>
<p><strong>Fondator &amp; CEO</strong></p>
<p style="opacity: 0.8; margin-top: 0.5rem;">Ini»õiator »ôi coordonator proiect StancuBYT</p>
</div>
</div>
<!-- Management echipa (salvare permanenta - Firebase) -->
<div style="margin-top: 2rem; padding-top: 1.5rem; border-top: 1px solid rgba(255,255,255,0.12);">
<div style="display:flex; align-items:center; justify-content:space-between; gap:12px; flex-wrap:wrap;">
<h4 style="margin:0; color: var(--neon-cyan);">Membri echipa (Live)</h4>
<div style="display:flex; gap:10px; flex-wrap:wrap;">
<button class="news-btn" onclick="requestPassword('teamAdd')">‚ûï AdaugƒÉ membru</button>
<button class="news-btn" onclick="requestPassword('teamClear')">üóëÔ∏è »òterge to»õi</button>
</div>
</div>
<div id="teamList" style="display:grid; grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)); gap:1rem; margin-top:1rem;"></div>
<div id="teamForm" style="display:none; margin-top:1rem; background: rgba(255,255,255,0.03); border:1px solid rgba(255,255,255,0.1); border-radius:14px; padding:1rem;">
<div class="form-row">
<input id="teamName" maxlength="80" placeholder="Nume membru" type="text"/>
<input id="teamRole" maxlength="80" placeholder="Func»õia / rol" type="text"/>
</div>
<div class="form-row">
<input id="teamJoinDate" placeholder="Data √Ænscrierii" type="date"/>
<input id="teamAvatar" maxlength="240" placeholder="Link foto / avatar (op»õional)" type="url"/>
</div>
<div style="display:flex; gap:10px; flex-wrap:wrap; justify-content:flex-end; margin-top:10px;">
<button class="news-btn" onclick="saveTeamMember()">üíæ SalveazƒÉ</button>
<button class="news-btn" onclick="cancelTeamMember()">‚úñ AnuleazƒÉ</button>
</div>
</div>
</div>
<div style="background: rgba(0, 204, 255, 0.05); padding: 1rem; border-radius: 10px; border-left: 3px solid var(--neon-cyan);">
<p style="margin: 0; font-size: 0.9rem;">
<strong>üíº Echipa √Æn formare:</strong> Vor fi inclu»ôi dezvoltatori blockchain, marketeri, manager comunitate. Informa»õiile vor fi actualizate pe mƒÉsurƒÉ ce echipa se extinde.
                </p>
</div>
</div>
<!-- 8. Contact & Linkuri -->
<div class="section-card neon-glow" id="contact-wp">
<h3>8. Contact &amp; Linkuri</h3>
<div style="margin: 1.5rem 0;">
<div class="social-grid">
<a class="social-card" href="https://stancubyt.com/" target="_blank">
<div class="social-icon" style="background: rgba(0, 255, 136, 0.2);">
                            üåê
                        </div>
<div>
<strong>Website</strong>
<small>stancubyt.com</small>
</div>
</a>
<a class="social-card" href="mailto:contact@stancubyt.com">
<div class="social-icon" style="background: rgba(255, 68, 68, 0.2);">
                            üìß
                        </div>
<div>
<strong>Email</strong>
<small>contact@stancubyt.com</small>
</div>
</a>
<a class="social-card" href="https://www.linkedin.com/in/sbyt-stancu-212728392/" target="_blank">
<div class="social-icon" style="background: rgba(10, 102, 194, 0.2);">
                            üëî
                        </div>
<div>
<strong>LinkedIn</strong>
<small>Business Network</small>
</div>
</a>
</div>
</div>
</div>
<!-- 9. Note & RecomandƒÉri -->
<div class="section-card neon-glow" id="recomandari">
<h3>9. Note &amp; RecomandƒÉri</h3>
<div style="margin: 1.5rem 0;">
<div style="display: grid; gap: 1rem;">
<div style="display: flex; align-items: flex-start; gap: 1rem; padding: 1rem; background: rgba(0, 102, 255, 0.05); border-radius: 10px;">
<span style="font-size: 1.5rem;">üîç</span>
<div>
<strong>Audit Smart‚ÄëContract</strong>
<p style="margin-top: 0.5rem; font-size: 0.9rem; opacity: 0.8;">Recomandat pentru credibilitate »ôi securitate suplimentarƒÉ √Ænainte de listare.</p>
</div>
</div>
<div style="display: flex; align-items: flex-start; gap: 1rem; padding: 1rem; background: rgba(0, 255, 136, 0.05); border-radius: 10px;">
<span style="font-size: 1.5rem;">üìä</span>
<div>
<strong>Transparen»õƒÉ Distribu»õie</strong>
<p style="margin-top: 0.5rem; font-size: 0.9rem; opacity: 0.8;">Distribu»õia »ôi vesting‚Äëul trebuie sƒÉ fie clare »ôi transparente pentru investitori.</p>
</div>
</div>
<div style="display: flex; align-items: flex-start; gap: 1rem; padding: 1rem; background: rgba(138, 43, 226, 0.05); border-radius: 10px;">
<span style="font-size: 1.5rem;">üí¨</span>
<div>
<strong>Comunicare Comunitate</strong>
<p style="margin-top: 0.5rem; font-size: 0.9rem; opacity: 0.8;">Men»õine comunicare constantƒÉ: actualizƒÉri, roadmap, planuri, echipƒÉ.</p>
</div>
</div>
</div>
</div>
</div>
<!-- 10. Disclaimer & Riscuri -->
<div class="section-card neon-glow" id="disclaimer">
<h3>10. Disclaimer &amp; Riscuri</h3>
<div style="background: rgba(255, 68, 68, 0.05); padding: 1.5rem; border-radius: 10px; border: 1px solid rgba(255, 68, 68, 0.2); margin-top: 1rem;">
<div style="display: flex; align-items: flex-start; gap: 1rem; margin-bottom: 1rem;">
<span style="font-size: 1.5rem; color: #ff4444;">‚ö†Ô∏è</span>
<div>
<h4 style="color: #ff4444; margin-bottom: 0.5rem;">Avertisment important</h4>
<p>Tokenul SBYT este un <strong>token de utilitate</strong>. Nu este garantat un instrument financiar, nici un venit garantat.</p>
</div>
</div>
<div style="display: grid; gap: 0.8rem;">
<p style="margin: 0; font-size: 0.9rem;">
                        ‚Ä¢ Investi»õiile implicƒÉ riscuri ‚Äî pre»õul este volatil, depinde de adop»õie »ôi acceptare.
                    </p>
<p style="margin: 0; font-size: 0.9rem;">
                        ‚Ä¢ Smart‚Äëcontractele pot avea vulnerabilitƒÉ»õi ‚Äî recomandƒÉm audit extern √Ænainte de utilizare.
                    </p>
<p style="margin: 0; font-size: 0.9rem;">
                        ‚Ä¢ Proiectul trebuie tratat transparent »ôi responsabil.
                    </p>
<p style="margin: 0; font-size: 0.9rem;">
                        ‚Ä¢ Consulta»õi un specialist financiar √Ænainte de orice investi»õie.
                    </p>
</div>
</div>
</div>
<!-- Butoane Ac»õiune -->
<div style="text-align: center; margin: 3rem 0;">
<button class="btn-refresh-modern" onclick="showSection('contact')" style="margin-right: 1rem;">
<span class="refresh-icon">üì®</span>
<span class="refresh-text">ContacteazƒÉ Echipa</span>
</button>
<button class="btn-refresh-modern" onclick="window.open('https://app.uniswap.org/swap?outputCurrency=0x44Cf220399be798baeaE45fd7C4fF44623713833', '_blank')">
<span class="refresh-icon">üîÑ</span>
<span class="refresh-text">CumpƒÉrƒÉ SBYT pe Uniswap</span>
</button>
</div>
</section>
<!-- Contact Section - VERSIUNE PROFESIONALƒÇ CU EMAIL DIRECT -->
<section class="page-section" id="contact">
<div style="text-align: center; margin-bottom: 3rem; padding-top: 20px;">
<h1 style="font-size: 2.5rem; margin-bottom: 0.5rem; background: linear-gradient(45deg, var(--blue-tech), var(--neon-cyan)); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">
                Centru de Contact Tehnic
            </h1>
<p style="opacity: 0.8;">Contact direct pentru colaborƒÉri tehnice, parteneriate »ôi suport</p>
</div>
<div class="contact-grid">
<!-- Formular Contact -->
<div class="data-visualization neon-glow">
<div style="display: flex; align-items: center; gap: 10px; margin-bottom: 1.5rem;">
<div style="width: 40px; height: 40px; background: linear-gradient(45deg, var(--blue-tech), var(--purple-innov)); border-radius: 10px; display: flex; align-items: center; justify-content: center;">
<span style="font-size: 1.2rem;">üì®</span>
</div>
<h3 style="margin: 0;">Formular Contact Rapid</h3>
</div>
<div class="form-group">
<label>Nume complet <span class="required">*</span></label>
<input id="contactName" placeholder="Introduce»õi numele complet..." required="" type="text"/>
</div>
<div class="form-group">
<label>AdresƒÉ email profesionalƒÉ <span class="required">*</span></label>
<input id="contactEmail" placeholder="ex: contact@companie.ro" required="" type="email"/>
</div>
<div class="form-group">
<label>Tip solicitare <span class="required">*</span></label>
<select id="contactType">
<option value="technical">Suport Tehnic</option>
<option value="partnership">Parteneriat de afaceri</option>
<option value="investment">OportunitƒÉ»õi de investi»õie</option>
<option value="listing">Listing pe exchange</option>
<option value="media">Interviu media</option>
<option value="security">Securitate &amp; Compliance</option>
<option value="other">Altceva</option>
</select>
</div>
<div class="form-group">
<label>Mesaj detaliat <span class="required">*</span></label>
<textarea id="contactMessage" placeholder="Descrie»õi solicitarea √Æn detaliu..." required="" rows="6"></textarea>
</div>
<div class="form-group" style="display: flex; align-items: center; gap: 10px; margin-bottom: 1rem;">
<input id="contactPrivacy" style="transform: scale(1.2);" type="checkbox"/>
<label for="contactPrivacy" style="font-size: 0.9rem; opacity: 0.8;">
                        Sunt de acord cu prelucrarea datelor conform 
                        <a href="https://stancubyt.com/privacy" style="color: var(--neon-cyan); text-decoration: none;" target="_blank">Politicii de confiden»õialitate</a>
</label>
</div>
<button class="btn-refresh-modern" id="submitContactBtn" onclick="sendContactMessage()" style="width: 100%; margin-top: 1rem;">
<span class="refresh-icon">üöÄ</span>
<span class="refresh-text">Trimite solicitarea</span>
</button>
<div id="contactStatus" style="margin-top: 1rem; text-align: center; font-size: 0.9rem;"></div>
</div>
<!-- Informa»õii Contact -->
<div class="data-visualization neon-glow">
<div style="display: flex; align-items: center; gap: 10px; margin-bottom: 1.5rem;">
<div style="width: 40px; height: 40px; background: linear-gradient(45deg, var(--green-growth), var(--neon-cyan)); border-radius: 10px; display: flex; align-items: center; justify-content: center;">
<span style="font-size: 1.2rem;">üìç</span>
</div>
<h3 style="margin: 0;">Canale de comunicare</h3>
</div>
<div style="margin-bottom: 2rem;">
<h4 style="color: var(--green-growth); margin-bottom: 1rem; display: flex; align-items: center; gap: 10px;">
<span style="font-size: 1.5rem;">üë®‚Äçüíº</span> Contact Principal
                    </h4>
<div class="contact-card business">
<p style="margin: 0.5rem 0;"><strong>Stancu Marian</strong></p>
<p style="margin: 0.5rem 0; opacity: 0.9;">Fondator &amp; CEO</p>
<p style="margin: 0.5rem 0;">
<a href="mailto:contact@stancubyt.com" style="color: var(--neon-cyan); text-decoration: none;">
                                üìß contact@stancubyt.com
                            </a>
</p>
<p style="margin: 0.5rem 0; font-size: 0.9rem; opacity: 0.8;">
                            Pentru √ÆntrebƒÉri generale »ôi suport
                        </p>
</div>
</div>
<div style="margin-bottom: 2rem;">
<h4 style="color: var(--blue-tech); margin-bottom: 1rem; display: flex; align-items: center; gap: 10px;">
<span style="font-size: 1.5rem;">ü§ù</span> Pentru parteneriate
                    </h4>
<div class="contact-card partnership">
<p style="margin: 0.5rem 0;">
<a href="mailto:partnerships@stancubyt.com" style="color: var(--neon-cyan); text-decoration: none;">
                                üìß partnerships@stancubyt.com
                            </a>
</p>
<p style="margin: 0.5rem 0; font-size: 0.9rem; opacity: 0.8;">
                            ColaborƒÉri, listing-uri, parteneriate
                        </p>
</div>
</div>
<div style="margin-bottom: 2rem;">
<h4 style="color: var(--purple-innov); margin-bottom: 1rem; display: flex; align-items: center; gap: 10px;">
<span style="font-size: 1.5rem;">üõ°Ô∏è</span> Securitate &amp; Compliance
                    </h4>
<div class="contact-card security">
<p style="margin: 0.5rem 0;">
<a href="mailto:security@stancubyt.com" style="color: var(--neon-cyan); text-decoration: none;">
                                üîí security@stancubyt.com
                            </a>
</p>
<p style="margin: 0.5rem 0; font-size: 0.9rem; opacity: 0.8;">
                            RaportƒÉri de securitate »ôi audite
                        </p>
</div>
</div>
</div>
</div>
<!-- Social Links Grid -->
<div class="data-visualization neon-glow" style="padding: 2rem; margin-bottom: 2rem;">
<h3 style="margin-bottom: 1.5rem; text-align: center; color: var(--neon-cyan);">üåê Re»õele Sociale Oficiale</h3>
<div class="social-grid">
<a class="social-card" href="https://twitter.com/StancuBYT" target="_blank">
<div class="social-icon" style="background: rgba(29, 161, 242, 0.2);">
                        üê¶
                    </div>
<div>
<strong style="display: block;">Twitter</strong>
<small style="opacity: 0.7;">@StancuBYT</small>
</div>
</a>
<a class="social-card" href="https://t.me/StancuBYT_Official" target="_blank">
<div class="social-icon" style="background: rgba(0, 136, 204, 0.2);">
                        üì¢
                    </div>
<div>
<strong style="display: block;">Telegram</strong>
<small style="opacity: 0.7;">Official Channel</small>
</div>
</a>
<a class="social-card" href="https://github.com/StancuBYT" target="_blank">
<div class="social-icon" style="background: rgba(24, 23, 23, 0.2);">
                        üíª
                    </div>
<div>
<strong style="display: block;">GitHub</strong>
<small style="opacity: 0.7;">Cod sursƒÉ</small>
</div>
</a>
<a class="social-card" href="https://www.linkedin.com/in/sbyt-stancu-212728392/" target="_blank">
<div class="social-icon" style="background: rgba(10, 102, 194, 0.2);">
                        üëî
                    </div>
<div>
<strong style="display: block;">LinkedIn</strong>
<small style="opacity: 0.7;">Business Network</small>
</div>
</a>
<a class="social-card" href="https://stancubyt.com" target="_blank">
<div class="social-icon" style="background: rgba(0, 255, 136, 0.2);">
                        üåê
                    </div>
<div>
<strong style="display: block;">Website</strong>
<small style="opacity: 0.7;">stancubyt.com</small>
</div>
</a>
<a class="social-card" href="https://discord.gg/" target="_blank">
<div class="social-icon" style="background: rgba(88, 101, 242, 0.2);">
                        üí¨
                    </div>
<div>
<strong style="display: block;">Discord</strong>
<small style="opacity: 0.7;">stancubyt</small>
</div>
</a>
</div>
</div>
<!-- Program de lucru »ôi RƒÉspunsuri -->
<div class="data-visualization neon-glow" style="padding: 2rem;">
<h3 style="margin-bottom: 1.5rem; text-align: center; color: var(--neon-cyan);">‚è∞ Timpi de rƒÉspuns</h3>
<div class="time-grid">
<div class="time-item">
<div class="icon">üìß</div>
<h4 style="color: var(--green-growth); margin-bottom: 0.5rem;">Email Business</h4>
<p style="font-size: 0.9rem; opacity: 0.8;">RƒÉspuns √Æn 24h lucrƒÉtoare</p>
</div>
<div class="time-item">
<div class="icon">üí¨</div>
<h4 style="color: var(--blue-tech); margin-bottom: 0.5rem;">Telegram</h4>
<p style="font-size: 0.9rem; opacity: 0.8;">RƒÉspuns √Æn 2-4 ore</p>
</div>
<div class="time-item">
<div class="icon">üê¶</div>
<h4 style="color: var(--purple-innov); margin-bottom: 0.5rem;">Twitter</h4>
<p style="font-size: 0.9rem; opacity: 0.8;">RƒÉspuns √Æn 6-12 ore</p>
</div>
<div class="time-item">
<div class="icon">üõ°Ô∏è</div>
<h4 style="color: var(--neon-cyan); margin-bottom: 0.5rem;">Security</h4>
<p style="font-size: 0.9rem; opacity: 0.8;">RƒÉspuns √Æn 12h max</p>
</div>
</div>
<div style="margin-top: 2rem; padding: 1rem; background: rgba(255,255,255,0.03); border-radius: 10px; text-align: center;">
<p style="font-size: 0.9rem; opacity: 0.8; margin: 0;">
                    ‚ö†Ô∏è <strong>Important:</strong> Nu trimitem mesaje directe pentru investi»õii sau OTC. 
                    Toate comunicƒÉrile oficiale se fac prin canalele men»õionate mai sus.
                </p>
</div>
</div>
</section>
<!-- Giveaway & Promo»õii Section -->
<section class="page-section" id="giveaway">
<div style="text-align: center; margin-bottom: 3rem; padding-top: 20px;">
<h1 style="font-size: 2.5rem; margin-bottom: 0.5rem; background: linear-gradient(45deg, var(--green-growth), var(--neon-cyan)); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">
                Giveaway &amp; Promo»õii
            </h1>
<p style="opacity: 0.8;">Promo»õii active, √Ænscrieri »ôi clasamente</p>
<div style="margin-top: 1rem; display:flex; gap:1rem; justify-content:center; flex-wrap:wrap;">
<button class="news-btn" onclick="requestPassword('promoAdd')">‚ûï AdaugƒÉ promo»õie</button>
<button class="news-btn trophy-btn" onclick="requestPassword('giveawayAdd')" title="Adauga giveaway"><span class="trophy-wrap">üèÜ</span><img alt="SBYT" class="trophy-logo" src="https://i.ibb.co/Zzb6ZTG0/logo.png"/></button>
</div>
</div>
<div class="data-visualization neon-glow">
<h3>üìå Promo»õii / Giveaway-uri</h3>
<div id="promoList" style="display:grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap:1.5rem; margin-top:1rem;"></div>
<div id="promoForm" style="display:none; margin-top: 1.5rem; border-top: 1px solid rgba(255,255,255,0.1); padding-top: 1.5rem;">
<h3 style="margin-bottom: 1rem; color: var(--neon-cyan);">Adauga promotie / giveaway</h3>
<div class="form-row">
<input id="promoTitle" maxlength="120" placeholder="Titlu (ex: Giveaway SBYT)" type="text"/>
<input id="promoEnds" placeholder="Data si ora expirarii" type="datetime-local"/>
</div>
<div class="form-row">
<input id="promoPrize" maxlength="160" placeholder="Premiu (ex: 5000 SBYT + bonusuri)" type="text"/>
<input id="promoPoints" min="1" placeholder="Puncte / promovare" step="1" type="number" value="10"/>
</div>
<div class="form-row">
<textarea id="promoDesc" placeholder="Descriere (reguli, pasi, detalii, conditii)" rows="4" style="width:100%;"></textarea>
</div>
<div class="form-row">
<input accept="image/*,video/*" id="promoMedia" type="file"/>
</div>
<div style="display:flex; gap:1rem; flex-wrap:wrap; margin-top:1rem;">
<button class="news-btn" onclick="savePromo()">üíæ Salveaza</button>
<button class="news-btn" onclick="cancelPromo()">‚ùå Anuleaza</button>
</div>
<small style="display:block; margin-top:0.8rem; opacity:0.75;">
        Media (foto/video) se incarca in Firebase Storage (doar admin). Participantii se inscriu public, cu ID automat.
    </small>
</div>
</div>
<div class="data-visualization neon-glow">
<h3>üèÜ Clasament participan»õi</h3>
<div id="leaderboard" style="margin-top:1rem;"></div>
</div>
</section>
<!-- Scripts -->
<script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
<script>
        // =============================================
        // CONFIGURARE
        // =============================================
        const CONTRACT_ADDRESS = '0x44Cf220399be798baeaE45fd7C4fF44623713833';
        const ETHERSCAN_PROXY = 'https://europe-west1-stancubyt-fc2b9.cloudfunctions.net/etherscanProxy';
const ETHERSCAN_API_KEY = ''; // not used client-side (Cloud Function holds the key)

async function etherscanProxyRequest(module, action, params = {}) {
  const u = new URL(ETHERSCAN_PROXY);
  u.searchParams.set('module', module);
  u.searchParams.set('action', action);
  for (const [k,v] of Object.entries(params)) {
    if (v === undefined || v === null || v === '') continue;
    u.searchParams.set(k, String(v));
  }
  const r = await fetch(u.toString());
  const j = await r.json().catch(() => null);
  if (!j) throw new Error('Etherscan proxy: invalid JSON');
  // Etherscan returns {status:"1", message:"OK", result:"..."} or status:"0"
  if (j.status && j.status !== '1') {
    throw new Error((j.result && typeof j.result === 'string' ? j.result : j.message) || 'Etherscan proxy failed');
  }
  return j;
}
        const ADMIN_PASSWORD = 'ParolaCripto24091980.';

        // Chei storage
        const LS_NEWS = 'stancubyt_news';
        const LS_VISITS = 'stancubyt_visits';
        const LS_PROMOS = 'stancubyt_promos';

        // =============================================
        // UTILITARE
        // =============================================
        function $(id) { return document.getElementById(id); }

        
  // --- Emoji select -> input sync (News) ---
  (function setupNewsEmojiSync() {
    try {
      const sel = $("newsEmojiSelect");
      const input = $("newsEmojiInput");
      if (sel && input) {
        sel.addEventListener("change", () => {
          input.value = sel.value || "";
          // keep cursor at end
          input.focus();
          input.setSelectionRange(input.value.length, input.value.length);
        });
      }
    } catch (e) { /* ignore */ }
  })();
function escapeHtml(str) {
            return String(str).replace(/[&<>"'`=\/]/g, s => ({
                '&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;','`':'&#96;','=':'&#61;','/':'&#47;'
            }[s]));
        }

        function verifyPassword() {
  try {
    // Firebase admin gate (nu mai cerem parola prin prompt)
    if (typeof firebase === 'undefined' || !firebase.auth) {
      alert('Firebase Auth nu este incarcat. Verifica includerea firebase-auth-compat.js.');
      return false;
    }
    if (!window.__SBYT_ADMIN || window.__SBYT_ADMIN !== true) {
      alert('Actiune restrictionata. Autentifica-te ca administrator (jos, pe pagina Prezentare).');
      try {
        showSection('prezentare');
        setTimeout(() => document.getElementById('admin-login')?.scrollIntoView({behavior:'smooth', block:'start'}), 150);
      } catch(e){}
      return false;
    }
    return true;
  } catch (e) {
    alert('Eroare verificare admin: ' + (e?.message || e));
    return false;
  }
}

// Router simplu (evitƒÉ bug-uri)
        function showSection(sectionId) {
            try {
                const sections = document.querySelectorAll('.page-section');
                sections.forEach(s => s.classList.remove('active-section'));

                const target = document.getElementById(sectionId);
                if (target) {
                    target.classList.add('active-section');
                    // update hash fƒÉrƒÉ sƒÉ sarƒÉ pagina
                    if (location.hash !== '#' + sectionId) history.replaceState(null, '', '#' + sectionId);
                    window.scrollTo({ top: 0, behavior: 'smooth' });
                } else {
                    // fallback la prezentare
                    const prez = document.getElementById('prezentare');
                    if (prez) prez.classList.add('active-section');
                    if (location.hash !== '#prezentare') history.replaceState(null, '', '#prezentare');
                }
            } catch (e) {
                console.error('showSection error:', e);
            }
        }

        // La √ÆncƒÉrcare ‚Äì dacƒÉ existƒÉ hash, mergi acolo
        function initRouting() {
            const id = (location.hash || '').replace('#', '').trim();
            if (id && document.getElementById(id)) showSection(id);
            else showSection('prezentare');
        }

        // =============================================
        // CONTOR VIZITE (local ‚Äì varianta B)
        // =============================================
        function updateVisitCounter() {
            try {
                let visits = parseInt(localStorage.getItem(LS_VISITS) || '0', 10);
                visits += 1;
                localStorage.setItem(LS_VISITS, String(visits));

                // suport pentru diferite id-uri existente √Æn layout
                const el = $('visitCount') || $('visitsCount') || $('visitCounter') || $('visits');
                if (el) el.textContent = visits.toLocaleString('ro-RO');
            } catch (e) {
                console.error('visit counter:', e);
            }
        }

        // =============================================
        // NOUƒÇ»öI & ANUN»öURI (local ‚Äì varianta B)
        // =============================================
        function seedNewsIfMissing() {
            const existing = localStorage.getItem(LS_NEWS);
            if (existing) return;

            const initial = [
                {
                    id: 1,
                    title: 'Lansare OficialƒÉ StancuBYT!',
                    content: 'Tokenul StancuBYT a fost lansat oficial pe Ethereum. Contract verificat pe Etherscan.',
                    type: 'announcement',
                    date: new Date().toISOString(),
                    pinned: true
                },
                {
                    id: 2,
                    title: 'Listare pe Uniswap V3',
                    content: 'SBYT este acum listat pe Uniswap V3. Po»õi cumpƒÉra tokenul direct din site.',
                    type: 'update',
                    date: new Date(Date.now() - 86400000).toISOString(),
                    pinned: false
                }
            ];
            localStorage.setItem(LS_NEWS, JSON.stringify(initial));
        }

        function loadNews() {
            try {
                seedNewsIfMissing();
                const news = JSON.parse(localStorage.getItem(LS_NEWS) || '[]');

                // Sortare: pinned, apoi recent
                news.sort((a, b) => {
                    if (!!a.pinned !== !!b.pinned) return a.pinned ? -1 : 1;
                    return new Date(b.date) - new Date(a.date);
                });

                const container = $('newsContainer');
                if (!container) return;
                container.innerHTML = '';

                news.forEach(item => {
                    const badgeClass = item.type === 'announcement' ? 'badge-announcement' :
                                     item.type === 'event' ? 'badge-event' : 'badge-update';
                    const badgeText = item.type === 'announcement' ? 'Anun»õ Important' :
                                    item.type === 'event' ? 'Eveniment' : 'Update';
                    const cardClass = item.pinned ? 'news-card pinned' : 'news-card';

                    const card = document.createElement('div');
                    card.className = cardClass;

                    card.innerHTML = `
                        <div class="news-badge ${badgeClass}">${badgeText}</div>
                        <h4 style="margin-bottom: 0.5rem; color: white;">${escapeHtml(item.title)}</h4>
                        <p style="opacity: 0.9; line-height: 1.5;">${escapeHtml(item.content)}</p>
                        <div class="news-date">
                            <span>üìÖ</span>
                            ${new Date(item.date).toLocaleDateString('ro-RO', { year:'numeric', month:'long', day:'numeric', hour:'2-digit', minute:'2-digit' })}
                        </div>
                        <div style="display:flex; gap:10px; margin-top: 1rem; flex-wrap:wrap;">
                            <button class="news-btn" onclick="deleteNews(${Number(item.id)})">üóëÔ∏è »òterge</button>
                        </div>
                    `;
                    container.appendChild(card);
                });
            } catch (e) {
                console.error('loadNews:', e);
            }
        }

        function addNews() {
            if (!verifyPassword()) return;
            const f = $('newsForm');
            if (f) f.style.display = 'block';
        }

        function cancelAddNews() {
            const f = $('newsForm');
            if (f) f.style.display = 'none';
            if ($('newsTitle')) $('newsTitle').value = '';
            if ($('newsContent')) $('newsContent').value = '';
            if ($('pinNews')) $('pinNews').checked = false;
            if ($('newsType')) $('newsType').value = 'update';
        }

        function saveNews() {
            if (!verifyPassword()) return;

            const title = ($('newsTitle')?.value || '').trim();
            const content = ($('newsContent')?.value || '').trim();
            const type = $('newsType')?.value || 'update';
            const pinned = !!$('pinNews')?.checked;

            if (!title || !content) {
                alert('CompleteazƒÉ titlul »ôi con»õinutul!');
                return;
            }

            try {
                const existing = JSON.parse(localStorage.getItem(LS_NEWS) || '[]');
                const newId = existing.length ? Math.max(...existing.map(n => Number(n.id) || 0)) + 1 : 1;

                existing.push({
                    id: newId,
                    title,
                    content,
                    type,
                    date: new Date().toISOString(),
                    pinned
                });

                localStorage.setItem(LS_NEWS, JSON.stringify(existing));
                cancelAddNews();
                loadNews();
                alert('Anun»õul a fost adƒÉugat!');
            } catch (e) {
                console.error('saveNews:', e);
                alert('Eroare la salvare.');
            }
        }

        function deleteNews(id) {
            if (!verifyPassword()) return;
            if (!confirm('Sigur vrei sƒÉ »ôtergi acest anun»õ?')) return;

            try {
                const existing = JSON.parse(localStorage.getItem(LS_NEWS) || '[]');
                const filtered = existing.filter(n => Number(n.id) !== Number(id));
                localStorage.setItem(LS_NEWS, JSON.stringify(filtered));
                loadNews();
            } catch (e) {
                console.error('deleteNews:', e);
            }
        }

        function clearNews() {
            if (!verifyPassword()) return;
            if (!confirm('Sigur vrei sƒÉ »ôtergi TOATE anun»õurile?')) return;
            localStorage.removeItem(LS_NEWS);
            loadNews();
        }

        // Pentru butoanele existente √Æn HTML (care apeleazƒÉ requestPassword)
        function requestPassword(action, id) {
            // pƒÉstrƒÉm compatibilitatea cu HTML-ul existent
            if (action === 'add') return addNews();
            if (action === 'clear') return clearNews();

            // Giveaway / promo
            if (action === 'promoAdd') return showPromoForm();
            if (action === 'promoClear') return clearPromos();

            // fallback
            if (action === 'deleteNews') return deleteNews(id);
        }

        // =============================================
        // GIVEAWAY & PROMO»öII (local ‚Äì varianta B)
        // =============================================
        function getPromos() {
            try { return JSON.parse(localStorage.getItem(LS_PROMOS) || '[]'); }
            catch { return []; }
        }
        function setPromos(arr) {
            localStorage.setItem(LS_PROMOS, JSON.stringify(arr));
        }

        function showPromoForm() {
            if (!verifyPassword()) return;
            const f = $('promoForm');
            if (f) f.style.display = 'block';
        }

        function cancelPromo() {
            const f = $('promoForm');
            if (f) f.style.display = 'none';
            if ($('promoTitle')) $('promoTitle').value = '';
            if ($('promoEndDate')) $('promoEndDate').value = '';
            if ($('promoDesc')) $('promoDesc').value = '';
        }

        function savePromo() {
            if (!verifyPassword()) return;

            const title = ($('promoTitle')?.value || '').trim();
            const endDate = ($('promoEndDate')?.value || '').trim();
            const desc = ($('promoDesc')?.value || '').trim();

            if (!title || !endDate || !desc) {
                alert('CompleteazƒÉ titlul, data de final »ôi descrierea.');
                return;
            }

            const promos = getPromos();
            const newId = promos.length ? Math.max(...promos.map(p => Number(p.id) || 0)) + 1 : 1;

            promos.push({
                id: newId,
                title,
                endDate,
                desc,
                createdAt: new Date().toISOString(),
                participants: [] // {name,wallet,points,joinedAt}
            });

            setPromos(promos);
            cancelPromo();
            renderPromos();
            renderLeaderboard();
            alert('Promo»õia/Giveaway-ul a fost adƒÉugat.');
        }

        function clearPromos() {
            if (!verifyPassword()) return;
            if (!confirm('»òtergi toate promo»õiile/giveaway-urile?')) return;
            localStorage.removeItem(LS_PROMOS);
            renderPromos();
            renderLeaderboard();
        }

        function deletePromo(promoId) {
            if (!verifyPassword()) return;
            if (!confirm('»òtergi aceastƒÉ promo»õie/giveaway?')) return;
            const promos = getPromos().filter(p => Number(p.id) !== Number(promoId));
            setPromos(promos);
            renderPromos();
            renderLeaderboard();
        }

        function joinPromo(promoId) {
            const name = ($('joinName_' + promoId)?.value || '').trim();
            const wallet = ($('joinWallet_' + promoId)?.value || '').trim();
            const pointsStr = ($('joinPoints_' + promoId)?.value || '').trim();
            const points = Math.max(0, parseInt(pointsStr || '0', 10) || 0);

            if (!name || !wallet) {
                alert('CompleteazƒÉ numele »ôi wallet-ul.');
                return;
            }

            const promos = getPromos();
            const p = promos.find(x => Number(x.id) === Number(promoId));
            if (!p) return;

            // expirare
            const now = new Date();
            const end = new Date(p.endDate + 'T23:59:59');
            if (now > end) {
                alert('Acest giveaway/promo»õie a expirat.');
                return;
            }

            p.participants = p.participants || [];
            const existing = p.participants.find(u => (u.wallet || '').toLowerCase() === wallet.toLowerCase());
            if (existing) {
                existing.name = name;
                existing.points = Math.max(existing.points || 0, points);
            } else {
                p.participants.push({ name, wallet, points, joinedAt: new Date().toISOString() });
            }

            setPromos(promos);
            renderPromos();
            renderLeaderboard();
            alert('√énscriere salvatƒÉ (local pe device).');
        }

        function renderPromos() {
            const list = $('promoList');
            if (!list) return;

            const promos = getPromos();
            if (!promos.length) {
                list.innerHTML = `<div style="opacity:0.85;">Nu existƒÉ promo»õii active √ÆncƒÉ.</div>`;
                return;
            }

            // sort: cele care expirƒÉ mai repede primele
            promos.sort((a, b) => new Date(a.endDate) - new Date(b.endDate));

            list.innerHTML = '';
            promos.forEach(p => {
                const end = new Date(p.endDate + 'T23:59:59');
                const expired = new Date() > end;

                const card = document.createElement('div');
                card.className = 'news-card';
                card.innerHTML = `
                    <div class="news-badge ${expired ? 'badge-announcement' : 'badge-event'}">${expired ? 'Expirat' : 'Activ'}</div>
                    <h4 style="margin-bottom:0.5rem; color:white;">${escapeHtml(p.title)}</h4>
                    <p style="opacity:0.9; line-height:1.5;">${escapeHtml(p.desc)}</p>
                    <div class="news-date" style="margin-top:0.8rem;">
                        <span>‚è≥</span> ExpirƒÉ: ${new Date(p.endDate).toLocaleDateString('ro-RO')}
                    </div>

                    <div style="margin-top:1rem; padding-top:1rem; border-top:1px solid rgba(255,255,255,0.1);">
                        <h4 style="margin:0 0 0.6rem 0; color: var(--neon-cyan);">√énscriere</h4>
                        <div class="form-row">
                            <input id="joinName_${p.id}" type="text" placeholder="Nume" maxlength="60">
                            <input id="joinWallet_${p.id}" type="text" placeholder="Wallet (0x...)" maxlength="60">
                        </div>
                        <div class="form-row">
                            <input id="joinPoints_${p.id}" type="number" min="0" step="1" placeholder="PromovƒÉri (puncte)" />
                        </div>
                        <div style="display:flex; gap:10px; flex-wrap:wrap;">
                            <button class="news-btn" onclick="joinPromo(${p.id})">‚úÖ √énscrie-te</button>
                            <button class="news-btn" onclick="deletePromo(${p.id})">üóëÔ∏è »òterge</button>
                        </div>
                        <small style="display:block; margin-top:0.6rem; opacity:0.75;">
                            √én varianta B, √Ænscrierile/clasamentul sunt salvate doar pe device-ul tƒÉu.
                        </small>
                    </div>
                `;
                list.appendChild(card);
            });
        }

        function renderLeaderboard() {
            const lb = $('leaderboard');
            if (!lb) return;

            const promos = getPromos();
            const now = new Date();

            // agregare participan»õi din promo»õiile active (neexpirate)
            const map = new Map(); // wallet -> {name,wallet,points}
            promos.forEach(p => {
                const end = new Date(p.endDate + 'T23:59:59');
                if (now > end) return;
                (p.participants || []).forEach(u => {
                    const key = (u.wallet || '').toLowerCase();
                    if (!key) return;
                    const current = map.get(key);
                    const pts = Number(u.points) || 0;
                    if (!current || pts > current.points) {
                        map.set(key, { name: u.name || 'Anonim', wallet: u.wallet, points: pts });
                    }
                });
            });

            const arr = Array.from(map.values()).sort((a, b) => b.points - a.points);
            if (!arr.length) {
                lb.innerHTML = `<div style="opacity:0.85;">Nu existƒÉ participan»õi √ÆncƒÉ.</div>`;
                return;
            }

            // tabel simplu
            let html = `<div class="table-container"><table class="whitepaper-table">
                <tr><th>#</th><th>Nume</th><th>Wallet</th><th>Puncte</th></tr>`;
            arr.slice(0, 100).forEach((u, i) => {
                html += `<tr>
                    <td>${i + 1}</td>
                    <td>${escapeHtml(u.name)}</td>
                    <td style="font-family: monospace; font-size: 0.9rem;">${escapeHtml(u.wallet)}</td>
                    <td><span class="badge badge-success">${Number(u.points).toLocaleString('ro-RO')}</span></td>
                </tr>`;
            });
            html += `</table></div>`;
            lb.innerHTML = html;
        }

        // =============================================
        // ETHERSCAN ‚Äì DATE REALE (fƒÉrƒÉ endpoint-uri inexistente)
        // =============================================
        function setText(id, value) {
            const el = document.getElementById(id);
            if (el) el.textContent = value;
        }

        function setStatusHtml(htmlStr) {
            const el = $('serverStatus');
            if (el) el.innerHTML = htmlStr;
        }

        async function fetchTokenSupplyAPI() {
    const j = await etherscanProxyRequest('stats','tokensupply',{ contractaddress: CONTRACT_ADDRESS });
    const weiStr = j.result;
    const wei = Number(weiStr);
    const tokens = wei / Math.pow(10, 18);
    return { wei, tokens };
}



        // Tranzac»õii (Total TX) - varianta B: numƒÉrƒÉm tranzac»õiile gƒÉsite de Etherscan API.
        // NotƒÉ: Etherscan limiteazƒÉ offset la 10k; pentru un contract nou e suficient.
        async function fetchTransactionsCountAPI() {
            const base = `https://api.etherscan.io/api?apikey=${ETHERSCAN_API_KEY}`;
            let best = null;

            // 1) Tranzac»õii normale cƒÉtre adresa contractului (deploy + interac»õiuni)
            try {
                const url = `${base}&module=account&action=txlist&address=${CONTRACT_ADDRESS}&startblock=0&endblock=99999999&page=1&offset=10000&sort=asc`;
                const r = await fetch(url);
                const j = await r.json();
                if (j.status === '1' && Array.isArray(j.result)) {
                    best = Math.max(best || 0, j.result.length);
                }
            } catch (e) {
                console.warn('txlist failed', e);
            }

            // 2) Token transfers (tokentx) - poate reprezenta mai bine "Transfers"
            try {
                const url = `${base}&module=account&action=tokentx&contractaddress=${CONTRACT_ADDRESS}&page=1&offset=10000&sort=asc`;
                const r = await fetch(url);
                const j = await r.json();
                if (j.status === '1' && Array.isArray(j.result)) {
                    best = Math.max(best || 0, j.result.length);
                }
            } catch (e) {
                console.warn('tokentx failed', e);
            }

            return best;
        }


        
        // Fallback public API (fƒÉrƒÉ chei): Ethplorer
        async function fetchEthplorerTokenInfo() {
  // Disabled due to CORS/429 on GitHub Pages. Use Etherscan proxy instead.
  return null;
}

// CORS-safe: r.jina.ai proxy (text)
        async function fetchEtherscanTokenPageText() {
            const url = `https://r.jina.ai/https://etherscan.io/token/${CONTRACT_ADDRESS}`;
            const r = await fetch(url);
            if (!r.ok) throw new Error('jina fetch failed');
            return await r.text();
        }

        
        async function parseFromEtherscanText(t) {
            // √ÆncearcƒÉ mai multe regex-uri; Etherscan √Æ»ôi schimbƒÉ des markup-ul
            const clean = (t || '').replace(/\u00a0/g, ' ');

            const pickNum = (arr) => {
                if (!arr) return null;
                const raw = String(arr).replace(/[^0-9.,]/g, '');
                if (!raw) return null;
                const n = parseFloat(raw.replace(/,/g, ''));
                return Number.isFinite(n) ? n : null;
            };

            // Holders (ex: "Holders:" sau "Holders (xxx)")
            let holders = null;
            const holdersMatch =
                clean.match(/Holders\s*[:\)]\s*<[^>]*>\s*([0-9.,]+)/i) ||
                clean.match(/Holders\s*[:\)]\s*([0-9.,]+)/i) ||
                clean.match(/Holders\s*\((\s*[0-9.,]+\s*)\)/i);
            holders = pickNum(holdersMatch && holdersMatch[1]);

            // Token Transfers / Transfers count (de obicei apare ca "Token Transfers (123,456)")
            let transfers = null;
            const transfersMatch =
                clean.match(/Token\s*Transfers\s*\(\s*([0-9.,]+)\s*\)/i) ||
                clean.match(/Transfers\s*\(\s*([0-9.,]+)\s*\)/i) ||
                clean.match(/Token\s*Transfers\s*[:\)]\s*([0-9.,]+)/i);
            transfers = pickNum(transfersMatch && transfersMatch[1]);

            // Total Supply (text)
            let supplyTokens = null;
            const supplyMatch =
                clean.match(/Total\s*Supply\s*[:\)]\s*<[^>]*>\s*([0-9.,]+)\s*([A-Z]{2,10})/i) ||
                clean.match(/Total\s*Supply\s*[:\)]\s*([0-9.,]+)\s*([A-Z]{2,10})/i);
            supplyTokens = pickNum(supplyMatch && supplyMatch[1]);

            return { holders, transfers, supplyTokens };
        }

        async function fetchContractCreation() {
    // Etherscan: module=contract&action=getcontractcreation&contractaddresses=...
    const j = await etherscanProxyRequest('contract','getcontractcreation',{ contractaddresses: CONTRACT_ADDRESS });
    if (!j.result || !Array.isArray(j.result) || !j.result.length) throw new Error('getcontractcreation failed');
    return j.result[0];
}


        async function fetchTxTimestamp(txHash) {
    // Disabled: requires Etherscan 'proxy' module which we do not expose in Cloud Function for safety.
    throw new Error('tx timestamp not available');
}

        async function fetchAllData() {
            const refreshBtn = $('refreshButton');
            const original = refreshBtn ? refreshBtn.innerHTML : null;

            try {
                if (refreshBtn) {
                    refreshBtn.classList.add('loading');
                    refreshBtn.innerHTML = '<span class="refresh-icon">‚è≥</span><span class="refresh-text">Se actualizeazƒÉ...</span>';
                }

                // Supply (API)
                let supplyTokens = null;
                try {
                    const supply = await fetchTokenSupplyAPI();
                    supplyTokens = supply.tokens;
                    const formatted = supplyTokens.toLocaleString('ro-RO', { maximumFractionDigits: 0 });
                    setText('totalSupply', formatted);
                    setText('supplyValue', formatted);
                } catch (e) {
                    console.warn('Supply API failed:', e);
                }

                // Holders/Transfers + (op»õional supply fallback) din paginƒÉ Etherscan
                try {
                    const txt = await fetchEtherscanTokenPageText();
                    const parsed = await parseFromEtherscanText(txt);

                    if (parsed.holders != null) { setText('holdersCount', parsed.holders.toLocaleString('ro-RO')); } else { try { const info = await fetchEthplorerTokenInfo(); const hc = info && info.holdersCount; if (hc != null) setText('holdersCount', Number(hc).toLocaleString('ro-RO')); } catch(e){} }
                    if (parsed.transfers != null) setText('transactionsCount', parsed.transfers.toLocaleString('ro-RO'));

                    if (supplyTokens == null && parsed.supplyTokens != null) {
                        const formatted = parsed.supplyTokens.toLocaleString('ro-RO', { maximumFractionDigits: 0 });
                        setText('totalSupply', formatted);
                        setText('supplyValue', formatted);
                    }
                } catch (e) {
                    console.warn('Etherscan scrape failed:', e);
                }


                // Tranzac»õii (API) - dacƒÉ scrape nu a dat nimic
                try {
                    const txc = await fetchTransactionsCountAPI();
                    if (txc != null) setText('transactionsCount', txc.toLocaleString('ro-RO'));
                } catch (e) {
                    console.warn('transactionsCount API failed', e);
                // Fallback: Ethplorer transfersCount
                try {
                    const info = await fetchEthplorerTokenInfo();
                    const tc = info && (info.transfersCount ?? info.transfersCount === 0 ? info.transfersCount : null);
                    if (tc != null) setText('transactionsCount', Number(tc).toLocaleString('ro-RO'));
                } catch(e2) {
                    console.warn('Ethplorer transfersCount failed', e2);
                }

                }

                // Contract creator + data aproximativƒÉ (din tx)
                try {
                    const cc = await fetchContractCreation();
                    if (cc.contractCreator) setText('contractCreator', cc.contractCreator);
                    if (cc.txHash) setText('creationTx', cc.txHash);

                    try {
                        const d = await fetchTxTimestamp(cc.txHash);
                        setText('launchDate', d.toLocaleString('ro-RO'));
                    } catch (_) {
                        // dacƒÉ nu putem lua timestamp, nu inventƒÉm
                        setText('launchDate', '-');
                    }
                } catch (e) {
                    console.warn('Contract creation failed:', e);
                    setText('launchDate', '-');
                }

                
                // Pre»õ live + chart (DEX)
                try { await updateLivePriceAndStats(); } catch(e){ console.warn('Dex price failed', e); }
                try { await updateChart(currentPeriod); } catch(e){ console.warn('Chart update failed', e); }

setStatusHtml('');

                if (refreshBtn) {
                    refreshBtn.classList.remove('loading');
                    refreshBtn.classList.add('success');
                    refreshBtn.innerHTML = '<span class="refresh-icon">‚úÖ</span><span class="refresh-text">Actualizat</span>';
                    setTimeout(() => {
                        refreshBtn.classList.remove('success');
                        refreshBtn.innerHTML = original;
                    }, 1800);
                }
            } catch (e) {
                console.error('fetchAllData fatal:', e);
                setStatusHtml('<span class="status-offline">‚ö†Ô∏è Eroare la √ÆncƒÉrcarea datelor (verificƒÉ API / CORS)</span>');
                if (refreshBtn) {
                    refreshBtn.classList.remove('loading');
                    refreshBtn.innerHTML = '<span class="refresh-icon">‚ùå</span><span class="refresh-text">Eroare</span>';
                    setTimeout(() => refreshBtn.innerHTML = original, 2200);
                }
            }
        }

        // =============================================
        // PRE»ö LIVE + GRAFIC (VARIANTA B, fƒÉrƒÉ CORS headache)
        // =============================================
        let priceChart = null;
        let liveSeries = []; // [{t: Date, p: number}]
        let lastPrice = null;
        let currentPeriod = 'live';

        function _maxPointsForPeriod(period) {
            // doar pentru c√¢t pƒÉstrƒÉm √Æn memorie (grafic live)
            if (period === '1h') return 60;
            if (period === '24h') return 144;
            if (period === '7d') return 200;
            if (period === '1m') return 250;
            return 120; // 'live' sau default
        }

        
        function initializeChart() {
            const canvas = document.getElementById('priceChart');
            if (!canvas) return;
            const ctx = canvas.getContext('2d');
            if (!ctx) return;

            // dacƒÉ existƒÉ deja, nu recrea
            if (window.__stancu_priceChart) return;

            const data = {
                labels: [],
                datasets: [{
                    label: 'Pre»õ (USD)',
                    data: [],
                    borderWidth: 2,
                    tension: 0.25,
                    pointRadius: 0
                }]
            };

            window.__stancu_priceChart = new Chart(ctx, {
                type: 'line',
                data,
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    animation: false,
                    plugins: { legend: { display: false } },
                    scales: {
                        x: { ticks: { display: false } },
                        y: {
                            ticks: { callback: (v) => v },
                            beginAtZero: false
                        }
                    }
                }
            });
        }

            // pƒÉstreazƒÉ referin»õa globalƒÉ
            priceChart = window.__stancu_priceChart;


        function _renderLiveChart(period = 'live') {
            if (!priceChart) return;
            const maxPts = _maxPointsForPeriod(period);
            const slice = liveSeries.slice(-maxPts);
            const labels = slice.map(pt => {
                const d = new Date(pt.t);
                return d.toLocaleTimeString('ro-RO', { hour: '2-digit', minute: '2-digit' });
            });
            const data = slice.map(pt => pt.p);

            priceChart.data.labels = labels;
            priceChart.data.datasets[0].data = data;
            priceChart.update('none');
        }

        
        function updatePriceChartLive(priceUsd) {
            try {
                const ch = window.__stancu_priceChart;
                if (!ch) return;
                const ts = new Date();
                const lbl = ts.toLocaleTimeString('ro-RO', { hour: '2-digit', minute: '2-digit', second: '2-digit' });
                ch.data.labels.push(lbl);
                ch.data.datasets[0].data.push(Number(priceUsd));
                // pƒÉstreazƒÉ ultimele 120 puncte (~20 minute la 10s)
                const max = 120;
                if (ch.data.labels.length > max) {
                    ch.data.labels.shift();
                    ch.data.datasets[0].data.shift();
                }
                ch.update();
            } catch (e) {
                console.warn('chart update failed', e);
            }
        }
async function fetchDexScreenerBestPair() {
            const url = `https://api.dexscreener.com/latest/dex/tokens/${CONTRACT_ADDRESS}`;
            const r = await fetch(url);
            if (!r.ok) throw new Error('DexScreener fetch failed');
            const data = await r.json();
            const pairs = data?.pairs || [];
            if (!pairs.length) throw new Error('No pairs for token');
            // alege perechea cu cea mai mare lichiditate USD
            pairs.sort((a, b) => (Number(b?.liquidity?.usd || 0) - Number(a?.liquidity?.usd || 0)));
            return pairs[0];
        }

        
        function startPriceAutoUpdate() {
            // ruleazƒÉ imediat »ôi apoi la fiecare 10s
            updateLivePriceAndChart('live');
            if (window.__stancu_priceInterval) clearInterval(window.__stancu_priceInterval);
            window.__stancu_priceInterval = setInterval(() => updateLivePriceAndChart('live'), 10000);
        }

async function updateLivePriceAndChart(period = 'live') {
            try {
                const pair = await fetchDexScreenerBestPair();
                const priceUsd = Number(pair.priceUsd);
                // actualizeazƒÉ graficul live (fallback sigur)
                updatePriceChartLive(priceUsd);
                if (!Number.isFinite(priceUsd)) throw new Error('priceUsd missing');

                // UI: pre»õ + schimbare
                const priceEl = document.getElementById('currentPrice');
                if (priceEl) priceEl.textContent = '$' + priceUsd.toLocaleString('en-US', { maximumFractionDigits: 10 });

                const changeEl = document.getElementById('priceChange');
                const ch24 = pair?.priceChange?.h24;
                if (changeEl) {
                    if (typeof ch24 === 'number') {
                        const sign = ch24 >= 0 ? '+' : '';
                        changeEl.textContent = `${sign}${ch24.toFixed(2)}% (24h)`;
                    } else {
                        changeEl.textContent = '';
                    }
                }

                const lastEl = document.getElementById('lastUpdated');
                if (lastEl) lastEl.textContent = 'Ultima actualizare: ' + new Date().toLocaleTimeString('ro-RO', { hour: '2-digit', minute: '2-digit', second: '2-digit' });

                // MarketCap (DexScreener fdv) - dacƒÉ existƒÉ element
                const mcEl = document.getElementById('marketCap');
                const fdv = Number(pair.fdv);
                if (mcEl) mcEl.textContent = Number.isFinite(fdv) ? ('$' + fdv.toLocaleString('en-US', { maximumFractionDigits: 0 })) : mcEl.textContent;

                // adaugƒÉ punct √Æn serie
                const now = new Date();
                liveSeries.push({ t: now, p: priceUsd });
                // nu pƒÉstra prea mult
                if (liveSeries.length > 300) liveSeries = liveSeries.slice(-300);

                _renderLiveChart(period);

                lastPrice = priceUsd;
            } catch (e) {
                console.error('Live price update error:', e);
            }
        }

        // Butoane perioadƒÉ (dacƒÉ existƒÉ √Æn UI)
        async function changeChartPeriod(period) {
            currentPeriod = period || 'live';
            // reseteazƒÉ seria pentru o experien»õƒÉ ‚ÄúcuratƒÉ‚Äù
            liveSeries = [];
            _renderLiveChart(period);
            // for»õeazƒÉ update imediat
            await updateLivePriceAndChart(period);
        }


        // Butoane tip grafic (lum√¢nƒÉri/linie). √én varianta B folosim linie (live).
        // DacƒÉ se apasƒÉ "Lum√¢nƒÉri", nu crƒÉpƒÉm site-ul: rƒÉm√¢nem pe linie.
        function changeChartType(type) {
            // compatibilitate cu UI existent
            if (!type) return;
            // √én aceastƒÉ implementare simplƒÉ rƒÉm√¢nem pe line chart (Chart.js standard)
            // pentru a evita probleme de CORS / OHLC. Doar re-render.
            _renderLiveChart(currentPeriod || 'live');
        }


        // compatibilitate: unele versiuni apelau updateChart()
        async function updateChart(period) {
            await updateLivePriceAndChart(period);
        }


        window.addEventListener('load', () => {
            initializeChart();
            startPriceAutoUpdate();

            // IMPORTANT: evitƒÉ conflictul de id duplicat pentru contact din whitepaper
            const wpContact = document.querySelector('#whitepaper #contact');
            if (wpContact) wpContact.id = 'contact-wp';

            initRouting();
            updateVisitCounter();

            loadNews();
            renderPromos();
            renderLeaderboard();

            initializeChart();
            fetchAllData();
            setInterval(fetchAllData, 60000);
            // Pre»õ live + grafic fallback la 10 secunde
            setInterval(() => { updateLivePriceAndStats().catch(()=>{}); }, 10000);
            setInterval(() => { updateChart('live').catch(()=>{}); }, 15000);
        });

        // dacƒÉ utilizatorul schimbƒÉ hash manual
        window.addEventListener('hashchange', initRouting);
        // Expune func»õiile folosite √Æn HTML (onclick) √Æn scope global
        try {
            Object.assign(window, {
                showSection,
                scrollToSection,
                requestPassword,
                saveNews,
                cancelAddNews,
                deleteNewsItem,
                clearAllNews,
                changeChartPeriod,
                changeChartType,
                fetchAllData
            });
        } catch (e) {}

    

/* ============================================================
   FIREBASE INIT + FINAL OVERRIDES (GLOBAL, CROSS-DEVICE)
   ============================================================ */

// Initialize Firebase only if SDK loaded
try {
  if (typeof firebase !== 'undefined' && firebase.apps && !firebase.apps.length) {
    firebase.initializeApp({
      apiKey: "AIzaSyBPGUlNhohbVrfsIRcIfYAD5Fh7GMZlw2Q",
      authDomain: "stancubyt-fc2b9.firebaseapp.com",
      projectId: "stancubyt-fc2b9",
      storageBucket: "stancubyt-fc2b9.firebasestorage.app",
      messagingSenderId: "263244200492",
      appId: "1:263244200492:web:28adf253b726cfdafaaf89",
      measurementId: "G-272S9HSY3K"
    });}
} catch (e) {}


/* ============================================================
   FIREBASE AUTH ADMIN (Email/Password)
   - Autentificare cu user + parola din Firebase Authentication
   - Acces admin: custom claim (claims.admin === true) SAU whitelist email
   ============================================================ */

window.__SBYT_ADMIN = false;

const ADMIN_EMAILS = ["stancubyt@gmail.com"];

function maskEmail(email) {
  if (!email || typeof email !== 'string') return '';
  const [u, d] = email.split('@');
  if (!d) return email;
  const u2 = u.length <= 2 ? (u[0] + '*') : (u.slice(0,2) + '*'.repeat(Math.min(8, u.length-2)));
  return `${u2}@${d}`;
}

function setAdminUI(isAdmin, user) {
  const badge = document.getElementById('adminStatusBadge');
  const label = document.getElementById('adminUserLabel');
  const msg = document.getElementById('adminLoginMsg');
  const logoutBtn = document.getElementById('adminLogoutBtn');

  if (badge) {
    badge.classList.remove('admin-badge-on','admin-badge-off');
    badge.classList.add(isAdmin ? 'admin-badge-on' : 'admin-badge-off');
    badge.textContent = isAdmin ? 'Autentificat (Admin)' : 'Neautentificat';
  }
  if (label) {
    label.textContent = user ? `User: ${maskEmail(user.email || '')}` : '';
  }
  if (logoutBtn) logoutBtn.style.display = user ? 'inline-block' : 'none';

  if (msg) {
    msg.style.color = isAdmin ? '#00ff9c' : '#ff4d4d';
    msg.textContent = user
      ? (isAdmin ? 'Mod administrator activ.' : 'Autentificat, dar fara drepturi admin.')
      : 'Autentifica-te cu email + parola (Firebase).';
  }

  // arata/ascunde elemente admin-only daca exista
  document.querySelectorAll('.admin-only').forEach(el => {
    el.style.display = isAdmin ? 'block' : 'none';
  });
  try { ensureNewsAdminUI(); } catch(e) {}
  try { loadNews(); } catch(e) {}

}

async function computeIsAdmin(user) {
  if (!user) return false;
  try {
    // 1) custom claim admin
    const token = await user.getIdTokenResult(true);
    if (token && token.claims && token.claims.admin === true) return true;
  } catch (e) {}
  // 2) whitelist email
  const email = (user.email || '').toLowerCase();
  return ADMIN_EMAILS.map(x => String(x).toLowerCase()).includes(email);
}

async function adminSignIn() {
  try {
    if (typeof firebase === 'undefined' || !firebase.auth) {
      alert('Firebase Auth nu este incarcat.');
      return;
    }
    const email = (document.getElementById('adminEmail')?.value || '').trim();
    const pass = (document.getElementById('adminPass')?.value || '');

    if (!email || !pass) {
      const msg = document.getElementById('adminLoginMsg');
      if (msg) { msg.style.color = '#ff4d4d'; msg.textContent = 'Completeaza email si parola.'; }
      return;
    }

    await firebase.auth().signInWithEmailAndPassword(email, pass);
    // onAuthStateChanged va actualiza UI
  } catch (e) {
    const msg = document.getElementById('adminLoginMsg');
    if (msg) { msg.style.color = '#ff4d4d'; msg.textContent = 'Eroare autentificare: ' + (e?.message || e); }
  }
}

async function adminSignOut() {
  try {
    if (typeof firebase === 'undefined' || !firebase.auth) return;
    await firebase.auth().signOut();
  } catch (e) {}
}

// Listener global
document.addEventListener('DOMContentLoaded', () => {
  try {
    if (typeof firebase !== 'undefined' && firebase.auth) {
      firebase.auth().onAuthStateChanged(async (user) => {
        const isAdmin = await computeIsAdmin(user);
        window.__SBYT_ADMIN = isAdmin;
        setAdminUI(isAdmin, user);

        // Emoji dropdown -> scrie automat in campul "sau scrie..."
        try {
          const emojiSel = document.getElementById('newsEmojiSelect');
          const emojiInp = document.getElementById('newsEmojiInput');
          if (emojiSel && emojiInp && !emojiSel.__bound) {
            emojiSel.__bound = true;
            emojiSel.addEventListener('change', () => {
              const v = (emojiSel.value || '').trim();
              if (v) {
                emojiInp.value = v;
                emojiInp.dispatchEvent(new Event('input', { bubbles: true }));
              }
            });
          }
        } catch(e) {}

        // daca user e autentificat dar nu e admin -> optional delogare automata
        // if (user && !isAdmin) await firebase.auth().signOut();
      });
    }
  } catch (e) {}
});

// Emoji quick picker -> fills the emoji input
document.addEventListener("DOMContentLoaded", () => {
  const sel = document.getElementById("newsEmojiSelect");
  const inp = document.getElementById("newsEmojiInput");
  if (sel && inp) {
    sel.addEventListener("change", () => {
      if (sel.value) inp.value = sel.value;
    });
  }
});


const auth = (typeof firebase !== 'undefined') ? firebase.auth() : null;
const db = (typeof firebase !== 'undefined') ? firebase.firestore() : null;
const storage = (typeof firebase !== 'undefined') ? firebase.storage() : null;

async function ensureAdminAuth() {
  // admin login required for write actions
  if (!auth) { alert("Firebase Auth nu este incarcat."); return false; }
  if (auth.currentUser) return true;

  const email = "admin@stancubyt.com";
  const pass = prompt("Parola admin:");
  if (!pass) return false;

  try {
    await auth.signInWithEmailAndPassword(email, pass);
    return true;
  } catch (e) {
    console.error("Auth error:", e);
    alert("Nu te poti autentifica. Verifica in Firebase: Authentication -> Email/Password enabled si userul admin exista.");
    return false;
  }
}

// --- Helpers
function _escapeHtml(str) {
  return String(str).replace(/[&<>"'`=\/]/g, s => ({
    '&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;','`':'&#96;','=':'&#61;','/':'&#47;','\\':'&#92;'
  }[s]));
}

function _badgeForType(type) {
  const t = String(type||'update');
  if (t === 'announcement') return { cls:'badge-announcement', txt:'Anunt Important' };
  if (t === 'event') return { cls:'badge-event', txt:'Eveniment' };
  return { cls:'badge-update', txt:'Update' };
}

// =========================
// VIZITE (GLOBAL)
// =========================
async function updateVisitCounter() {
  if (!db) return; // keep existing fallback if any
  const ref = db.collection('stats').doc('visits');

  try {
    // increment once per session
    if (!sessionStorage.getItem('stbytv_inc')) {
      sessionStorage.setItem('stbytv_inc', '1');
      await db.runTransaction(async (t) => {
        const snap = await t.get(ref);
        const current = snap.exists && typeof snap.data().count === 'number' ? snap.data().count : 0;
        t.set(ref, { count: current + 1 }, { merge: true });
      });
    }

    ref.onSnapshot(snap => {
      const count = snap.exists && typeof snap.data().count === 'number' ? snap.data().count : 0;
      const el = document.getElementById('visitCount');
      if (el) el.textContent = count.toLocaleString('ro-RO');
    });
  } catch (e) {
    console.error("visit error:", e);
  }
}

// =========================
// NEWS (GLOBAL, CROSS-DEVICE)
// =========================
let __newsUnsub = null;

function loadNews() {
  const newsContainer = document.getElementById('newsContainer');
  if (!newsContainer) return;

  // If Firestore not available, fallback to existing local rendering
  if (!db) return;

  try {
    if (__newsUnsub) { try { __newsUnsub(); } catch(_) {} __newsUnsub = null; }

    __newsUnsub = db.collection('news')
      .orderBy('pinned','desc')
      .orderBy('date','desc')
      .onSnapshot((snap) => {
        const items = [];
        snap.forEach(doc => items.push({ _id: doc.id, ...doc.data() }));

        newsContainer.innerHTML = '';

        if (!items.length) {
          newsContainer.innerHTML = '<div style="opacity:0.85;">Nu exista anunturi inca.</div>';
          return;
        }

        items.forEach(item => {
          const badge = _badgeForType(item.type);
          const cardClass = item.pinned ? 'news-card pinned' : 'news-card';

          const dateStr = item.date ? new Date(item.date).toLocaleDateString('ro-RO', {
            year:'numeric', month:'long', day:'numeric', hour:'2-digit', minute:'2-digit'
          }) : '';

          const div = document.createElement('div');
          div.className = cardClass;
          div.innerHTML = `
            ${item.bgUrl ? `<div class="news-bg" style="background-image:url('${_escapeAttr(item.bgUrl)}')"></div>` : ``}
            <div class="news-badge ${badge.cls}">${badge.txt}</div>
            <h4 style="margin-bottom:0.5rem; color:white;">${_escapeHtml((item.emoji? item.emoji+' ' : '') + (item.title||''))}</h4>
            <p style="opacity:0.9; line-height:1.5;">${_escapeHtml(item.content||'')}</p>
            <div class="news-date"><span>üìÖ</span> ${dateStr}</div>
            ${window.__SBYT_ADMIN ? `<button class="news-delete-btn" data-id="${item.id}">üóëÔ∏è Sterge</button>` : ``}
    `;
          newsContainer.appendChild(div);
        });
      });

  } catch (e) {
    console.error("loadNews error:", e);
  }
}

async function saveNews() {
  const ok = await ensureAdminAuth();
  if (!ok) return;

  const title = (document.getElementById('newsTitle')?.value || '').trim();
  const content = (document.getElementById('newsContent')?.value || '').trim();
  const type = (document.getElementById('newsType')?.value || 'update');
  const pinned = !!document.getElementById('pinNews')?.checked;

  if (!title || !content) {
    alert('Te rog completeaza titlul si continutul stirei!');
    return;
  }

  try {
    await db.collection('news').add({
      title, content, type, pinned,
      date: Date.now()
    });
    if (typeof cancelAddNews === 'function') cancelAddNews();
  } catch (e) {
    console.error("saveNews error:", e);
    alert('Eroare la salvarea stiri (verifica Firestore Rules si ca esti logat).');
  }
}

async function deleteNews(docId) {
  const ok = await ensureAdminAuth();
  if (!ok) return;
  if (!confirm('Sigur vrei sa stergi acest anunt?')) return;
  try {
    await db.collection('news').doc(docId).delete();
  } catch (e) {
    console.error("deleteNews error:", e);
    alert('Eroare la stergere (verifica Rules).');
  }
}

async function clearNews() {
  const ok = await ensureAdminAuth();
  if (!ok) return;
  if (!confirm('Sigur vrei sa stergi TOATE anunturile?')) return;
  try {
    const snap = await db.collection('news').get();
    const batch = db.batch();
    snap.forEach(doc => batch.delete(doc.ref));
    await batch.commit();
  } catch (e) {
    console.error("clearNews error:", e);
    alert('Eroare la stergerea anunturilor.');
  }
}

// =========================
// GIVEAWAY/PROMO (GLOBAL) + Participant ID
// =========================
let __promosUnsub = null;
let __leaderUnsub = null;

function showPromoForm() {
  ensureAdminAuth().then(ok => {
    if (!ok) return;
    const f = document.getElementById('promoForm');
    if (f) f.style.display = 'block';
  });
}

function cancelPromo() {
  const f = document.getElementById('promoForm');
  if (f) f.style.display = 'none';
  ['promoTitle','promoPrize','promoDesc','promoEnds','promoPoints'].forEach(id => {
    const el = document.getElementById(id);
    if (el) el.value = '';
  });
  const file = document.getElementById('promoMedia');
  if (file) file.value = '';
}

async function uploadPromoMedia(promoId, file) {
  if (!storage || !file) return null;
  const safeName = String(file.name || 'file').replace(/[^\w.\-]+/g, '_');
  const path = `promos/${promoId}/${Date.now()}_${safeName}`;
  const ref = storage.ref().child(path);
  await ref.put(file);
  const url = await ref.getDownloadURL();
  return { url, path, contentType: file.type || 'application/octet-stream', name: safeName };
}

async function savePromo() {
  const ok = await ensureAdminAuth();
  if (!ok) return;

  const title = (document.getElementById('promoTitle')?.value || '').trim();
  const prize = (document.getElementById('promoPrize')?.value || '').trim();
  const desc = (document.getElementById('promoDesc')?.value || '').trim();
  const ends = (document.getElementById('promoEnds')?.value || '').trim(); // datetime-local
  const points = parseInt(document.getElementById('promoPoints')?.value || '10', 10) || 10;
  const file = document.getElementById('promoMedia')?.files?.[0] || null;

  if (!title || !ends || !desc) {
    alert('Completeaza titlul, data de final si descrierea.');
    return;
  }

  const endsAt = new Date(ends).getTime();
  if (!endsAt || endsAt <= Date.now()) {
    alert('Data expirarii trebuie sa fie in viitor!');
    return;
  }

  try {
    const ref = await db.collection('promos').add({
      title,
      prize: prize || null,
      desc,
      endsAt,
      pointsPerPromotion: points,
      createdAt: Date.now(),
      status: 'active',
      media: null
    });

    if (file) {
      const media = await uploadPromoMedia(ref.id, file);
      if (media) await ref.update({ media });
    }

    cancelPromo();
    alert('Giveaway/Promotie adaugata!');
  } catch (e) {
    console.error("savePromo error:", e);
    alert('Eroare la salvarea giveaway-ului (verifica Rules / Storage).');
  }
}

async function deletePromo(promoId) {
  const ok = await ensureAdminAuth();
  if (!ok) return;
  if (!confirm('Stergi aceasta promotie/giveaway?')) return;
  try {
    await db.collection('promos').doc(promoId).delete();
  } catch (e) {
    console.error("deletePromo error:", e);
    alert('Eroare la stergere (Rules).');
  }
}

function listenPromos() {
  const list = document.getElementById('promoList');
  if (!list || !db) return;

  if (__promosUnsub) { try { __promosUnsub(); } catch(_) {} __promosUnsub = null; }

  __promosUnsub = db.collection('promos').orderBy('createdAt','desc').onSnapshot(snap => {
    const promos = [];
    snap.forEach(doc => promos.push({ _id: doc.id, ...doc.data() }));
    renderPromos(promos);
  });
}

function renderPromos(promos) {
  const promoList = document.getElementById('promoList');
  if (!promoList) return;

  promoList.innerHTML = '';
  const now = Date.now();

  if (!promos.length) {
    promoList.innerHTML = '<div style="opacity:0.85;">Nu exista promo»õii active √ÆncƒÉ.</div>';
    return;
  }

  promos.forEach(p => {
    const expired = p.endsAt && p.endsAt <= now;
    const badge = expired ? 'Expirat' : 'Activ';

    const mediaHtml = p.media?.url
      ? (String(p.media.contentType||'').startsWith('video/')
          ? `<video controls style="width:100%; border-radius:12px; margin-top:10px;">
               <source src="${p.media.url}" type="${p.media.contentType}">
             </video>`
          : `<img src="${p.media.url}" alt="" style="width:100%; border-radius:12px; margin-top:10px;">`)
      : '';

    const card = document.createElement('div');
    card.className = 'news-card';
    card.innerHTML = `
      <div class="news-badge ${expired ? 'badge-announcement' : 'badge-event'}">${badge}</div>
      <h4 style="margin-bottom:0.5rem; color:white;">${_escapeHtml(p.title||'')}</h4>
      ${p.prize ? `<p style="opacity:0.9;"><strong>Premiu:</strong> ${_escapeHtml(p.prize)}</p>` : ''}
      <p style="opacity:0.9; line-height:1.5;">${_escapeHtml(p.desc||'')}</p>
      <div class="news-date" style="margin-top:0.8rem;"><span>‚è≥</span> Expira: ${p.endsAt ? new Date(p.endsAt).toLocaleString('ro-RO') : '-'}</div>
      ${mediaHtml}

      <div style="margin-top:1rem; display:flex; gap:10px; flex-wrap:wrap;">
        <button class="news-btn" onclick="openPromo('${p._id}')">üéØ Detalii / Inscriere</button>
        <button class="news-btn" onclick="deletePromo('${p._id}')">üóëÔ∏è Sterge</button>
      </div>
    `;
    promoList.appendChild(card);
  });
}

function openPromo(promoId) {
  window.__activePromoId = promoId;

  // Scroll to leaderboard area if exists
  const el = document.getElementById('leaderboard');
  if (el) el.scrollIntoView({ behavior:'smooth', block:'start' });

  listenLeaderboard(promoId);
}

function _genParticipantId() {
  // STBYT-XXXXXX
  const chars = 'ABCDEFGHJKLMNPQRSTUVWXYZ23456789';
  let s = 'STBYT-';
  for (let i=0;i<6;i++) s += chars[Math.floor(Math.random()*chars.length)];
  return s;
}

async function joinPromo(promoId) {
  const id = promoId || window.__activePromoId;
  if (!id) return alert('Selecteaza un giveaway.');

  const name = (document.getElementById('joinName')?.value || '').trim();
  const email = (document.getElementById('joinEmail')?.value || '').trim().toLowerCase();
  if (!name || !email) return alert('Completeaza nume si email.');

  const pid = email.replace(/[^\w.\-@]+/g, '_');
  const ref = db.collection('promos').doc(id).collection('participants').doc(pid);

  try {
    const existing = await ref.get();
    let participantId = existing.exists ? (existing.data().participantId || null) : null;
    if (!participantId) participantId = _genParticipantId();

    await ref.set({
      participantId,
      name,
      email,
      points: existing.exists ? (existing.data().points||0) : 0,
      promotions: existing.exists ? (existing.data().promotions||0) : 0,
      joinedAt: existing.exists ? (existing.data().joinedAt||Date.now()) : Date.now(),
      lastPromotionAt: existing.exists ? (existing.data().lastPromotionAt||0) : 0
    }, { merge: true });

    alert('Inscriere reusita! ID: ' + participantId);
    // refresh leaderboard
    listenLeaderboard(id);
  } catch (e) {
    console.error("join error:", e);
    alert('Eroare inscriere (Rules).');
  }
}

async function promoteMe() {
  const id = window.__activePromoId;
  if (!id) return alert('Selecteaza un giveaway.');

  const email = (document.getElementById('joinEmail')?.value || '').trim().toLowerCase();
  if (!email) return alert('Introdu emailul cu care esti inscris.');

  const pid = email.replace(/[^\w.\-@]+/g, '_');
  const ref = db.collection('promos').doc(id).collection('participants').doc(pid);

  try {
    const promoDoc = await db.collection('promos').doc(id).get();
    const p = promoDoc.exists ? promoDoc.data() : {};
    const addPts = Number(p.pointsPerPromotion || 10);

    await db.runTransaction(async (t) => {
      const snap = await t.get(ref);
      if (!snap.exists) throw new Error('Nu esti inscris.');

      const d = snap.data();
      const now = Date.now();
      const cooldownMs = 60 * 1000;
      const last = Number(d.lastPromotionAt || 0);
      if (now - last < cooldownMs) throw new Error('Poti promova o data pe minut.');

      t.set(ref, {
        promotions: (Number(d.promotions||0) + 1),
        points: (Number(d.points||0) + addPts),
        lastPromotionAt: now
      }, { merge: true });
    });

    alert(`Promovare inregistrata (+${addPts} puncte)!`);
  } catch (e) {
    alert(e.message || 'Eroare promovare.');
  }
}

function listenLeaderboard(promoId) {
  const el = document.getElementById('leaderboard');
  if (!el || !db) return;

  if (__leaderUnsub) { try { __leaderUnsub(); } catch(_) {} __leaderUnsub = null; }

  __leaderUnsub = db.collection('promos').doc(promoId)
    .collection('participants')
    .orderBy('points','desc')
    .orderBy('promotions','desc')
    .limit(50)
    .onSnapshot(snap => {
      const rows = [];
      snap.forEach(doc => rows.push({ _id: doc.id, ...doc.data() }));
      el.innerHTML = rows.map((r,i) => `
        <div style="display:flex; justify-content:space-between; padding:8px 0; border-bottom:1px solid rgba(255,255,255,0.08);">
          <div><strong>#${i+1}</strong> ${_escapeHtml(r.name||'')} <span style="opacity:0.7;">(${_escapeHtml(r.participantId||'')})</span></div>
          <div><strong>${Number(r.points||0)}</strong> pts <span style="opacity:0.7;">| ${Number(r.promotions||0)} promo</span></div>
        </div>
      `).join('');
    });
}

// requestPassword mapping (keep existing buttons)
function requestPassword(action, id) {
  if (action === 'add') {
    // show existing form
    if (typeof addNews === 'function') addNews();
    return;
  }
  if (action === 'clear') return clearNews();
  if (action === 'promoAdd') return showPromoForm();
  if (action === 'promoClear') {
    // clear promos needs admin
    ensureAdminAuth().then(async ok => {
      if (!ok) return;
      if (!confirm('Stergi toate promo»õiile/giveaway-urile?')) return;
      const snap = await db.collection('promos').get();
      const batch = db.batch();
      snap.forEach(doc => batch.delete(doc.ref));
      await batch.commit();
      alert('Promo»õiile au fost »ôterse.');
    }).catch(()=>{});
    return;
  }
  if (action === 'deleteNews') return deleteNews(id);
}

// Make sure navigation always works with onclick
try { window.showSection = window.showSection || showSection; } catch(e) {}

// expose globals used by HTML
Object.assign(window, {
  requestPassword,
  saveNews,
  deleteNews,
  clearNews,
  loadNews,
  showPromoForm,
  cancelPromo,
  savePromo,
  deletePromo,
  openPromo,
  joinPromo,
  promoteMe,
  updateVisitCounter
});

// auto-init
window.addEventListener('load', () => {
  try { updateVisitCounter(); } catch(e){}
  try { loadNews(); } catch(e){}
  try { listenPromos(); } catch(e){}
});


/* ============================================================
   PATCH V4.1 (Firebase + UI fixes fara schimbare design)
   - News & anunturi: Firestore (cross-device) + stergere individuala
   - Vizite: Firestore (cross-device)
   - Echipa: Firestore CRUD
   - Contact: trimite la stancubyt@zahomail.eu + dropdown vizibil
   - Chart: embed CoinMarketCap DEX page in container (fara CORS)
   - Whitepaper: download din /Whitepaper/*.pdf
   - Giveaway: buton separat giveaway + inscriere cu email + cod
   ============================================================ */

(function(){
  // ---------- Helpers ----------
  const $ = (id)=>document.getElementById(id);
  const _escape = (s)=>String(s||'').replace(/[&<>"'`=\/]/g, ch => ({
    '&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;','`':'&#96;','=':'&#61;','/':'&#47;','\\':'&#92;'
  }[ch]||ch));

  // ---------- Whitepaper downloads (GitHub Pages) ----------
  window.downloadWhitepaper = function(language){
    const file = (language === 'ro') ? 'StancuBYT_RO.pdf' : 'StancuBYT_EN.pdf';
    const url = `Whitepaper/${file}`;
    const a = document.createElement('a');
    a.href = url;
    a.download = file;
    document.body.appendChild(a);
    a.click();
    a.remove();
  };

  // ---------- Contact send (mailto) ----------
  window.sendContactMessage = function(){
    const name = ($('contactName')?.value||'').trim();
    const email = ($('contactEmail')?.value||'').trim();
    const type = ($('contactType')?.value||'').trim();
    const msg = ($('contactMessage')?.value||'').trim();
    const agree = $('privacyAgree')?.checked;

    const status = $('contactStatus');
    const show = (m, ok)=>{
      if (!status) { alert(m); return; }
      status.textContent = m;
      status.style.color = ok ? '#00ff88' : '#ff4444';
      status.style.background = ok ? 'rgba(0,255,136,0.1)' : 'rgba(255,68,68,0.1)';
      status.style.border = ok ? '1px solid rgba(0,255,136,0.25)' : '1px solid rgba(255,68,68,0.25)';
      status.style.padding = '0.6rem';
      status.style.borderRadius = '10px';
    };

    const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    if (!name || !email || !msg) return show('CompleteazƒÉ numele, emailul »ôi mesajul.', false);
    if (!re.test(email)) return show('Email invalid.', false);
    if (!agree) return show('BifeazƒÉ acordul de confiden»õialitate.', false);

    const to = 'stancubyt@zahomail.eu';
    const subj = encodeURIComponent(`StancuBYT | ${type || 'Solicitare'} | ${name}`);
    const body = encodeURIComponent(
      `Nume: ${name}\nEmail: ${email}\nTip: ${type}\n\nMesaj:\n${msg}\n\n‚Äî trimis de pe stancubyt.com`
    );

    window.location.href = `mailto:${to}?subject=${subj}&body=${body}`;
    show('Se deschide clientul tƒÉu de email pentru trimitere.', true);
  };

  // ---------- Firebase guards ----------
  const hasFirebase = (typeof firebase !== 'undefined');
  const db = hasFirebase ? firebase.firestore() : null;
  const auth = hasFirebase ? firebase.auth() : null;

  // Refolosim ensureAdminAuth daca exista, altfel fallback la parola fixa
  const ADMIN_USER = 'admin@stancubyt.com';
  const ADMIN_FALLBACK_PASS = (typeof NEWS_PASSWORD !== 'undefined') ? NEWS_PASSWORD : 'ParolaCripto24091980';

  async function _ensureAdmin(){
    // prefer firebase auth
    if (typeof ensureAdminAuth === 'function') {
      try { return await ensureAdminAuth(); } catch(e) {}
    }
    // fallback (doar pentru site static, nu e securitate reala)
    const u = prompt('Utilizator admin (email):', ADMIN_USER) || '';
    const p = prompt('Parola admin:') || '';
    if (!u || !p) return false;
    if (u.trim().toLowerCase() !== ADMIN_USER.toLowerCase() || p !== ADMIN_FALLBACK_PASS) {
      alert('Autentificare invalidƒÉ.');
      return false;
    }
    return true;
  }

  // Map requestPassword actions (compatibil cu HTML existent)
  const _origRequestPassword = window.requestPassword;
  window.requestPassword = function(action, id){
    if (action === 'giveawayAdd') return showPromoForm('giveaway');
    if (action === 'promoAdd') return showPromoForm('promo');
    if (action === 'teamAdd') return showTeamForm();
    if (action === 'teamClear') return clearTeam();
    return _origRequestPassword ? _origRequestPassword(action, id) : undefined;
  };

  // ---------- Vizite (cross-device) ----------
  async function updateVisitCounterFirestore(){
    try{
      if (!db) return;
      const ref = db.collection('stats').doc('visits');
      await db.runTransaction(async (tx)=>{
        const snap = await tx.get(ref);
        const cur = snap.exists && snap.data().count ? Number(snap.data().count) : 0;
        tx.set(ref, { count: cur + 1, updatedAt: Date.now() }, { merge:true });
      });
      const snap = await ref.get();
      const count = snap.exists && snap.data().count ? Number(snap.data().count) : 0;
      const el = $('visitCount') || $('visitsCount') || $('visitCounter') || $('visits');
      if (el) el.textContent = count.toLocaleString('ro-RO');
    } catch(e){
      console.error('visits firestore:', e);
    }
  }

  // Inlocuieste functia existenta, dar pastreaza fallback la localStorage daca nu e Firebase
  const _origUpdateVisits = window.updateVisitCounter;
  window.updateVisitCounter = function(){
    if (db) { updateVisitCounterFirestore(); return; }
    if (_origUpdateVisits) _origUpdateVisits();
  };

  // ---------- News (cross-device) ----------
  let __newsUnsub = null;

  function _renderNews(items){
    const container = $('newsContainer');
    if (!container) return;
    container.innerHTML = '';

    if (!items.length){
      container.innerHTML = '<div style="opacity:0.8;">Nu existƒÉ anun»õuri √ÆncƒÉ.</div>';
      return;
    }

    items.forEach(item=>{
      const badge = (typeof _badgeForType === 'function') ? _badgeForType(item.type) : (item.type==='announcement'?{cls:'badge-announcement',txt:'Anun»õ Important'}:{cls:'badge-update',txt:'Update'});
      const card = document.createElement('div');
      card.className = item.pinned ? 'news-card pinned' : 'news-card';

      const date = item.date || item.createdAt;
      const d = date ? new Date(date) : new Date();
      const emojiSpan = item.emoji ? `<span class="news-emoji">${_escape(item.emoji)}</span>` : '';
      const delBtn = (window.isAdmin) ? `<button class="delete-news-btn" data-id="${item.id}">»òterge</button>` : '';

      card.innerHTML = `
        <div class="news-badge ${badge.cls}">${badge.txt}</div>
        <h4 style="margin-bottom:0.5rem; color:white;">${_escape(item.title||'')}</h4>
        <p style="opacity:0.9; line-height:1.5;">${_escape(item.content||'')}</p>
        <div class="news-date">
          <span>üìÖ</span>
          <span>${d.toLocaleDateString('ro-RO',{year:'numeric',month:'long',day:'numeric',hour:'2-digit',minute:'2-digit'})}</span>
          ${emojiSpan}
        </div>
        ${delBtn}
      `;


      // fundal imagine (daca exista)
      try {
        if (item.bgUrl) {
          card.classList.add('has-bg');
          const safeUrl = String(item.bgUrl).replace(/["'()\\]/g, '');
          card.style.backgroundImage = `linear-gradient(180deg, rgba(0,0,0,0.55), rgba(0,0,0,0.70)), url(${safeUrl})`;
          card.style.backgroundSize = 'cover';
          card.style.backgroundPosition = 'center';
        } else {
          card.classList.remove('has-bg');
          card.style.backgroundImage = '';
        }
      } catch(e) {}
container.appendChild(card);
    });
  }

  async function _listenNews(){
    if (!db) return;
    if (__newsUnsub) { try{__newsUnsub();}catch(e){} __newsUnsub=null; }

    __newsUnsub = db.collection('news').orderBy('createdAt','desc').limit(50).onSnapshot((snap)=>{
      const items=[];
      snap.forEach(doc=>{
        items.push({ _id: doc.id, ...doc.data() });
      });
      // pinned first (client side) + recent
      items.sort((a,b)=>{
        if (!!a.pinned !== !!b.pinned) return a.pinned ? -1 : 1;
        return Number(b.createdAt||0)-Number(a.createdAt||0);
      });
      _renderNews(items);
    }, (err)=>{
      console.error('news listen:', err);
    });
  }

  // override loadNews to use Firestore
  const _origLoadNews = window.loadNews;
  window.loadNews = function(){
    if (db) { _listenNews(); return; }
    if (_origLoadNews) _origLoadNews();
  };

  // save news to firestore
  const _origSaveNews = window.saveNews;
  window.saveNews = async function(){
    if (!db) return _origSaveNews ? _origSaveNews() : undefined;

    const ok = await _ensureAdmin();
    if (!ok) return;

    const title = ($('newsTitle')?.value||'').trim();
    const content = ($('newsContent')?.value||'').trim();
    const type = $('newsType')?.value || 'update';
    const pinned = !!$('pinNews')?.checked;

    if (!title || !content) { alert('CompleteazƒÉ titlul »ôi con»õinutul!'); return; }

    try{
      await db.collection('news').add({
        title, content, type, pinned,
        createdAt: Date.now(),
        date: new Date().toISOString()
      });
      if (typeof cancelAddNews === 'function') cancelAddNews();
    }catch(e){
      console.error('saveNews firestore:', e);
      alert('Eroare la salvarea »ôtirii (verificƒÉ Firestore Rules).');
    }
  };

  // delete a single news doc
  window.deleteNewsDoc = async function(docId){
    if (!db) return;
    const ok = await _ensureAdmin();
    if (!ok) return;
    if (!docId) return;
    if (!confirm('»òtergi acest anun»õ?')) return;
    try{
      await db.collection('news').doc(docId).delete();
    }catch(e){
      console.error('delete news:', e);
      alert('Eroare la »ôtergere (Rules).');
    }
  };

  // clear all news
  const _origClear = window.clearNews || window.clearAllNews;
  window.clearNews = async function(){
    if (!db) return _origClear ? _origClear() : undefined;
    const ok = await _ensureAdmin();
    if (!ok) return;
    if (!confirm('»òtergi TOATE anun»õurile?')) return;
    const snap = await db.collection('news').get();
    const batch = db.batch();
    snap.forEach(doc=>batch.delete(doc.ref));
    await batch.commit();
  };

  // ---------- Echipa (Firestore) ----------
  let __teamUnsub = null;

  function showTeamForm(){
    const f = $('teamForm');
    if (f) f.style.display='block';
  }
  window.cancelTeamMember = function(){
    const f = $('teamForm');
    if (f) f.style.display='none';
    if ($('teamName')) $('teamName').value='';
    if ($('teamRole')) $('teamRole').value='';
    if ($('teamJoinDate')) $('teamJoinDate').value='';
    if ($('teamAvatar')) $('teamAvatar').value='';
  };

  window.saveTeamMember = async function(){
    if (!db) { alert('Firebase nu este √ÆncƒÉrcat.'); return; }
    const ok = await _ensureAdmin();
    if (!ok) return;

    const name = ($('teamName')?.value||'').trim();
    const role = ($('teamRole')?.value||'').trim();
    const joinDate = ($('teamJoinDate')?.value||'').trim();
    const avatar = ($('teamAvatar')?.value||'').trim();

    if (!name || !role || !joinDate) { alert('CompleteazƒÉ nume, func»õie »ôi data √Ænscrierii.'); return; }

    try{
      await db.collection('team').add({
        name, role, joinDate,
        avatar: avatar || null,
        createdAt: Date.now()
      });
      cancelTeamMember();
    }catch(e){
      console.error('team save:', e);
      alert('Eroare la salvare membru (Rules).');
    }
  };

  async function deleteTeamMember(docId){
    const ok = await _ensureAdmin();
    if (!ok) return;
    if (!confirm('»òtergi acest membru?')) return;
    try{ await db.collection('team').doc(docId).delete(); }
    catch(e){ console.error('team delete:', e); alert('Eroare la »ôtergere (Rules).'); }
  }
  window.deleteTeamMember = deleteTeamMember;

  async function clearTeam(){
    if (!db) return;
    const ok = await _ensureAdmin();
    if (!ok) return;
    if (!confirm('»òtergi to»õi membrii adƒÉuga»õi?')) return;
    const snap = await db.collection('team').get();
    const batch = db.batch();
    snap.forEach(doc=>batch.delete(doc.ref));
    await batch.commit();
  }

  function renderTeam(items){
    const list = $('teamList');
    if (!list) return;
    list.innerHTML = '';
    if (!items.length){
      list.innerHTML = '<div style="opacity:0.8;">Nu existƒÉ membri suplimentari √ÆncƒÉ.</div>';
      return;
    }
    items.forEach(m=>{
      const avatar = m.avatar ? `<img src="${_escape(m.avatar)}" alt="" style="width:64px;height:64px;border-radius:50%;object-fit:cover;border:2px solid rgba(255,255,255,0.2);">`
                              : `<div style="width:64px;height:64px;border-radius:50%;display:flex;align-items:center;justify-content:center;background:rgba(255,255,255,0.06);border:2px solid rgba(255,255,255,0.12);font-size:1.6rem;">üë§</div>`;
      const card = document.createElement('div');
      card.className = 'news-card';
      card.style.margin = '0';
      card.innerHTML = `
        <div style="display:flex; gap:12px; align-items:center;">
          ${avatar}
          <div style="flex:1;">
            <div style="font-weight:700; color:#fff;">${_escape(m.name||'')}</div>
            <div style="opacity:0.9;">${_escape(m.role||'')}</div>
            <div style="opacity:0.75; font-size:0.9rem;">üìÖ ${_escape(m.joinDate||'')}</div>
          </div>
        </div>
        <div style="display:flex; justify-content:flex-end; margin-top:12px;">
          <button class="news-btn" onclick="deleteTeamMember('${_escape(m._id||'')}')">üóëÔ∏è »òterge</button>
        </div>
      `;
      list.appendChild(card);
    });
  }

  function listenTeam(){
    if (!db) return;
    if (__teamUnsub) { try{__teamUnsub();}catch(e){} __teamUnsub=null; }
    __teamUnsub = db.collection('team').orderBy('createdAt','desc').limit(50).onSnapshot(snap=>{
      const items=[]; snap.forEach(doc=>items.push({ _id: doc.id, ...doc.data() }));
      renderTeam(items);
    }, err=>console.error('team listen:', err));
  }

  // ---------- Giveaway/Promo (Firestore) ----------
  // (1) show form with type
  window.showPromoForm = async function(kind){
    const ok = await _ensureAdmin();
    if (!ok) return;
    const f = $('promoForm');
    if (f) f.style.display='block';
    if ($('promoFormKind')) $('promoFormKind').textContent = (kind==='giveaway'?'giveaway':'promo»õie');
    f && (f.dataset.kind = kind || 'promo');
  };

  // (2) ensure required fields exist by mapping old ids
  window.savePromo = async function(){
    const ok = await _ensureAdmin();
    if (!ok) return;
    if (!db) { alert('Firebase nu este √ÆncƒÉrcat.'); return; }

    const title = ($('promoTitle')?.value||'').trim();
    const ends = ($('promoEnds')?.value||'').trim();
    const desc = ($('promoDesc')?.value||'').trim();
    const prize = ($('promoPrize')?.value||'').trim();
    const points = Math.max(1, parseInt(($('promoPoints')?.value||'10'),10) || 10);
    const kind = ($('promoForm')?.dataset.kind || 'promo');

    if (!title || !ends || !desc) {
      alert('CompleteazƒÉ titlul, data de final »ôi descrierea.');
      return;
    }

    const endsAt = new Date(ends).getTime();
    if (!endsAt || endsAt <= Date.now()) {
      alert('Data expirƒÉrii trebuie sƒÉ fie √Æn viitor!');
      return;
    }

    try{
      await db.collection('promos').add({
        kind,
        title,
        prize: prize || null,
        desc,
        endsAt,
        pointsPerPromotion: points,
        createdAt: Date.now(),
        status: 'active'
      });
      if (typeof cancelPromo === 'function') cancelPromo();
      alert('Promo»õia / Giveaway-ul a fost adƒÉugat!');
    }catch(e){
      console.error('savePromo:', e);
      alert('Eroare la salvarea giveaway-ului (verificƒÉ Firestore Rules).');
    }
  };

  // (3) render promos with registration + email + code
  let __promosUnsub = null;

  function _randCode(){
    const a = 'ABCDEFGHJKLMNPQRSTUVWXYZ23456789';
    let s='';
    for(let i=0;i<10;i++) s += a[Math.floor(Math.random()*a.length)];
    return s;
  }

  async function joinPromoFirestore(promoId){
    if (!db) return;
    const name = ($('joinName_'+promoId)?.value||'').trim();
    const email = ($('joinEmail_'+promoId)?.value||'').trim();
    const wallet = ($('joinWallet_'+promoId)?.value||'').trim();
    const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;

    if (!name || !email || !wallet) { alert('CompleteazƒÉ nume, email »ôi wallet.'); return; }
    if (!re.test(email)) { alert('Email invalid.'); return; }

    // generate id/code
    const code = _randCode();
    try{
      await db.collection('promos').doc(promoId).collection('participants').add({
        name, email, wallet,
        code,
        points: 0,
        promotions: 0,
        createdAt: Date.now()
      });

      // IMPORTANT: fara backend nu putem trimite email automat "from security@stancubyt.com".
      // Deschidem clientul local de email cu mesajul complet.
      const subj = encodeURIComponent('StancuBYT | Confirmare √Ænscriere');
      const body = encodeURIComponent(`Salut ${name},\n\nAi fost inscris cu codul "${code}".\n\nPromo/Giveaway ID: ${promoId}\nWallet: ${wallet}\n\n‚Äî StancuBYT Security`);
      window.location.href = `mailto:${encodeURIComponent(email)}?subject=${subj}&body=${body}`;
      alert('√énscriere reu»ôitƒÉ! Se deschide emailul de confirmare.');
    }catch(e){
      console.error('joinPromo:', e);
      alert('Eroare la √Ænscriere (Rules).');
    }
  }
  window.joinPromo = joinPromoFirestore;

  async function _loadParticipants(promoId){
    const snap = await db.collection('promos').doc(promoId).collection('participants').orderBy('createdAt','desc').get();
    const arr=[]; snap.forEach(d=>arr.push({ _id:d.id, ...d.data() }));
    return arr;
  }

  async function renderPromos(promos){
    const list = $('promoList');
    if (!list) return;
    list.innerHTML = '';
    const now = Date.now();

    if (!promos.length){
      list.innerHTML = '<div style="opacity:0.85;">Nu existƒÉ promo»õii/giveaway-uri active √ÆncƒÉ.</div>';
      return;
    }

    for (const p of promos){
      const expired = p.endsAt && p.endsAt <= now;
      const badge = expired ? 'Expirat' : (p.kind==='giveaway' ? 'Giveaway' : 'Promo»õie');

      const card = document.createElement('div');
      card.className = 'news-card';
      card.style.margin = '0';

      const endsStr = p.endsAt ? new Date(p.endsAt).toLocaleString('ro-RO') : '-';
      const participants = await _loadParticipants(p._id);

      const participantsHtml = participants.length
        ? `<div style="margin-top:10px; opacity:0.95;">
             <div style="font-weight:700; margin-bottom:6px;">Participan»õi (${participants.length})</div>
             <div style="display:grid; gap:6px;">
               ${participants.map(x=>`<div style="display:flex;justify-content:space-between;gap:10px; background:rgba(255,255,255,0.04); padding:8px 10px; border-radius:10px;">
                   <div style="min-width:0;">
                     <div style="font-weight:700; color:#fff; overflow:hidden; text-overflow:ellipsis; white-space:nowrap;">${_escape(x.name||'')}</div>
                     <div style="opacity:0.8; font-size:0.85rem;">${_escape(x.email||'')} ‚Ä¢ ${_escape(x.wallet||'')}</div>
                   </div>
                   <div style="opacity:0.85; font-size:0.85rem;">ID: <strong>${_escape(x.code||'')}</strong></div>
                 </div>`).join('')}
             </div>
           </div>`
        : `<div style="margin-top:10px; opacity:0.8;">Niciun participant √ÆncƒÉ.</div>`;

      card.innerHTML = `
        <div style="display:flex;justify-content:space-between;align-items:center;gap:10px;">
          <div style="font-weight:800; color:#fff;">${_escape(p.title||'')}</div>
          <div style="padding:6px 10px; border-radius:999px; background:rgba(0,255,136,0.12); border:1px solid rgba(0,255,136,0.25); font-size:0.85rem;">${badge}</div>
        </div>
        <div style="opacity:0.85; margin-top:6px;">‚è≥ ExpirƒÉ: <strong>${_escape(endsStr)}</strong></div>
        ${p.prize ? `<div style="opacity:0.9; margin-top:6px;">üèÜ Premiu: <strong>${_escape(p.prize)}</strong></div>`:''}
        <div style="opacity:0.92; margin-top:10px; line-height:1.5;">${_escape(p.desc||'')}</div>

        <div style="margin-top:12px; padding-top:12px; border-top:1px solid rgba(255,255,255,0.12);">
          <div style="font-weight:700; margin-bottom:8px;">√énscriere</div>
          <div class="form-row">
            <input type="text" id="joinName_${_escape(p._id)}" placeholder="Nume" maxlength="80">
            <input type="email" id="joinEmail_${_escape(p._id)}" placeholder="Email" maxlength="120">
          </div>
          <div class="form-row">
            <input type="text" id="joinWallet_${_escape(p._id)}" placeholder="Wallet (0x...)" maxlength="64">
            <button class="news-btn" onclick="joinPromo('${_escape(p._id)}')" ${expired?'disabled':''} style="min-width:160px;">‚úÖ √énscrie-te</button>
          </div>
          <div style="opacity:0.75; font-size:0.85rem; margin-top:6px;">
            DupƒÉ √Ænscriere prime»ôti un cod (ID) »ôi se deschide emailul de confirmare.
          </div>
          <div style="display:flex; justify-content:flex-end; gap:10px; margin-top:10px; flex-wrap:wrap;">
            <button class="news-btn" onclick="deletePromo('${_escape(p._id)}')">üóëÔ∏è »òterge</button>
          </div>
          ${participantsHtml}
        </div>
      `;
      list.appendChild(card);
    }
  }
  window.renderPromos = renderPromos;

  window.deletePromo = async function(promoId){
    const ok = await _ensureAdmin();
    if (!ok) return;
    if (!db) return;
    if (!confirm('»òtergi aceastƒÉ promo»õie/giveaway?')) return;
    try{
      // delete participants subcollection
      const partSnap = await db.collection('promos').doc(promoId).collection('participants').get();
      const batch = db.batch();
      partSnap.forEach(d=>batch.delete(d.ref));
      batch.delete(db.collection('promos').doc(promoId));
      await batch.commit();
    }catch(e){
      console.error('deletePromo:', e);
      alert('Eroare la »ôtergere (Rules).');
    }
  };

  function listenPromos(){
    if (!db) return;
    if (__promosUnsub) { try{__promosUnsub();}catch(e){} __promosUnsub=null; }
    __promosUnsub = db.collection('promos').orderBy('createdAt','desc').onSnapshot(async snap=>{
      const promos=[]; snap.forEach(doc=>promos.push({ _id: doc.id, ...doc.data() }));
      await renderPromos(promos);
    }, err=>console.error('promos listen:', err));
  }
  window.listenPromos = listenPromos;

  // ---------- Chart: embed CoinMarketCap DEX page ----------
  function initCmcEmbed(){
    const container = document.querySelector('.chart-container');
    const canvas = $('priceChart');
    if (!container) return;

    // evitƒÉ dublare
    if (container.querySelector('iframe[data-cmc="1"]')) return;

    // pƒÉstreazƒÉ canvas √Æn DOM, dar √Æl ascundem (nu »ôtergem structura)
    if (canvas) canvas.style.display = 'none';

    const iframe = document.createElement('iframe');
    iframe.setAttribute('data-cmc','1');
    iframe.src = 'https://dex.coinmarketcap.com/token/ethereum/0x44cf220399be798baeae45fd7c4ff44623713833/';
    iframe.style.width = '100%';
    iframe.style.height = '420px';
    iframe.style.border = '0';
    iframe.style.borderRadius = '14px';
    iframe.loading = 'lazy';
    container.appendChild(iframe);

    const live = $('lastUpdated');
    if (live) live.textContent = 'coinmarketcap LIVE';
  }

  // ---------- Init ----------
  window.addEventListener('load', ()=>{
    try{ window.loadNews && window.loadNews(); }catch(e){}
    try{ window.updateVisitCounter && window.updateVisitCounter(); }catch(e){}
    try{ listenTeam(); }catch(e){}
    try{ listenPromos(); }catch(e){}
    try{ initCmcEmbed(); }catch(e){}
  });

  // also when switching to statistics page
  const _origShowSection = window.showSection;
  if (typeof _origShowSection === 'function'){
    window.showSection = function(sectionId){
      _origShowSection(sectionId);
      if (sectionId === 'stats' || sectionId === 'statistici') {
        setTimeout(()=>{ try{ initCmcEmbed(); }catch(e){} }, 200);
      }
      if (sectionId === 'whitepaper') {
        setTimeout(()=>{ try{ listenTeam(); }catch(e){} }, 200);
      }
      if (sectionId === 'giveaway' || sectionId === 'promotii') {
        setTimeout(()=>{ try{ listenPromos(); }catch(e){} }, 200);
      }
    };
  }
})();

</script>
<script>
/* ==========================================================
   SBYT PATCH (Admin auth + Giveaway/Promo + Team + Contact)
   Pentru GitHub Pages: securitate reala necesita backend/rules.
========================================================== */

(function(){
  // --- Admin auth (persistenta) ---
  const LS_ADMIN = 'sbyt_admin';
  // IMPORTANT: schimba parola asta!
  const ADMIN_PASSWORD = (window.ADMIN_PASSWORD || 'SBYT_ADMIN_2025');

  function _setPill(){
    const pill = document.getElementById('adminStatusPill');
    if (!pill) return;
    if (isAdmin()){
      pill.classList.remove('off');
      pill.textContent = '‚óè Autentificat (Admin)';
    } else {
      pill.classList.add('off');
      pill.textContent = '‚óè Neautentificat';
    }
  }

  window.isAdmin = function(){
    return localStorage.getItem(LS_ADMIN) === 'true';
  }

  window.adminLogin = function(){
    const inp = document.getElementById('adminPasswordInput');
    const msg = document.getElementById('adminLoginMsg');
    const val = (inp?.value || '').trim();
    if (!val){
      if (msg){ msg.style.color='#ff4d4d'; msg.textContent='Introdu parola.'; }
      return;
    }
    if (val !== ADMIN_PASSWORD){
      if (msg){ msg.style.color='#ff4d4d'; msg.textContent='Parola incorecta!'; }
      return;
    }
    localStorage.setItem(LS_ADMIN,'true');
    if (msg){ msg.style.color='#00ff88'; msg.textContent='Autentificare reusita. Modul administrator este activ.'; }
    _setPill();
    showAdminOnly();
  }

  window.adminLogout = function(){
    localStorage.removeItem(LS_ADMIN);
    const msg = document.getElementById('adminLoginMsg');
    if (msg){ msg.style.color='#cfcfe8'; msg.textContent='Ai iesit din modul administrator.'; }
    _setPill();
    hideAdminOnly();
  }

  function showAdminOnly(){
    document.querySelectorAll('.admin-only').forEach(el => el.style.display='block');
  }
  function hideAdminOnly(){
    document.querySelectorAll('.admin-only').forEach(el => el.style.display='none');
  }

  // Override verifyPassword: nu mai cerem prompt daca e logat
  window.verifyPassword = function(){
    if (isAdmin()) return true;
    const p = prompt('Introduce parola de administrator:');
    if (p !== ADMIN_PASSWORD){
      alert('Parola incorecta!');
      return false;
    }
    localStorage.setItem(LS_ADMIN,'true');
    _setPill();
    showAdminOnly();
    return true;
  };

  document.addEventListener('DOMContentLoaded', () => {
    _setPill();
    if (isAdmin()) showAdminOnly(); else hideAdminOnly();
  });

  // --- Helpers ---
  function $(id){ return document.getElementById(id); }
  function escapeHtml(str){
    return String(str||'').replace(/[&<>"']/g, s => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[s]));
  }
  function maskEmail(email){
    const e = String(email||'');
    const at = e.indexOf('@');
    if (at <= 1) return '***' + (at>-1? e.slice(at):'');
    const name = e.slice(0, at);
    const dom = e.slice(at);
    return name.slice(0,2) + '***' + dom;
  }
  function randCode(){
    const chars='ABCDEFGHJKLMNPQRSTUVWXYZ23456789';
    let out='';
    for(let i=0;i<10;i++) out += chars[Math.floor(Math.random()*chars.length)];
    return out;
  }
  function isoToday(){
    const d=new Date(); d.setHours(0,0,0,0);
    return d.toISOString().slice(0,10);
  }

  // --- LocalStorage stores (fallback robust) ---
  const LS_PROMOS = (window.LS_PROMOS || 'SBYT_PROMOS_V3');
  const LS_PROMO_PART = 'SBYT_PROMO_PART_V3'; // map promoId -> participants[]
  const LS_TEAM = 'SBYT_TEAM_V1';

  function getPromos(){
    try{ return JSON.parse(localStorage.getItem(LS_PROMOS) || '[]'); } catch{ return []; }
  }
  function setPromos(v){ localStorage.setItem(LS_PROMOS, JSON.stringify(v||[])); }

  function getParticipants(promoId){
    try{
      const map = JSON.parse(localStorage.getItem(LS_PROMO_PART) || '{}');
      return Array.isArray(map[promoId]) ? map[promoId] : [];
    }catch{ return []; }
  }
  function setParticipants(promoId, arr){
    let map={};
    try{ map = JSON.parse(localStorage.getItem(LS_PROMO_PART) || '{}') || {}; }catch{ map={}; }
    map[promoId] = arr || [];
    localStorage.setItem(LS_PROMO_PART, JSON.stringify(map));
  }

  // --- Giveaway/Promo UI (override stable) ---
  // showPromoForm poate primi tip: 'promo' / 'giveaway'
  window.showPromoForm = function(type){
    if (!verifyPassword()) return;
    const f = $('promoForm');
    if (f) f.style.display='block';
    if ($('promoType')) $('promoType').value = type || 'promo';
  };

  window.savePromo = function(){
    if (!verifyPassword()) return;

    const title = ($('promoTitle')?.value || '').trim();
    const endDate = ($('promoEndDate')?.value || '').trim();
    const desc = ($('promoDesc')?.value || '').trim();
    const type = ($('promoType')?.value || 'promo').trim();

    const prize1 = ($('promoPrize1')?.value || '').trim();
    const prize2 = ($('promoPrize2')?.value || '').trim();
    const prize3 = ($('promoPrize3')?.value || '').trim();
    const prize4 = ($('promoPrize4')?.value || '').trim();

    if (!title || !endDate){
      alert('Completeaza titlul si data de expirare.');
      return;
    }

    const promos = getPromos();
    const id = Date.now();
    promos.push({ id, type, title, desc, endDate, prizes:{p1:prize1,p2:prize2,p3:prize3,p4:prize4} });
    setPromos(promos);

    // reset form
    if ($('promoForm')) $('promoForm').style.display='none';
    ['promoTitle','promoEndDate','promoDesc','promoPrize1','promoPrize2','promoPrize3','promoPrize4'].forEach(x=>{ if($(x)) $(x).value=''; });

    renderPromos();
    renderLeaderboard();
    alert('Salvat.');
  };

  window.deletePromo = function(promoId){
    if (!verifyPassword()) return;
    if (!confirm('Stergi aceasta promotie/giveaway?')) return;
    const promos = getPromos().filter(p => Number(p.id) !== Number(promoId));
    setPromos(promos);
    // sterge si participantii
    setParticipants(String(promoId), []);
    renderPromos();
    renderLeaderboard();
  };

  window.joinPromo = function(promoId){
    const name = ($('joinName_' + promoId)?.value || '').trim();
    const email = ($('joinEmail_' + promoId)?.value || '').trim();
    const wallet = ($('joinWallet_' + promoId)?.value || '').trim();
    const referral = ($('joinReferral_' + promoId)?.value || '').trim().toUpperCase();

    if (!name || !email || !wallet){
      alert('Completeaza nume, email si wallet.');
      return;
    }

    const promos = getPromos();
    const p = promos.find(x => Number(x.id) === Number(promoId));
    if (!p) return;

    // expirare: dupa data setata nu mai acceptam inscrieri
    const end = new Date(p.endDate + 'T23:59:59');
    if (Date.now() > end.getTime()){
      alert('Aceasta promotie/giveaway este expirata. Nu mai accepta inscrieri.');
      return;
    }

    const participants = getParticipants(String(promoId));

    // validate referral: accepta DOAR coduri existente (generate anterior)
    if (referral){
      const exists = participants.some(u => String(u.code||'').toUpperCase() === referral);
      if (!exists){
        alert('Codul Referal nu este valid. Trebuie sa fie un cod generat anterior.');
        return;
      }
    }

    const code = randCode();
    participants.push({
      id: Date.now() + '_' + Math.random().toString(16).slice(2),
      name, email, wallet,
      code,
      referral: referral || '',
      createdAt: Date.now()
    });
    setParticipants(String(promoId), participants);

    // clear inputs
    ['joinName_','joinEmail_','joinWallet_','joinReferral_'].forEach(pref=>{
      const el=$(pref+promoId); if(el) el.value='';
    });

    renderPromos();
    renderLeaderboard();
    alert('Inscriere reusita! Codul tau: ' + code);
  };

  window.renderPromos = function(){
    const list = $('promoList');
    if (!list) return;
    const promos = getPromos();

    if (!promos.length){
      list.innerHTML = '<div style="opacity:0.85;">Nu exista promotii/giveaway-uri inca.</div>';
      return;
    }

    promos.sort((a,b)=> new Date(a.endDate) - new Date(b.endDate));
    list.innerHTML = '';

    promos.forEach(p=>{
      const end = new Date(p.endDate + 'T23:59:59');
      const expired = Date.now() > end.getTime();
      const part = getParticipants(String(p.id));

      const prizes = p.prizes || {};
      const prizesHtml = (prizes.p1||prizes.p2||prizes.p3||prizes.p4) ? `
        <div style="margin-top:10px; padding:10px; border:1px solid rgba(255,255,255,.10); border-radius:12px; background:rgba(255,255,255,.03);">
          <div style="font-weight:800; margin-bottom:6px;">üèÖ Premii</div>
          <div style="display:grid; grid-template-columns:repeat(auto-fit,minmax(160px,1fr)); gap:8px;">
            <div><b>Loc 1:</b> ${escapeHtml(prizes.p1||'-')}</div>
            <div><b>Loc 2:</b> ${escapeHtml(prizes.p2||'-')}</div>
            <div><b>Loc 3:</b> ${escapeHtml(prizes.p3||'-')}</div>
            <div><b>Loc 4:</b> ${escapeHtml(prizes.p4||'-')}</div>
          </div>
        </div>` : '';

      const partHtml = part.length ? `
        <div style="margin-top:12px; font-size:.95rem;">
          <div style="font-weight:800; margin-bottom:6px;">üë• Participanti (${part.length})</div>
          <div class="table-responsive">
            <table class="lb-table">
              <thead><tr>
                <th>#</th><th>Nume</th><th>Email</th><th>Cod</th><th>Referal</th>
              </tr></thead>
              <tbody>
                ${part.slice().sort((a,b)=>a.createdAt-b.createdAt).map((u,i)=>`
                  <tr>
                    <td>${i+1}</td>
                    <td>${escapeHtml(u.name)}</td>
                    <td class="mono">${escapeHtml(maskEmail(u.email))}</td>
                    <td class="mono">${escapeHtml(u.code)}</td>
                    <td class="mono">${escapeHtml(u.referral||'-')}</td>
                  </tr>`).join('')}
              </tbody>
            </table>
          </div>
        </div>` : `<div style="margin-top:10px; opacity:.85;">Nu exista participanti inca.</div>`;

      const adminBtns = `
        <div class="admin-only" style="margin-top:12px; text-align:right;">
          <button class="news-btn" onclick="deletePromo(${Number(p.id)})">üóëÔ∏è Sterge</button>
        </div>`;

      const card = document.createElement('div');
      card.className = 'news-card neon-glow';
      card.innerHTML = `
        <div style="display:flex; justify-content:space-between; gap:12px; align-items:flex-start;">
          <div>
            <div style="font-size:1.15rem; font-weight:900;">
              ${p.type === 'giveaway' ? 'üéÅ' : 'üì£'} ${escapeHtml(p.title)}
              ${expired ? '<span style="margin-left:8px; font-size:.85rem; color:#ff4d4d;">(Expirat)</span>' : ''}
            </div>
            <div style="opacity:.85; margin-top:6px;">${escapeHtml(p.desc||'')}</div>
            <div style="opacity:.85; margin-top:10px;"><b>Expira:</b> ${escapeHtml(p.endDate)}</div>
          </div>
        </div>

        ${prizesHtml}

        <div style="margin-top:14px; padding:12px; border:1px solid rgba(255,255,255,.10); border-radius:12px; background:rgba(0,0,0,.18);">
          <div style="font-weight:900; margin-bottom:10px;">üìù Inscriere</div>
          <div style="display:grid; grid-template-columns:repeat(auto-fit,minmax(200px,1fr)); gap:10px;">
            <input id="joinName_${p.id}" placeholder="Nume" />
            <input id="joinEmail_${p.id}" placeholder="Email" />
            <input id="joinWallet_${p.id}" placeholder="Wallet" />
            <input id="joinReferral_${p.id}" placeholder="Referal (optional)" />
          </div>
          <div style="margin-top:10px; display:flex; justify-content:flex-end;">
            <button class="news-btn" onclick="joinPromo(${Number(p.id)})" ${expired?'disabled style="opacity:.5; cursor:not-allowed;"':''}>‚úÖ Inscrie-te</button>
          </div>
          <div style="opacity:.75; font-size:.9rem; margin-top:8px;">
            Referal: accepta doar coduri generate anterior (de la participanti deja inscrisi).
          </div>
        </div>

        ${partHtml}
        ${adminBtns}
      `;
      list.appendChild(card);
    });

    // refresh admin visibility
    if (isAdmin()) showAdminOnly(); else hideAdminOnly();
  };

  // --- Leaderboard by referrals (top 1-3 highlighted) ---
  window.renderLeaderboard = function(){
    const root = $('leaderboard');
    if (!root) return;
    const promos = getPromos();
    if (!promos.length){
      root.innerHTML = '<div style="opacity:0.85;">Nu exista clasamente inca.</div>';
      return;
    }

    let html = '';
    promos.sort((a,b)=> new Date(a.endDate) - new Date(b.endDate));

    promos.forEach(p=>{
      const part = getParticipants(String(p.id));
      // compute referral counts by code
      const counts = {};
      part.forEach(u => { counts[String(u.code).toUpperCase()] = 0; });
      part.forEach(u=>{
        const ref = String(u.referral||'').toUpperCase();
        if (ref && typeof counts[ref] === 'number') counts[ref] += 1;
      });

      const rows = part.map(u => ({
        name: u.name,
        email: u.email,
        code: u.code,
        referrals: counts[String(u.code).toUpperCase()] || 0
      })).sort((a,b)=> b.referrals - a.referrals);

      const prizes = p.prizes || {};
      const prizeNote = (prizes.p1||prizes.p2||prizes.p3) ? `
        <div style="opacity:.85; margin-top:6px; font-size:.95rem;">
          <b>Premii:</b> #1 ${escapeHtml(prizes.p1||'-')} ¬∑ #2 ${escapeHtml(prizes.p2||'-')} ¬∑ #3 ${escapeHtml(prizes.p3||'-')} ¬∑ #4 ${escapeHtml(prizes.p4||'-')}
        </div>` : '';

      html += `
        <div class="neon-glow" style="padding:16px; border-radius:16px; margin-bottom:14px; background:rgba(255,255,255,.02);">
          <div style="font-weight:1000; font-size:1.1rem;">
            ${p.type === 'giveaway' ? 'üéÅ' : 'üì£'} ${escapeHtml(p.title)}
          </div>
          ${prizeNote}
          <div class="table-responsive" style="margin-top:12px;">
            <table class="lb-table">
              <thead>
                <tr>
                  <th>Loc</th><th>Nume</th><th>Email</th><th>Cod</th><th>Inscrieri cu codul</th>
                </tr>
              </thead>
              <tbody>
                ${
                  (rows.length ? rows : [{name:'-',email:'',code:'',referrals:0}]).map((r, idx)=>{
                    const cls = idx===0?'lb-top1':idx===1?'lb-top2':idx===2?'lb-top3':'';
                    return `<tr class="${cls}">
                      <td><b>${rows.length? (idx+1): '-'}</b></td>
                      <td>${escapeHtml(r.name)}</td>
                      <td class="mono">${rows.length? escapeHtml(maskEmail(r.email)) : '-'}</td>
                      <td class="mono">${rows.length? escapeHtml(r.code) : '-'}</td>
                      <td><b>${rows.length? r.referrals : '-'}</b></td>
                    </tr>`;
                  }).join('')
                }
              </tbody>
            </table>
          </div>
          <div style="opacity:.75; font-size:.9rem; margin-top:8px;">
            Clasamentul se calculeaza dupa numarul de inscrieri care folosesc codul tau in campul Referal.
          </div>
        </div>
      `;
    });

    root.innerHTML = html;
  };

  // --- Team members: fallback localStorage to avoid (Rules) ---
  function getTeam(){
    try{ return JSON.parse(localStorage.getItem(LS_TEAM) || '[]'); } catch { return []; }
  }
  function setTeam(arr){ localStorage.setItem(LS_TEAM, JSON.stringify(arr||[])); }

  // daca exista UI de "save member", prindem butonul prin id-uri comune
  window.saveTeamMemberLocal = function(){
    if (!verifyPassword()) return;

    const name = ($('memberName')?.value || $('teamName')?.value || '').trim();
    const role = ($('memberRole')?.value || $('teamRole')?.value || '').trim();
    const bio  = ($('memberBio')?.value  || $('teamBio')?.value  || '').trim();
    const joinDate = ($('memberJoinDate')?.value || $('teamJoinDate')?.value || isoToday()).trim();
    const img = ($('memberImage')?.value || $('teamImage')?.value || '').trim();

    if (!name || !role){
      alert('Completeaza minim Nume si Rol.');
      return;
    }

    const team = getTeam();
    team.push({ id: Date.now(), name, role, bio, joinDate, img });
    setTeam(team);

    ['memberName','memberRole','memberBio','memberJoinDate','memberImage','teamName','teamRole','teamBio','teamJoinDate','teamImage'].forEach(id=>{
      const el=$(id); if(el) el.value='';
    });

    if (typeof window.renderTeamLocal === 'function') window.renderTeamLocal();
    alert('Membru salvat (local).');
  };

  // Fortam butonul existent (saveTeamMember) sa foloseasca varianta local (evita Rules)
  window.saveTeamMember = window.saveTeamMemberLocal;
  window.deleteTeamMember = window.deleteTeamMemberLocal;


  window.deleteTeamMemberLocal = function(memberId){
    if (!verifyPassword()) return;
    if (!confirm('Stergi acest membru?')) return;
    const team = getTeam().filter(m => Number(m.id)!==Number(memberId));
    setTeam(team);
    if (typeof window.renderTeamLocal === 'function') window.renderTeamLocal();
  };

  window.renderTeamLocal = function(){
    const list = document.getElementById('teamList') || document.getElementById('teamMembers') || document.getElementById('teamContainer');
    if (!list) return;
    const team = getTeam();
    if (!team.length){
      list.innerHTML = '<div style="opacity:0.85;">Nu exista membri adaugati inca.</div>';
      return;
    }
    list.innerHTML = '';
    team.forEach(m=>{
      const card = document.createElement('div');
      card.className = 'news-card neon-glow';
      card.innerHTML = `
        <div style="display:flex; gap:14px; align-items:flex-start;">
          <div style="width:64px; height:64px; border-radius:14px; overflow:hidden; background:rgba(255,255,255,.05); flex:0 0 auto;">
            ${m.img ? `<img src="${escapeHtml(m.img)}" style="width:100%;height:100%;object-fit:cover;" alt=""/>` : `<div style="display:flex;align-items:center;justify-content:center;height:100%;opacity:.7;">üë§</div>`}
          </div>
          <div style="flex:1;">
            <div style="font-weight:1000; font-size:1.05rem;">${escapeHtml(m.name)}</div>
            <div style="opacity:.85; margin-top:4px;">${escapeHtml(m.role)}</div>
            ${m.bio ? `<div style="opacity:.8; margin-top:8px;">${escapeHtml(m.bio)}</div>`:''}
            <div style="opacity:.7; margin-top:8px; font-size:.9rem;">üìÖ ${escapeHtml(m.joinDate||'')}</div>
          </div>
        </div>
        <div class="admin-only" style="display:flex; justify-content:flex-end; margin-top:12px;">
          <button class="news-btn" onclick="deleteTeamMemberLocal(${Number(m.id)})">üóëÔ∏è Sterge</button>
        </div>
      `;
      list.appendChild(card);
    });

    if (isAdmin()) showAdminOnly(); else hideAdminOnly();
  };

  // Incarca giveaway/promo + leaderboard la intrare in sectiune
  const origShowSection = window.showSection;
  window.showSection = function(sectionId){
    if (typeof origShowSection === 'function') origShowSection(sectionId);
    if (sectionId === 'giveaway'){
      try{ renderPromos(); renderLeaderboard(); }catch(e){ console.warn(e); }
    }
    if (sectionId === 'whitepaper'){
      try{ renderTeamLocal(); }catch(e){}
    }
  };

  // --- Contact privacy checkbox fix ---
  function patchContact(){
    // cauta formularul de contact si checkbox-ul
    const form = document.getElementById('quickContactForm') || document.querySelector('form#contactForm') || document.querySelector('form[data-contact]');
    const checkbox = document.getElementById('privacyAgree') || document.getElementById('confAgree') || document.querySelector('input[type="checkbox"][name*="conf"]') || document.querySelector('input[type="checkbox"][id*="agree"]');
    const msg = document.getElementById('contactMsg') || document.getElementById('contactStatus') || document.querySelector('#contact .form-msg');

    if (!form) return;

    form.addEventListener('submit', (e)=>{
      e.preventDefault();
      const agreed = checkbox ? checkbox.checked : false;
      if (!agreed){
        alert('Bifeaza acordul de confidentialitate.');
        if (msg) { msg.textContent='Bifeaza acordul de confidentialitate.'; msg.style.color='#ff4d4d'; }
        return;
      }
      // Daca proiectul tau trimitea prin fetch, aici pastram comportamentul existent (daca exista handler).
      // Fallback: mailto
      const name = (document.getElementById('contactName')?.value || '').trim();
      const email = (document.getElementById('contactEmail')?.value || '').trim();
      const message = (document.getElementById('contactMessage')?.value || '').trim();

      const subj = encodeURIComponent('StancuBYT | Contact');
      const body = encodeURIComponent(`Nume: ${name}\nEmail: ${email}\n\nMesaj:\n${message}`);
      window.location.href = `mailto:contact@stancubyt.com?subject=${subj}&body=${body}`;
      if (msg){ msg.textContent='Se deschide clientul de email pentru trimitere.'; msg.style.color='#00ff88'; }
    }, {capture:true});
  }
  document.addEventListener('DOMContentLoaded', patchContact);

  // --- Stats + total supply: robust refresh if API key missing ---
  const origFetchAllData = window.fetchAllData;
  window.fetchAllData = async function(){
    if (typeof origFetchAllData === 'function'){
      try{ await origFetchAllData(); }catch(e){ console.warn(e); }
    }
    // daca supplyValue a ramas "Se incarca..." si nu avem cheie, explicam
    const supply = document.getElementById('supplyValue');
    if (supply && /incar/i.test(supply.textContent||'') && (!window.ETHERSCAN_API_KEY || window.ETHERSCAN_API_KEY==='YOUR_ETHERSCAN_API_KEY')){
      supply.textContent = 'Seteaza ETHERSCAN_API_KEY';
    }
  };

})();
</script>
<script>
/* ============================================================
   SBYT V4 PATCH (Firebase Auth + Firestore cross-device + Etherscan live)
   Admin account: stancubyt@gmail.com
   ============================================================ */

(function(){
  // ---------- Helpers ----------
  function $(id){ return document.getElementById(id); }
  function escapeHtml(str){
    return String(str ?? '').replace(/[&<>"'`=\/]/g, s => ({
      '&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;','`':'&#96;','=':'&#61;','/':'&#47;'
    }[s]));
  }
  function maskEmail(email){
    if (!email || typeof email !== 'string') return '';
    const [u, d] = email.split('@');
    if (!d) return email;
    const left = u.length <= 2 ? (u[0] + '*') : (u.slice(0,2) + '*'.repeat(Math.min(6, u.length-2)));
    return `${left}@${d}`;
  }
  function isExpired(endDate){
    if (!endDate) return false;
    const end = new Date(endDate + 'T23:59:59');
    return new Date() > end;
  }
  function uidSafe(){ try{ return firebase?.auth()?.currentUser?.uid || null; }catch(e){ return null; } }

  // ---------- Firebase presence ----------
  function hasFirestore(){
    try{ return typeof firebase !== 'undefined' && !!firebase.firestore; }catch(e){ return false; }
  }
  function db(){ return firebase.firestore(); }

  // ---------- Etherscan LIVE ----------
  // IMPORTANT: set your key (optional) in localStorage 'SBYT_ETHERSCAN_KEY' or edit below.
  const CONTRACT_ADDR = "0x44Cf220399be798baeaE45fd7C4fF44623713833";
  const ETHERSCAN_KEY = (localStorage.getItem('SBYT_ETHERSCAN_KEY') || '').trim(); // leave blank if you want (may be rate-limited)
  async function fetchEtherscan(url){
    const r = await fetch(url, { cache:'no-store' });
    if (!r.ok) throw new Error('Etherscan HTTP ' + r.status);
    return await r.json();
  }
  function formatTokensFromWei(weiStr, decimals=18){
    try{
      const s = String(weiStr || '0');
      // simple big int formatting without floating errors
      const pad = decimals;
      const neg = s.startsWith('-');
      const x = neg ? s.slice(1) : s;
      const z = x.padStart(pad+1,'0');
      const intPart = z.slice(0, -pad);
      const frac = z.slice(-pad).replace(/0+$/,'');
      const out = frac ? `${intPart}.${frac}` : intPart;
      return neg ? '-' + out : out;
    }catch(e){ return String(weiStr||'0'); }
  }
  async function updateTotalSupplyReal(){
    // tries stats/tokensupply
    const el = document.querySelector('[data-total-supply-real], #totalSupplyReal, #totalSupplyRealValue, #totalSupplyRealText');
    try{
      const j = await etherscanProxyRequest('stats','tokensupply',{ contractaddress: CONTRACT_ADDR });
      if (j && j.status === "1" && j.result){
        const val = formatTokensFromWei(j.result, 18);
        const pretty = Number(val).toLocaleString(undefined, { maximumFractionDigits: 4 });
        if (el) el.textContent = pretty + " SBYT";
        const el2 = document.getElementById('totalSupplyReal');
        if (el2) el2.textContent = pretty + " SBYT";
      }
    }catch(e){
      // keep existing UI if any
    }
  }
  async function updateStatsFromEtherscan(){
    // Minimal live update for supply + (optional) holders/transfers if elements exist in page
    await updateTotalSupplyReal();

    // holders count: omitted (endpoint often restricted); keep UI as-is if present.

// transfers count (account/tokentx)
try{
  const j = await etherscanProxyRequest('account','tokentx',{ contractaddress: CONTRACT_ADDR, page: 1, offset: 1, sort: 'desc' });
  // Etherscan returns array in result; total count not provided. We'll approximate by reading a separate element if any.
  // If you need exact transfers count, store it server-side. Here we just mark "LIVE".
  const elT = document.getElementById('totalTransfers');
  if (elT) elT.textContent = 'LIVE';
}catch(e){ }
}

  // ---------- Contact checkbox FIX ----------
  function patchQuickContact(){
    // If you had a handler that blocks even when checked, we ensure checkbox is read correctly.
    const form = document.querySelector('#quickContactForm, form[data-quick-contact]');
    if (!form) return;

    const agree = form.querySelector('input[type="checkbox"][name="privacy"], #privacyAgree, #agreePrivacy');
    const msg = form.querySelector('#quickContactMsg, .quick-contact-msg');

    form.addEventListener('submit', function(ev){
      if (agree && !agree.checked){
        ev.preventDefault();
        if (msg) { msg.textContent = "Bifeaza acordul de confidentialitate"; msg.style.color = "#ff4d4d"; }
        return;
      }
      // allow submit; if no backend, fallback mailto
      // (do not prevent default here)
    }, true);
  }

  // ---------- Firestore data model ----------
  // Collection: promos (docs: {type:'promo'|'giveaway', title, startDate, endDate, prizes:{p1,p2,p3,p4}, createdAt})
  // Subcollection: promos/{id}/participants (docs: {email, code, referral, createdAt})
  // Collection: announcements, news, team (optional if present in your UI)

  async function loadPromosFS(){
    if (!hasFirestore()) return null;
    const snap = await db().collection('promos').orderBy('createdAt','desc').get();
    const arr = [];
    snap.forEach(d => {
      const x = d.data() || {};
      arr.push({ id: d.id, ...x });
    });
    return arr;
  }
  async function loadParticipantsFS(promoId){
    if (!hasFirestore()) return [];
    const snap = await db().collection('promos').doc(promoId).collection('participants').orderBy('createdAt','asc').get();
    const arr = [];
    snap.forEach(d => arr.push({ id:d.id, ...(d.data()||{}) }));
    return arr;
  }
  async function addParticipantFS(promoId, participant){
    if (!hasFirestore()) throw new Error("Firestore indisponibil");
    const ref = db().collection('promos').doc(promoId).collection('participants');
    const doc = await ref.add({ ...participant, createdAt: firebase.firestore.FieldValue.serverTimestamp() });
    return doc.id;
  }
  async function deletePromoFS(promoId){
    if (!hasFirestore()) throw new Error("Firestore indisponibil");
    // delete doc (participants subcollection remains unless you use a function); UI-level delete only
    await db().collection('promos').doc(promoId).delete();
  }

  // ---------- Referral ranking ----------
  function buildRanking(participants){
    // points for a participant = how many entries used their code as referral
    const byReferral = new Map(); // referralCode -> count
    participants.forEach(p=>{
      const ref = (p.referral || '').trim();
      if (!ref) return;
      byReferral.set(ref, (byReferral.get(ref)||0)+1);
    });

    const arr = participants.map(p=>{
      const code = (p.code || '').trim();
      const points = code ? (byReferral.get(code) || 0) : 0;
      return { ...p, points };
    }).sort((a,b)=> (b.points - a.points) || String(a.email||'').localeCompare(String(b.email||'')));

    return arr;
  }

  // ---------- UI render: leaderboard per promo ----------
  async function renderLeaderboardPerPromo(){
    const lb = $('leaderboard');
    if (!lb) return;

    // load promos from Firestore if possible; else fallback to existing getPromos()
    let promos = null;
    try{
      promos = await loadPromosFS();
    }catch(e){ promos = null; }

    if (!promos){
      // fallback to legacy local promos if they exist
      try{ promos = (window.getPromos ? window.getPromos() : []); }catch(e){ promos = []; }
      // normalize ids
      promos = (promos||[]).map((p, i)=> ({ id: p.id || p.promoId || ('local_'+i), ...p }));
    }

    if (!promos.length){
      lb.innerHTML = `<div style="opacity:0.85;">Nu exista giveaway/promotii inca.</div>`;
      return;
    }

    let out = '';
    for (const p of promos){
      const title = p.title || p.name || 'Fara titlu';
      const type = p.type || p.promoType || 'promo';
      const endDate = p.endDate || p.end || '';
      let participants = [];

      try{
        participants = await loadParticipantsFS(p.id);
      }catch(e){
        // fallback local participants if exists
        try{
          if (window.getParticipants) participants = window.getParticipants(p.id) || [];
          else participants = p.participants || [];
        }catch(err){ participants = p.participants || []; }
      }

      const rank = buildRanking(participants);
      const prizes = p.prizes || { p1:p.prize1, p2:p.prize2, p3:p.prize3, p4:p.prize4 };

      out += `<div class="data-visualization neon-glow" style="margin-top:1rem; padding:1rem;">
        <div style="display:flex; justify-content:space-between; gap:12px; flex-wrap:wrap;">
          <div>
            <div style="font-weight:800; font-size:1.05rem;">${type === 'giveaway' ? 'üèÜ Giveaway' : 'üéÅ Promotie'}: ${escapeHtml(title)}</div>
            <div style="opacity:0.8; font-size:0.9rem;">Expira: <b>${escapeHtml(endDate || '-')}</b></div>
          </div>
          <div style="opacity:0.9; font-size:0.9rem;">
            <div><b>Premii:</b></div>
            <div>1: ${escapeHtml(prizes?.p1 || '-')} | 2: ${escapeHtml(prizes?.p2 || '-')} | 3: ${escapeHtml(prizes?.p3 || '-')} | 4: ${escapeHtml(prizes?.p4 || '-')}</div>
          </div>
        </div>

        ${rank.length ? `
          <div class="table-container" style="margin-top:0.8rem;">
            <table class="whitepaper-table">
              <tr><th>#</th><th>Email</th><th>Cod</th><th>Referral folosit</th><th>Puncte</th></tr>
              ${rank.map((u, i)=>{
                const cls = (i===0) ? 'style="background:rgba(255,215,0,0.15); font-weight:800;"'
                          : (i===1) ? 'style="background:rgba(192,192,192,0.12); font-weight:800;"'
                          : (i===2) ? 'style="background:rgba(205,127,50,0.12); font-weight:800;"'
                          : '';
                return `<tr ${cls}>
                  <td>${i+1}</td>
                  <td>${escapeHtml(maskEmail(u.email||''))}</td>
                  <td><code>${escapeHtml(u.code||'')}</code></td>
                  <td><code>${escapeHtml((u.referral||'').trim() || '-')}</code></td>
                  <td><b>${Number(u.points||0)}</b></td>
                </tr>`;
              }).join('')}
            </table>
          </div>
        ` : `<div style="margin-top:0.8rem; opacity:0.85;">Nu exista participanti inca.</div>`}
      </div>`;
    }

    lb.innerHTML = out;
  }

  // Override old leaderboard renderer
  window.renderLeaderboard = function(){ renderLeaderboardPerPromo(); };

  // ---------- Enforce expiry + referral validation on join ----------
  // If your existing join handler uses window.joinPromo(promoId, data), we wrap it.
  const prevJoin = window.joinPromo;
  window.joinPromo = async function(promoId, data){
    // data: {email, code, referral, ...}
    try{
      // load promo to check expiry
      let promo = null;
      if (hasFirestore()){
        const doc = await db().collection('promos').doc(promoId).get();
        if (doc.exists) promo = { id: doc.id, ...(doc.data()||{}) };
      }
      if (!promo){
        // fallback legacy
        const promos = window.getPromos ? window.getPromos() : [];
        promo = (promos||[]).find(x => (x.id===promoId || x.promoId===promoId));
      }
      if (promo && isExpired(promo.endDate || promo.end)){
        alert('Inscrierile sunt inchise. Giveaway/Promotia a expirat.');
        return;
      }

      // referral must exist (generated previously)
      const referral = (data?.referral || '').trim();
      if (referral){
        let allCodes = new Set();
        if (hasFirestore()){
          const parts = await loadParticipantsFS(promoId);
          parts.forEach(p => { if (p.code) allCodes.add(String(p.code).trim()); });
        }else{
          const parts = window.getParticipants ? (window.getParticipants(promoId)||[]) : [];
          parts.forEach(p => { if (p.code) allCodes.add(String(p.code).trim()); });
        }
        if (!allCodes.has(referral)){
          alert('Cod referral invalid. Introdu un cod existent (generat anterior).');
          return;
        }
      }

      // store participant in Firestore if available (cross-device)
      if (hasFirestore()){
        await addParticipantFS(promoId, {
          email: String(data?.email || '').trim(),
          code: String(data?.code || '').trim(),
          referral: referral
        });
        // refresh leaderboard
        renderLeaderboardPerPromo();
        // refresh promo lists if you render them elsewhere
        if (window.renderPromos) window.renderPromos();
        return;
      }

      // fallback to old behavior
      if (typeof prevJoin === 'function') return prevJoin(promoId, data);
    } catch (e){
      // fallback to old behavior
      if (typeof prevJoin === 'function') return prevJoin(promoId, data);
      console.error(e);
      alert('Eroare la inscriere. Verifica setarile Firebase/Rules.');
    }
  };

  // ---------- Admin-only add/delete for promos (Firestore) ----------
  const prevSavePromo = window.savePromo;
  window.savePromo = async function(){
    // expects existing form fields; we keep your UI but save to Firestore if admin
    try{
      if (!window.__SBYT_ADMIN){
        alert('Actiune permisa doar administratorului. Autentifica-te.');
        return;
      }
      // read fields if exist
      const type = ($('promoType')?.value || 'promo').trim();
      const title = ($('promoTitle')?.value || '').trim();
      const startDate = ($('promoStart')?.value || $('promoStartDate')?.value || '').trim();
      const endDate = ($('promoEnd')?.value || $('promoEndDate')?.value || '').trim();

      const p1 = ($('prize1')?.value || $('promoPrize1')?.value || '').trim();
      const p2 = ($('prize2')?.value || $('promoPrize2')?.value || '').trim();
      const p3 = ($('prize3')?.value || $('promoPrize3')?.value || '').trim();
      const p4 = ($('prize4')?.value || $('promoPrize4')?.value || '').trim();

      if (!title || !endDate){
        alert('Completeaza minim Titlu si Data expirarii.');
        return;
      }

      if (hasFirestore()){
        await db().collection('promos').add({
          type,
          title,
          startDate: startDate || null,
          endDate,
          prizes: { p1, p2, p3, p4 },
          createdAt: firebase.firestore.FieldValue.serverTimestamp(),
          createdBy: uidSafe() || null
        });
        // hide form if exists
        const f = $('promoForm'); if (f) f.style.display='none';
        // refresh
        renderLeaderboardPerPromo();
        if (window.renderPromos) window.renderPromos();
        alert('Salvat in Firebase (cross-device).');
        return;
      }

      if (typeof prevSavePromo === 'function') return prevSavePromo();
    } catch(e){
      console.error(e);
      alert('Eroare la salvare promotie/giveaway (Rules/Auth). Vezi regulile Firestore.');
    }
  };

  // delete promo/giveaway
  window.deletePromo = async function(promoId){
    try{
      if (!window.__SBYT_ADMIN){
        alert('Actiune permisa doar administratorului. Autentifica-te.');
        return;
      }
      if (!confirm('Stergi acest giveaway/promotie?')) return;
      if (hasFirestore()){
        await deletePromoFS(promoId);
        renderLeaderboardPerPromo();
        if (window.renderPromos) window.renderPromos();
        return;
      }
      // fallback legacy
      if (window.deletePromoLocal) return window.deletePromoLocal(promoId);
    }catch(e){
      console.error(e);
      alert('Eroare la stergere (Rules).');
    }
  };

  // ---------- Init ----------
  document.addEventListener('DOMContentLoaded', ()=>{
    
    patchQuickContact();
    patchAddGiveawayButton();
    printRulesHint();

    // leaderboard + stats live
    try{ renderLeaderboardPerPromo(); }catch(e){}
    try{ updateStatsFromEtherscan(); }catch(e){}
  });

})();
</script>
<script>
/* ============================
   STBYT PATCH v1 (2025-12-25)
   Fix: admin auth, Firestore collections (promos, stats), remove Ethplorer/CMC embeds, stable updates.
   ============================ */

(function(){
  const ADMIN_EMAIL = "stancubyt@gmail.com";
  const TOKEN_ADDR = "0x44Cf220399be798baeaE45fd7C4fF44623713833";
  const ETHERSCAN_PROXY = "https://europe-west1-stancubyt-fc2b9.cloudfunctions.net/etherscanProxy";

  // helpers
  const $ = (id)=>document.getElementById(id);
  const now = ()=>Date.now();
  const rid = ()=> (now().toString(36)+Math.random().toString(36).slice(2,10)).toUpperCase();

  function maskEmail(email){
    email = String(email||"").trim();
    const [u,d] = email.split("@");
    if(!u || !d) return email;
    const u2 = u.length<=2 ? (u[0]||"*")+"*" : u.slice(0,2)+"***";
    const d2 = d.replace(/(^.).*?(\..+$)/, "$1***$2");
    return `${u2}@${d2}`;
  }

  // firebase globals (compatible with old code)
  const auth = ()=> (window.firebase?.auth ? window.firebase.auth() : null);
  const fs = ()=> (window.firebase?.firestore ? window.firebase.firestore() : null);

  // admin state
  window.__STBYT_IS_ADMIN__ = false;

  function setAdminUI(isAdmin){
    window.__STBYT_IS_ADMIN__ = !!isAdmin;
    document.querySelectorAll(".admin-only").forEach(el=>{
      el.style.display = isAdmin ? "" : "none";
    });
    const badge = $("adminStatusBadge");
    if(badge){
      badge.textContent = isAdmin ? "‚úÖ Autentificat (Admin)" : "üîí Neautentificat";
      badge.style.color = isAdmin ? "#00ff9c" : "#ffb84d";
    }
  }

  // override admin sign-in (fix invalid-email by validation)
  window.adminSignIn = async function(){
    try{
      const a = auth();
      if(!a) return alert("Firebase Auth nu este incarcat.");
      const emailRaw = ($("adminEmail")?.value || "").trim();
      const email = emailRaw.replace(/\s+/g,"");
      const pass = ($("adminPass")?.value || "");
      const msg = $("adminLoginMsg");

      const emailOk = /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
      if(!emailOk){
        if(msg){ msg.style.color="#ff4d4d"; msg.textContent="Email invalid. Scrie ex: stancubyt@gmail.com"; }
        return;
      }
      if(!pass){
        if(msg){ msg.style.color="#ff4d4d"; msg.textContent="Completeaza parola."; }
        return;
      }

      await a.signInWithEmailAndPassword(email, pass);
      if(msg){ msg.style.color="#00ff9c"; msg.textContent="Autentificare reusita."; }
    }catch(e){
      const msg = $("adminLoginMsg");
      if(msg){ msg.style.color="#ff4d4d"; msg.textContent="Eroare autentificare: "+(e?.message||e); }
      console.error("adminSignIn error:", e);
    }
  };

  window.adminSignOut = async function(){
    try{
      const a = auth();
      if(!a) return;
      await a.signOut();
    }catch(e){
      console.error("adminSignOut:", e);
    }
  };

  // unified admin guard (NO local password)
  window.ensureAdminAuth = async function(){
    const a = auth();
    if(!a || !a.currentUser){
      alert("Trebuie sa fii logat ca admin (Firebase).");
      location.hash = "#prezentare";
      const el = $("admin-login"); if(el) el.scrollIntoView({behavior:"smooth"});
      return false;
    }
    const email = (a.currentUser.email||"").toLowerCase();
    if(email !== ADMIN_EMAIL.toLowerCase()){
      alert("Contul logat nu are drepturi de administrator.");
      return false;
    }
    return true;
  };

  // some older code calls verifyPassword()
  window.verifyPassword = function(){
    if(window.__STBYT_IS_ADMIN__) return true;
    alert("Trebuie sa fii logat ca admin (Firebase).");
    location.hash = "#prezentare";
    return false;
  };

  // ===== Firestore doc-based storage =====
  async function statsDocGet(id){
    const db = fs(); if(!db) throw new Error("Firestore not loaded");
    return await db.collection("stats").doc(id).get();
  }
  async function statsDocSet(id, data, merge=true){
    const db = fs(); if(!db) throw new Error("Firestore not loaded");
    return await db.collection("stats").doc(id).set(data, {merge});
  }
  function statsDocListen(id, onData){
    const db = fs(); if(!db) return ()=>{};
    return db.collection("stats").doc(id).onSnapshot(snap=>{
      onData(snap.exists ? snap.data() : {});
    }, err=>{
      console.error(id+" listen:", err);
      // don't crash UI
    });
  }

  // ===== NEWS (stats/news: {items:[...]}) =====
  function renderNewsFromDoc(docData){
    const items = Array.isArray(docData?.items) ? docData.items.slice() : [];
    // sort pinned then createdAt desc
    items.sort((a,b)=>{
      if(!!a.pinned !== !!b.pinned) return a.pinned ? -1 : 1;
      return Number(b.createdAt||0)-Number(a.createdAt||0);
    });
    // reuse existing renderer if exists
    if(typeof window.renderNews === "function"){
      window.renderNews(items.map(x=>({ _id:x.id, ...x, date:x.createdAt })));
      return;
    }
    const container = $("newsList") || $("newsContainer") || $("newsGrid");
    if(!container) return;
    container.innerHTML="";
    items.forEach(it=>{
      const div=document.createElement("div");
      div.className="news-item";
      div.innerHTML = `
        <h3>${(it.title||"")}</h3>
        <p>${(it.content||"")}</p>
        ${window.__STBYT_IS_ADMIN__ ? `<button class="news-btn" onclick="deleteNewsDoc('${it.id}')">üóëÔ∏è Sterge</button>`:""}
      `;
      container.appendChild(div);
    });
  }

  window.loadNews = function(){
    // start listener
    statsDocListen("news", data=>renderNewsFromDoc(data));
  };

  window.saveNews = async function(){
    const ok = await window.ensureAdminAuth(); if(!ok) return;
    const title = ($("newsTitle")?.value||"").trim();
    const content = ($("newsContent")?.value||"").trim();
    const type = ($("newsType")?.value||"update");
    const pinned = !!$("pinNews")?.checked;

    if(!title || !content){
      alert("Completeaza titlu si continut.");
      return;
    }

    const snap = await statsDocGet("news");
    const current = snap.exists && Array.isArray(snap.data().items) ? snap.data().items : [];
    const item = { id: rid(), title, content, type, pinned, createdAt: now() };
    current.push(item);
    await statsDocSet("news", { items: current }, true);
    // clear
    if($("newsTitle")) $("newsTitle").value="";
    if($("newsContent")) $("newsContent").value="";
    if($("pinNews")) $("pinNews").checked=false;
    alert("Stire/Noutate salvata.");
  };

  window.deleteNewsDoc = async function(id){
    const ok = await window.ensureAdminAuth(); if(!ok) return;
    if(!confirm("Stergi aceasta stire?")) return;
    const snap = await statsDocGet("news");
    const current = snap.exists && Array.isArray(snap.data().items) ? snap.data().items : [];
    const next = current.filter(x=>x.id!==id);
    await statsDocSet("news", { items: next }, true);
  };

  // ===== TEAM (stats/team: {members:[...]}) =====
  function renderTeamFromDoc(docData){
    const members = Array.isArray(docData?.members) ? docData.members.slice() : [];
    members.sort((a,b)=>Number(b.createdAt||0)-Number(a.createdAt||0));
    if(typeof window.renderTeam === "function"){
      window.renderTeam(members.map(m=>({ _id:m.id, ...m })));
      return;
    }
    const container = $("teamList") || $("teamContainer");
    if(!container) return;
    container.innerHTML="";
    members.forEach(m=>{
      const div=document.createElement("div");
      div.className="team-card";
      div.innerHTML = `
        <strong>${m.name||""}</strong> - ${m.role||""}<br/>
        <small>${m.joinDate||""}</small>
        ${window.__STBYT_IS_ADMIN__ ? `<div><button class="news-btn" onclick="deleteTeamMember('${m.id}')">üóëÔ∏è Sterge</button></div>`:""}
      `;
      container.appendChild(div);
    });
  }

  window.loadTeam = function(){
    statsDocListen("team", data=>renderTeamFromDoc(data));
  };

  window.saveTeamMember = async function(){
    const ok = await window.ensureAdminAuth(); if(!ok) return;
    const name = ($("teamName")?.value||"").trim();
    const role = ($("teamRole")?.value||"").trim();
    const joinDate = ($("teamJoinDate")?.value||"").trim();
    const avatar = ($("teamAvatar")?.value||"").trim();

    if(!name || !role || !joinDate){
      alert("Completeaza nume, functie si data inscrierii.");
      return;
    }
    const snap = await statsDocGet("team");
    const current = snap.exists && Array.isArray(snap.data().members) ? snap.data().members : [];
    current.push({ id: rid(), name, role, joinDate, avatar: avatar||null, createdAt: now() });
    await statsDocSet("team", { members: current }, true);

    if(typeof window.cancelTeamMember === "function") window.cancelTeamMember();
    alert("Membru salvat (vizibil pe orice device).");
  };

  window.deleteTeamMember = async function(id){
    const ok = await window.ensureAdminAuth(); if(!ok) return;
    if(!confirm("Stergi membrul?")) return;
    const snap = await statsDocGet("team");
    const current = snap.exists && Array.isArray(snap.data().members) ? snap.data().members : [];
    await statsDocSet("team", { members: current.filter(x=>x.id!==id) }, true);
  };

  // ===== VISITS (stats/visits: {count}) =====
  window.updateVisitCounter = async function(){
    const db = fs(); if(!db) return;
    const ref = db.collection("stats").doc("visits");
    try{
      const key = "stbyt_visit_"+new Date().toISOString().slice(0,10);
      if(!localStorage.getItem(key)){
        localStorage.setItem(key,"1");
        await db.runTransaction(async t=>{
          const snap = await t.get(ref);
          const c = snap.exists && typeof snap.data().count==="number" ? snap.data().count : 0;
          t.set(ref, {count: c+1}, {merge:true});
        });
      }
      ref.onSnapshot(s=>{
        const c = s.exists && typeof s.data().count==="number" ? s.data().count : 0;
        const el = $("visitsCounter") || $("visitCounter") || $("visitsCount");
        if(el) el.textContent = String(c);
      });
    }catch(e){
      console.error("visit counter:", e);
    }
  };

  // ===== PROMOS (collection promos) =====
  function promoGetVal(...ids){
    for(const id of ids){
      const el=$(id);
      if(el && typeof el.value!=="undefined") return (el.value||"").trim();
    }
    return "";
  }

  window.savePromo = async function(){
    const ok = await window.ensureAdminAuth(); if(!ok) return;
    const db = fs(); if(!db) return alert("Firestore nu e incarcat.");

    const title = promoGetVal("promoTitle");
    const ends = promoGetVal("promoEnds","promoEndDate","promoEndDateTime");
    const desc = promoGetVal("promoDesc"); // optional
    const p1 = promoGetVal("promoPrize1","prize1","promoPrize");
    const p2 = promoGetVal("promoPrize2","prize2");
    const p3 = promoGetVal("promoPrize3","prize3");
    const p4 = promoGetVal("promoPrize4","prize4");

    if(!title || !ends){
      alert("Completeaza minim Titlu si Data expirarii.");
      return;
    }
    const endsAt = new Date(ends).getTime();
    if(!endsAt || Number.isNaN(endsAt)){
      alert("Data expirarii nu este valida.");
      return;
    }

    try{
      await db.collection("promos").add({
        title,
        desc: desc || "",
        endsAt,
        prizes: { p1: p1||"", p2: p2||"", p3: p3||"", p4: p4||"" },
        createdAt: now(),
        participants: [], // {emailMasked, code, referralCode}
        status: "active"
      });
      if(typeof window.cancelPromo === "function") window.cancelPromo();
      alert("Promotia/Giveaway a fost adaugata.");
    }catch(e){
      console.error("savePromo:", e);
      alert("Eroare la salvare (verifica Firestore Rules pentru promos).");
    }
  };

  window.deletePromoDoc = async function(docId){
    const ok = await window.ensureAdminAuth(); if(!ok) return;
    if(!confirm("Stergi aceasta promotie/giveaway?")) return;
    const db = fs(); if(!db) return;
    try{
      await db.collection("promos").doc(docId).delete();
    }catch(e){
      console.error("delete promo:", e);
      alert("Eroare la stergere (Rules).");
    }
  };

  function renderPromosSnapshot(items){
    // try use existing renderer
    if(typeof window.renderPromos === "function"){
      window.renderPromos(items);
      if(typeof window.renderLeaderboard === "function") window.renderLeaderboard();
      return;
    }
    const container = $("promosList") || $("promoList") || $("promosContainer");
    if(!container) return;
    container.innerHTML="";
    items.forEach(p=>{
      const div=document.createElement("div");
      div.className="promo-card";
      const prizes=p.prizes||{};
      div.innerHTML = `
        <h3>${p.title||""}</h3>
        <p>${p.desc||""}</p>
        <div><small>Expira: ${new Date(p.endsAt).toLocaleString()}</small></div>
        <div style="margin-top:8px;">
          <strong>Premii:</strong>
          <div>1: ${prizes.p1||"-"}</div>
          <div>2: ${prizes.p2||"-"}</div>
          <div>3: ${prizes.p3||"-"}</div>
          <div>4: ${prizes.p4||"-"}</div>
        </div>
        ${window.__STBYT_IS_ADMIN__ ? `<button class="news-btn" onclick="deletePromoDoc('${p._id}')">üóëÔ∏è Sterge</button>`:""}
      `;
      container.appendChild(div);
    });
  }

  function listenPromos(){
    const db = fs(); if(!db) return;
    db.collection("promos").orderBy("createdAt","desc").limit(50).onSnapshot(snap=>{
      const items=[];
      snap.forEach(d=>items.push({_id:d.id, ...d.data()}));
      renderPromosSnapshot(items);
    }, err=>console.error("promos listen:", err));
  }

  // ===== Token stats via etherscanProxy =====
  async function etherscan(module, action, extra={}){
    const params = new URLSearchParams();
    params.set("module", module);
    params.set("action", action);
    if(extra.contractaddress) params.set("contractaddress", extra.contractaddress);
    if(extra.page) params.set("page", String(extra.page));
    if(extra.offset) params.set("offset", String(extra.offset));
    if(extra.sort) params.set("sort", String(extra.sort));
    const url = ETHERSCAN_PROXY + "?" + params.toString();
    const r = await fetch(url);
    if(!r.ok) throw new Error("EtherscanProxy HTTP "+r.status);
    return await r.json();
  }

  async function updateSupplyAndHolders(){
    try{
      const supplyResp = await etherscan("stats","tokensupply",{contractaddress:TOKEN_ADDR});
      const supplyRaw = supplyResp?.result;
      const supply = supplyRaw ? (Number(supplyRaw)/1e18) : null;
      const el = $("totalSupplyReal") || $("totalSupplyRealValue") || $("realTotalSupply");
      if(el && supply!=null) el.textContent = supply.toLocaleString("en-US",{maximumFractionDigits:0})+" SBYT";
    }catch(e){
      console.warn("supply:", e);
    }
    try{
      const holdersResp = await etherscan("stats","tokenholderlist",{contractaddress:TOKEN_ADDR,page:1,offset:1});
      const holders = holdersResp?.result?.length ? holdersResp.result[0]?.HolderCount : null;
      const el = $("holdersCount") || $("totalHolders");
      if(el && holders!=null) el.textContent = String(holders);
    }catch(e){
      // tokenholderlist sometimes not enabled; ignore
    }
  }

  // ETH price + simple chart
  let ethPriceHistory = [];
  function pushEthPrice(point){
    ethPriceHistory.push(point);
    if(ethPriceHistory.length>60) ethPriceHistory.shift();
    // update DOM
    const priceEl = $("livePrice") || $("ethPrice") || $("priceNow");
    if(priceEl) priceEl.textContent = "$"+point.usd.toFixed(2);
    // if chart exists and there is a renderer
    if(typeof window.updateChartWithSeries === "function"){
      window.updateChartWithSeries(ethPriceHistory);
    }
  }

  async function updateEthPrice(){
    const r = await etherscan("stats","ethprice",{});
    const usd = Number(r?.result?.ethusd || r?.result?.ethusd || 0);
    if(usd>0) pushEthPrice({t:now(), usd});
  }

  window.updateLivePriceAndChart = async function(){
    try{
      await updateEthPrice();
    }catch(e){
      console.warn("Live price update error:", e);
    }
  };

  window.updateLivePriceAndStats = async function(){
    await window.updateLivePriceAndChart();
    await updateSupplyAndHolders();
  };

  // Disable Ethplorer usage (CORS/429)
  window.fetchEthplorerTokenInfo = async function(){ return null; };

  // ===== init =====
  function init(){
    const a = auth();
    if(a){
      a.onAuthStateChanged(u=>{
        const isAdmin = !!u && String(u.email||"").toLowerCase()===ADMIN_EMAIL.toLowerCase();
        setAdminUI(isAdmin);
      });
    }

    // start listeners
    window.loadNews();
    window.loadTeam();
    listenPromos();
    try { window.updateVisitsOnce(); } catch(e) { try { updateVisits(); } catch(_) {} }

    // token updates
    updateSupplyAndHolders();
    window.updateLivePriceAndChart();
    setInterval(()=>window.updateLivePriceAndChart(), 60*1000);

    // remove/disable coinmarketcap frame if exists
    document.querySelectorAll("iframe").forEach(fr=>{
      const src = (fr.getAttribute("src")||"");
      if(src.includes("coinmarketcap.com") || src.includes("dex.coinmarketcap.com")) {
        fr.remove();
      }
    });
  }

  if(document.readyState==="loading"){
    document.addEventListener("DOMContentLoaded", init);
  }else{
    init();
  }
})();
</script>
<script>
function updateLivePriceAndStats(){ return updateLivePriceAndChart(); }
</script>
<script>
/* =======================
   STANCUBYT FIX OVERRIDES (fc2b9)
   - price (CoinGecko)
   - visits (hitCounter)
   - news CRUD + emoji + image bg (Firestore+Storage)
   ======================= */
(function() {
  const CONTRACT_ADDRESS = "0x44Cf220399be798baeaE45fd7C4fF44623713833";
  const FUNCTIONS_BASE = "https://europe-west1-stancubyt-fc2b9.cloudfunctions.net";
  const ADMIN_EMAIL = "stancubyt@gmail.com";

  function $(id){ return document.getElementById(id); }
  function safeText(el, txt){ if (el) el.textContent = txt; }
  function isAdminUser(user){
    if(!user || !user.email) return false;
    return String(user.email).toLowerCase() === String(ADMIN_EMAIL).toLowerCase();
  }
  function getDb(){ return (window.firebase && firebase.firestore) ? firebase.firestore() : null; }
  function getAuth(){ return (window.firebase && firebase.auth) ? firebase.auth() : null; }
  function getStorage(){ return (window.firebase && firebase.storage) ? firebase.storage() : null; }

  // -------- VISITS (Cloud Function) --------
  async function updateVisits() {
    // 1) Increment via Cloud Function (ignore response shape)
    try {
      const r = await fetch(FUNCTIONS_BASE + "/hitCounter", { cache: "no-store" });
      // Some deployments may not return JSON; don't let UI break.
      try {
        const j = await r.clone().json();
        const n = (j && (j.count ?? j.visits ?? j.value)) ?? null;
        if (n != null) {
          safeText($("visitCount"), String(n));
          safeText($("visitCounter"), $("visitCounter")?.textContent ? $("visitCounter").textContent : "");
        }
      } catch (_) {}
    } catch (e) {
      console.warn("hitCounter failed:", e);
    }

    // 2) Always update UI from Firestore (source of truth)
    try {
      const db = getDb();
      if (!db) return;
      const ref = db.doc("stats/visits");
      // attach once
      if (!window.__SBYT_VISITS_LISTENING__) {
        window.__SBYT_VISITS_LISTENING__ = true;
        ref.onSnapshot((snap) => {
          const data = snap && snap.data ? snap.data() : null;
          const val = data ? (data.count ?? data.visits ?? data.value ?? data.total ?? null) : null;
          if (val != null) safeText($("visitCount"), String(val));
        }, (err) => {
          console.warn("visits listener error:", err);
        });
      }
      // one-time fetch in case snapshot delayed
      const snap = await ref.get();
      const data = snap && snap.data ? snap.data() : null;
      const val = data ? (data.count ?? data.visits ?? data.value ?? data.total ?? null) : null;
      if (val != null) safeText($("visitCount"), String(val));
    } catch (e) {
      console.warn("visits read failed:", e);
    }
  }

  window.updateVisits = updateVisits;

  
  function updateVisitsOnce(){
    if (window.__SBYT_VISIT_SENT) return;
    window.__SBYT_VISIT_SENT = true;
    return updateVisits();
  }
  window.updateVisitsOnce = updateVisitsOnce;
// Disable legacy password prompt buttons (we use Firebase Auth)
  window.requestPassword = function(){ alert("Autentifica-te ca administrator pentru a adauga/sterge anunturi."); };

  
  
  // -------- PRICE (Real) --------
  // Primary: CoinGecko by contract (works even when DexScreener/GeckoTerminal has no pairs)
  const TOKEN_CONTRACT = "0x44Cf220399be798baeaE45fd7C4fF44623713833";

  // Uniswap v4 position (provided by you). We try to read price from Uniswap interface gateway.
  const UNISWAP_V4_POSITION_ID = "95049";

  async function fetchPriceFromUniswapV4Position() {
    // Uniswap interface gateway (CORS-friendly in most cases)
    const url = "https://interface.gateway.uniswap.org/v1/positions/v4/ethereum/" + encodeURIComponent(UNISWAP_V4_POSITION_ID);
    const r = await fetch(url, { cache: "no-store" });
    if (!r.ok) throw new Error("Uniswap position HTTP " + r.status);
    const j = await r.json();

    // We search for common fields used by the interface responses
    // Examples: { position: { priceUSD: "0.00123" } } or nested: data.position...
    const candidates = [
      j && j.priceUSD,
      j && j.position && j.position.priceUSD,
      j && j.position && j.position.token0PriceUSD,
      j && j.position && j.position.token1PriceUSD,
      j && j.data && j.data.position && j.data.position.priceUSD,
      j && j.data && j.data.position && j.data.position.token0PriceUSD,
      j && j.data && j.data.position && j.data.position.token1PriceUSD,
      j && j.position && j.position.currentPriceUSD,
    ];
    for (const v of candidates) {
      const num = typeof v === "string" ? Number(v) : (typeof v === "number" ? v : NaN);
      if (Number.isFinite(num) && num > 0) return num;
    }
    throw new Error("Uniswap position price missing");
  }

  async function fetchPriceCoinGeckoByContract() {
    const url = "https://api.coingecko.com/api/v3/simple/token_price/ethereum"
      + "?contract_addresses=" + encodeURIComponent(TOKEN_CONTRACT)
      + "&vs_currencies=usd";
    const r = await fetch(url, { cache: "no-store" });
    if (!r.ok) throw new Error("CoinGecko HTTP " + r.status);
    const j = await r.json();
    const key = TOKEN_CONTRACT.toLowerCase();
    const usd = j && j[key] && j[key].usd;
    const num = typeof usd === "number" ? usd : Number(usd);
    if (!Number.isFinite(num) || num <= 0) throw new Error("CoinGecko price missing");
    return num;
  }

  // Fallback: GeckoTerminal pool (if available)
  const GECKO_POOL = "0xabfa4bdb1b4485e0c590bba4adc93a3980f591e4"; // ETH pool address already linked in page

  async function fetchPriceGeckoTerminal() {
    const url = "https://api.geckoterminal.com/api/v2/networks/eth/pools/" + GECKO_POOL;
    const r = await fetch(url, {cache:"no-store"});
    if (!r.ok) throw new Error("GeckoTerminal HTTP " + r.status);
    const j = await r.json();
    const a = j && j.data && j.data.attributes ? j.data.attributes : null;
    // Try multiple possible fields (API may differ)
    const candidates = [
      a && a.base_token_price_usd,
      a && a.quote_token_price_usd,
      a && a.price_in_usd,
      a && a.pool_price_usd,
      a && a.token_price_usd,
    ];
    for (const v of candidates) {
      const num = typeof v === "string" ? Number(v) : (typeof v === "number" ? v : NaN);
      if (Number.isFinite(num) && num > 0) return num;
    }
    throw new Error("GeckoTerminal price missing");
  }

  async function updateTokenPrice() {
    const el = $("liveTokenPrice") || $("currentPrice") || $("tokenPrice");
    const lastEl = $("lastUpdated");
    try {
      let usd = null;
      try {
        usd = await fetchPriceFromUniswapV4Position();
      } catch (e0) {
        try {
          usd = await fetchPriceCoinGeckoByContract();
        } catch (e1) {
          // fallback to pool-based price if CoinGecko doesn't know the token yet
          usd = await fetchPriceGeckoTerminal();
        }
      }
      if (el) el.textContent = "$" + usd.toLocaleString("en-US", { maximumFractionDigits: 10 });
      if (lastEl) lastEl.textContent = "Ultima actualizare: " + new Date().toLocaleTimeString("ro-RO");
    } catch (e) {
      console.warn("price update failed:", e);
      if (el) el.textContent = "-";
      if (lastEl) lastEl.textContent = "Ultima actualizare: --:--:--";
    }
  }

    function startPriceAutoUpdate() {
    updateTokenPrice();
    if (window.__stancu_priceInterval) clearInterval(window.__stancu_priceInterval);
    window.__stancu_priceInterval = setInterval(updateTokenPrice, 60000);
  }
  window.startPriceAutoUpdate = startPriceAutoUpdate;
  window.updateTokenPrice = updateTokenPrice;
// -------- TOTAL SUPPLY (etherscanProxy) --------
  async function updateTotalSupplyReal() {
    const el = $("totalSupplyReal") || $("totalSupply") || $("totalSupplyValue");
    try {
      const url = FUNCTIONS_BASE + "/etherscanProxy?module=stats&action=tokensupply&contractaddress=" + encodeURIComponent(CONTRACT_ADDRESS);
      const r = await fetch(url, {cache:"no-store"});
      const j = await r.json();
      const raw = j && (j.result ?? j.Result ?? j.data) ? String(j.result ?? j.Result ?? j.data) : null;
      if (!raw || raw === "0") return;
      // raw is integer with 18 decimals
      const supply = Number(raw) / 1e18;
      if (Number.isFinite(supply)) safeText(el, supply.toLocaleString("en-US", {maximumFractionDigits: 0}));
    } catch (e) {
      console.warn("totalSupplyReal failed:", e);
    }
  }
  window.updateTotalSupplyReal = updateTotalSupplyReal;

  // -------- NEWS (Firestore + Storage) --------
  function renderNewsList(items, isAdmin) {
    const container = $("newsContainer");
    if (!container) return;

    // sort: pinned first, then newest
    items.sort((a,b)=>{
      const pa = a.pinned ? 1 : 0;
      const pb = b.pinned ? 1 : 0;
      if (pa !== pb) return pb - pa;
      const ta = a.createdAtMs || 0;
      const tb = b.createdAtMs || 0;
      return tb - ta;
    });

    container.innerHTML = "";
    items.forEach(item=>{
      const card = document.createElement("div");
      card.className = "news-card " + (item.type || "news");

      // background image
      if (item.bgUrl) {
        card.style.backgroundImage = `linear-gradient(rgba(0,0,0,.55), rgba(0,0,0,.75)), url('${item.bgUrl}')`;
        card.style.backgroundSize = "cover";
        card.style.backgroundPosition = "center";
      }

      const typeLabel = item.type === "announcement" ? "Anunt" : (item.type === "update" ? "Noutate" : "Stire");
      const when = item.createdAtMs ? new Date(item.createdAtMs).toLocaleString("ro-RO") : "";

      card.innerHTML = `
        <div class="news-card-head">
          <div class="news-type ${item.type || "news"}">${typeLabel}${item.pinned ? " ‚Ä¢ PINNED" : ""}</div>
          <div class="news-date">${(item.emoji ? item.emoji + " " : "")}${when}</div>
        </div>
        <div class="news-card-title">${(item.title || "")}</div>
        <div class="news-card-text">${item.content || ""}</div>
      `;

      if (isAdmin) {
        const del = document.createElement("button");
        del.className = "news-del-btn";
        del.textContent = "üóëÔ∏è Sterge";
        del.onclick = async ()=>{
          if (!confirm("Stergi acest anunt?")) return;
          const db = getDb();
          if (!db) return alert("Firestore indisponibil.");
          try {
            await db.collection("news").doc(item._id).delete();
          } catch (e) {
            console.error("delete news failed:", e);
            alert("Eroare la stergere (rules/permisiuni).");
          }
        };
        card.appendChild(del);
      }

      container.appendChild(card);
    });
  }

  async function uploadNewsImage(file) {
    if (!file) return null;
    const storage = getStorage();
    if (!storage) throw new Error("Storage SDK indisponibil");
    const safeName = (file.name || "img").replace(/[^\w.\-]+/g, "_");
    const path = "news/" + Date.now() + "_" + safeName;
    const ref = storage.ref().child(path);

    // NU blocam publicarea daca upload-ul se blocheaza / esueaza
    try {
      const task = ref.put(file);
      await Promise.race([
        task,
        new Promise((_, rej) => setTimeout(() => rej(new Error("upload-timeout")), 8000))
      ]);
      return await ref.getDownloadURL();
    } catch (e) {
      console.warn("uploadNewsImage failed:", e);
      return null;
    }
  }

  async function adminCreateNews() {
    const auth = getAuth();
    const user = auth && auth.currentUser ? auth.currentUser : null;
    if (!isAdminUser(user)) return alert("Doar admin poate adauga.");

    const addBtn = $("newsAddBtn");
    if (addBtn) { addBtn.disabled = true; addBtn.style.opacity = "0.7"; }

    const title = ($("newsTitleInput") && $("newsTitleInput").value || "").trim();
    const content = ($("newsContentInput") && $("newsContentInput").value || "").trim();
    const emoji = ($("newsEmojiInput") && $("newsEmojiInput").value || "").trim();
    const type = ($("newsTypeInput") && $("newsTypeInput").value) || "news";
    const pinned = !!($("newsPinnedInput") && $("newsPinnedInput").checked);
    const file = $("newsBgInput") && $("newsBgInput").files && $("newsBgInput").files[0] ? $("newsBgInput").files[0] : null;

    if (!title || !content) return alert("Completeaza titlu si continut.");

    const db = getDb();
    if (!db) return alert("Firestore indisponibil.");

    try {
      let bgUrl = null;
      if (file) {
        try {
          bgUrl = await uploadNewsImage(file);
        } catch (upErr) {
          console.warn("upload failed (continuing without image):", upErr);
          bgUrl = null;
        }
      }

      await db.collection("news").add({
        title,
        content,
        emoji: emoji || "",
        type,
        pinned,
        bgUrl: bgUrl || "",
        createdAt: firebase.firestore.FieldValue.serverTimestamp(),
        createdAtMs: Date.now(),
      });

      // reset form
      if ($("newsTitleInput")) $("newsTitleInput").value = "";
      if ($("newsContentInput")) $("newsContentInput").value = "";
      if ($("newsEmojiInput")) $("newsEmojiInput").value = "";
      if ($("newsBgInput")) $("newsBgInput").value = "";
      if ($("newsPinnedInput")) $("newsPinnedInput").checked = false;
    }
    catch (e) {
      console.error("create news failed:", e);
      alert("Eroare la salvare stire (rules/permisiuni).");
    } finally {
      const addBtn2 = $("newsAddBtn");
      if (addBtn2) { addBtn2.disabled = false; addBtn2.style.opacity = "1"; }
    }
  }
  window.adminCreateNews = adminCreateNews;

  function setNewsAdminVisible(isAdmin) {
    const box = $("newsAdminBox");
    if (box) box.style.display = isAdmin ? "block" : "none";
    // hide any legacy admin section if exists
    const legacyAdmin = document.querySelector(".admin-section, #adminPanel, #administratorSection");
    if (legacyAdmin) legacyAdmin.style.display = "none";
  }

  function startNewsRealtime() {
    const db = getDb();
    const container = $("newsContainer");
    if (!db || !container) return;
    try {
      db.collection("news")
        .orderBy("createdAtMs", "desc")
        .limit(50)
        .onSnapshot((snap)=>{
          const items=[];
          snap.forEach(doc=> items.push({_id: doc.id, ...doc.data()}));
          const auth = getAuth();
          const isAdmin = isAdminUser(auth && auth.currentUser);
          renderNewsList(items, isAdmin);
        }, (err)=>{
          console.error("news onSnapshot error:", err);
          container.innerHTML = '<div style="color:#ffb3b3; padding:12px; border:1px solid rgba(255,255,255,.15); border-radius:12px; background:rgba(0,0,0,.35)">Eroare la √ÆncƒÉrcare »ôtiri (rules/permisiuni). Verifica in Firestore Rules ca <b>match /news/{id} allow read: if true;</b></div>';
        });
    } catch (e) {
      console.error("startNewsRealtime failed:", e);
    }
  }

  function wireAuthUI() {
    const auth = getAuth();
    if (!auth) return;

    // show admin box if admin
    auth.onAuthStateChanged((user)=>{
      const isAdmin = isAdminUser(user);
      setNewsAdminVisible(isAdmin);

      // also re-render delete buttons after login
      // force refresh by re-reading current DOM content
      // (snapshot callback will also run)
    });

    // attach login form if present
    const loginBtn = $("adminLoginBtn");
    const logoutBtn = $("adminLogoutBtn");

    if (loginBtn) {
      loginBtn.onclick = async ()=>{
        const email = ($("adminEmail") && $("adminEmail").value || "").trim();
        const pass  = ($("adminPassword") && $("adminPassword").value || "").trim();
        try {
          await auth.signInWithEmailAndPassword(email, pass);
        } catch (e) {
          console.error("login failed:", e);
          alert("Eroare autentificare: " + (e && e.message ? e.message : e));
        }
      };
    }
    if (logoutBtn) {
      logoutBtn.onclick = async ()=> { try { await auth.signOut(); } catch(_){} };
    }
  }

  function init() {
    // remove junk texts if still present
    try {
      document.body.innerHTML = document.body.innerHTML
        .replace(/Particles Background Contor Vizite[^<]*Scientific Navigation/g, "")
        .replace(/coinmarketcap LIVE/g, "");
    } catch(_) {}

    try { updateVisitsOnce(); } catch(e) { try { updateVisits(); } catch(_) {} }
    startPriceAutoUpdate();
    updateTotalSupplyReal();
    wireAuthUI();
    startNewsRealtime();

    // if there is a visible price placeholder under hero text
    const heroPrice = $("liveTokenPrice") || $("currentPrice");
    if (heroPrice && heroPrice.textContent.trim() === "") heroPrice.textContent = "Loading...";
  }

  window.addEventListener("load", init);
})();
</script>

</body>
<script>
/* =======================
   STANCUBYT FIX OVERRIDES (fc2b9)
   - price (CoinGecko)
   - visits (hitCounter)
   - news CRUD + emoji + image bg (Firestore+Storage)
   ======================= */
(function() {
  const CONTRACT_ADDRESS = "0x44Cf220399be798baeaE45fd7C4fF44623713833";
  const FUNCTIONS_BASE = "https://europe-west1-stancubyt-fc2b9.cloudfunctions.net";
  const ADMIN_EMAIL = "stancubyt@gmail.com";

  function $(id){ return document.getElementById(id); }
  function safeText(el, txt){ if (el) el.textContent = txt; }
  function isAdminUser(user){
    return !!(user && user.email && String(user.email).toLowerCase() === ADMIN_EMAIL);
  }
  function getDb(){ return (window.firebase && firebase.firestore) ? firebase.firestore() : null; }
  function getAuth(){ return (window.firebase && firebase.auth) ? firebase.auth() : null; }
  function getStorage(){ return (window.firebase && firebase.storage) ? firebase.storage() : null; }

  // -------- VISITS (Cloud Function) --------
  async function updateVisits() {
    try {
      const r = await fetch(FUNCTIONS_BASE + "/hitCounter", {cache:"no-store"});
      const j = await r.json();
      const n = (j && (j.count ?? j.visits ?? j.value)) ?? null;
      if (n != null) safeText($("visitCount"), String(n));
    } catch (e) {
      console.warn("hitCounter failed:", e);
    }
  }
  window.updateVisits = updateVisits;

  // -------- PRICE (CoinGecko token_price) --------
  async function fetchPriceCoinGecko() {
    const url = "https://api.coingecko.com/api/v3/simple/token_price/ethereum"
      + "?contract_addresses=" + encodeURIComponent(CONTRACT_ADDRESS)
      + "&vs_currencies=usd";
    const r = await fetch(url, {cache:"no-store"});
    if (!r.ok) throw new Error("CoinGecko HTTP " + r.status);
    const j = await r.json();
    const key = CONTRACT_ADDRESS.toLowerCase();
    const usd = j && j[key] && typeof j[key].usd === "number" ? j[key].usd : null;
    if (usd == null) throw new Error("CoinGecko no price for contract");
    return usd;
  }

  
  function startPriceAutoUpdate() {
    updateTokenPrice();
    if (window.__stancu_priceInterval) clearInterval(window.__stancu_priceInterval);
    window.__stancu_priceInterval = setInterval(updateTokenPrice, 60000);
  }
  window.startPriceAutoUpdate = startPriceAutoUpdate;
  window.updateTokenPrice = updateTokenPrice;

  // -------- TOTAL SUPPLY (etherscanProxy) --------
  async function updateTotalSupplyReal() {
    const el = $("totalSupplyReal") || $("totalSupply") || $("totalSupplyValue");
    try {
      const url = FUNCTIONS_BASE + "/etherscanProxy?module=stats&action=tokensupply&contractaddress=" + encodeURIComponent(CONTRACT_ADDRESS);
      const r = await fetch(url, {cache:"no-store"});
      const j = await r.json();
      const raw = j && (j.result ?? j.Result ?? j.data) ? String(j.result ?? j.Result ?? j.data) : null;
      if (!raw || raw === "0") return;
      // raw is integer with 18 decimals
      const supply = Number(raw) / 1e18;
      if (Number.isFinite(supply)) safeText(el, supply.toLocaleString("en-US", {maximumFractionDigits: 0}));
    } catch (e) {
      console.warn("totalSupplyReal failed:", e);
    }
  }
  window.updateTotalSupplyReal = updateTotalSupplyReal;

  // -------- NEWS (Firestore + Storage) --------
  function renderNewsList(items, isAdmin) {
    const container = $("newsContainer");
    if (!container) return;

    // sort: pinned first, then newest
    items.sort((a,b)=>{
      const pa = a.pinned ? 1 : 0;
      const pb = b.pinned ? 1 : 0;
      if (pa !== pb) return pb - pa;
      const ta = a.createdAtMs || 0;
      const tb = b.createdAtMs || 0;
      return tb - ta;
    });

    container.innerHTML = "";
    items.forEach(item=>{
      const card = document.createElement("div");
      card.className = "news-card " + (item.type || "news");

      // background image
      if (item.bgUrl) {
        card.style.backgroundImage = `linear-gradient(rgba(0,0,0,.55), rgba(0,0,0,.75)), url('${item.bgUrl}')`;
        card.style.backgroundSize = "cover";
        card.style.backgroundPosition = "center";
      }

      const typeLabel = item.type === "announcement" ? "Anunt" : (item.type === "update" ? "Noutate" : "Stire");
      const when = item.createdAtMs ? new Date(item.createdAtMs).toLocaleString("ro-RO") : "";

      card.innerHTML = `
        <div class="news-card-head">
          <div class="news-type ${item.type || "news"}">${typeLabel}${item.pinned ? " ‚Ä¢ PINNED" : ""}</div>
          <div class="news-date">${(item.emoji ? item.emoji + " " : "")}${when}</div>
        </div>
        <div class="news-card-title">${(item.title || "")}</div>
        <div class="news-card-text">${item.content || ""}</div>
      `;

      if (isAdmin) {
        const del = document.createElement("button");
        del.className = "news-del-btn";
        del.textContent = "üóëÔ∏è Sterge";
        del.onclick = async ()=>{
          if (!confirm("Stergi acest anunt?")) return;
          const db = getDb();
          if (!db) return alert("Firestore indisponibil.");
          try {
            await db.collection("news").doc(item._id).delete();
          } catch (e) {
            console.error("delete news failed:", e);
            alert("Eroare la stergere (rules/permisiuni).");
          }
        };
        card.appendChild(del);
      }

      container.appendChild(card);
    });
  }

  async function uploadNewsImage(file) {
    if (!file) return null;
    const storage = getStorage();
    if (!storage) throw new Error("Storage SDK indisponibil");
    const safeName = (file.name || "img").replace(/[^\w.\-]+/g, "_");
    const path = "news/" + Date.now() + "_" + safeName;
    const ref = storage.ref().child(path);
    await ref.put(file);
    return await ref.getDownloadURL();
  }

  async function adminCreateNews() {
    const auth = getAuth();
    const user = auth && auth.currentUser ? auth.currentUser : null;
    if (!isAdminUser(user)) return alert("Doar admin poate adauga.");

    const title = ($("newsTitleInput") && $("newsTitleInput").value || "").trim();
    const content = ($("newsContentInput") && $("newsContentInput").value || "").trim();
    const emoji = ($("newsEmojiInput") && $("newsEmojiInput").value || "").trim();
    const type = ($("newsTypeInput") && $("newsTypeInput").value) || "news";
    const pinned = !!($("newsPinnedInput") && $("newsPinnedInput").checked);
    const file = $("newsBgInput") && $("newsBgInput").files && $("newsBgInput").files[0] ? $("newsBgInput").files[0] : null;

    if (!title || !content) return alert("Completeaza titlu si continut.");

    const db = getDb();
    if (!db) return alert("Firestore indisponibil.");

    try {
      let bgUrl = null;
      if (file) bgUrl = await uploadNewsImage(file);

      await db.collection("news").add({
        title,
        content,
        emoji: emoji || "",
        type,
        pinned,
        bgUrl: bgUrl || "",
        createdAt: firebase.firestore.FieldValue.serverTimestamp(),
        createdAtMs: Date.now(),
      });

      // reset form
      if ($("newsTitleInput")) $("newsTitleInput").value = "";
      if ($("newsContentInput")) $("newsContentInput").value = "";
      if ($("newsEmojiInput")) $("newsEmojiInput").value = "";
      if ($("newsBgInput")) $("newsBgInput").value = "";
      if ($("newsPinnedInput")) $("newsPinnedInput").checked = false;
    } catch (e) {
      console.error("create news failed:", e);
      alert("Eroare la salvare stire (rules/permisiuni).");
    }
  }
  window.adminCreateNews = adminCreateNews;

  function setNewsAdminVisible(isAdmin) {
    const box = $("newsAdminBox");
    if (box) box.style.display = isAdmin ? "block" : "none";
    // hide any legacy admin section if exists
    const legacyAdmin = document.querySelector(".admin-section, #adminPanel, #administratorSection");
    if (legacyAdmin) legacyAdmin.style.display = "none";
  }

  function startNewsRealtime() {
    const db = getDb();
    const container = $("newsContainer");
    if (!db || !container) return;
    try {
      db.collection("news")
        .orderBy("createdAtMs", "desc")
        .limit(50)
        .onSnapshot((snap)=>{
          const items=[];
          snap.forEach(doc=> items.push({_id: doc.id, ...doc.data()}));
          const auth = getAuth();
          const isAdmin = isAdminUser(auth && auth.currentUser);
          renderNewsList(items, isAdmin);
        }, (err)=>{
          console.error("news onSnapshot error:", err);
          container.innerHTML = '<div style="color:#ffb3b3; padding:12px; border:1px solid rgba(255,255,255,.15); border-radius:12px; background:rgba(0,0,0,.35)">Eroare la √ÆncƒÉrcare »ôtiri (rules/permisiuni). Verifica in Firestore Rules ca <b>match /news/{id} allow read: if true;</b></div>';
        });
    } catch (e) {
      console.error("startNewsRealtime failed:", e);
    }
  }

  function wireAuthUI() {
    const auth = getAuth();
    if (!auth) return;

    // show admin box if admin
    auth.onAuthStateChanged((user)=>{
      const isAdmin = isAdminUser(user);
      setNewsAdminVisible(isAdmin);

      // also re-render delete buttons after login
      // force refresh by re-reading current DOM content
      // (snapshot callback will also run)
    });

    // attach login form if present
    const loginBtn = $("adminLoginBtn");
    const logoutBtn = $("adminLogoutBtn");

    if (loginBtn) {
      loginBtn.onclick = async ()=>{
        const email = ($("adminEmail") && $("adminEmail").value || "").trim();
        const pass  = ($("adminPassword") && $("adminPassword").value || "").trim();
        try {
          await auth.signInWithEmailAndPassword(email, pass);
        } catch (e) {
          console.error("login failed:", e);
          alert("Eroare autentificare: " + (e && e.message ? e.message : e));
        }
      };
    }
    if (logoutBtn) {
      logoutBtn.onclick = async ()=> { try { await auth.signOut(); } catch(_){} };
    }
  }

  function init() {
    // remove junk texts if still present
    try {
      document.body.innerHTML = document.body.innerHTML
        .replace(/Particles Background Contor Vizite[^<]*Scientific Navigation/g, "")
        .replace(/coinmarketcap LIVE/g, "");
    } catch(_) {}

    try { updateVisitsOnce(); } catch(e) { try { updateVisits(); } catch(_) {} }
    startPriceAutoUpdate();
    updateTotalSupplyReal();
    wireAuthUI();
    startNewsRealtime();

    // if there is a visible price placeholder under hero text
    const heroPrice = $("liveTokenPrice") || $("currentPrice");
    if (heroPrice && heroPrice.textContent.trim() === "") heroPrice.textContent = "Loading...";
  }

  window.addEventListener("load", init);
})();

</script>
<script>
const SBYT_PRICE_ENDPOINT =
  "https://europe-west1-stancubyt-fc2b9.cloudfunctions.net/sbytPrice";

async function updateSBYTPrice() {
  try {
    const res = await fetch(SBYT_PRICE_ENDPOINT);
    const data = await res.json();

    if (data.ok && data.priceUsd) {
      document.getElementById("sbyt-price").innerText =
        "$" + Number(data.priceUsd).toFixed(8);
    } else {
      document.getElementById("sbyt-price").innerText = "‚Äî";
    }
  } catch (e) {
    document.getElementById("sbyt-price").innerText = "‚Äî";
  }
}

// prima rulare
updateSBYTPrice();

// auto-refresh la 30 secunde
setInterval(updateSBYTPrice, 30000);
</script>
</body></html>
