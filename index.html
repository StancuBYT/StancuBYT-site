<!DOCTYPE html>
<html lang="ro">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>StancuBYT | Token Digital Avansat</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-chart-financial@0.1.1"></script>
    <style>
        /* Variabile culori conform psihologiei marketingului */
        :root {
            --blue-tech: #0066ff;
            --green-growth: #00ff88;
            --purple-innov: #8a2be2;
            --neon-cyan: #00ffff;
            --dark-bg: #0a0a1f;
            --darker-bg: #050510;
            --orange-alert: #ff9500;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Arial', sans-serif;
        }

        body {
            background: var(--dark-bg);
            color: white;
            overflow-x: hidden;
            background-image: 
                radial-gradient(circle at 10% 20%, rgba(0, 102, 255, 0.1) 0%, transparent 20%),
                radial-gradient(circle at 90% 60%, rgba(0, 255, 136, 0.1) 0%, transparent 20%),
                radial-gradient(circle at 50% 80%, rgba(138, 43, 226, 0.1) 0%, transparent 20%);
        }

        /* Particle Animation Background */
        #particles-js {
            position: fixed;
            width: 100%;
            height: 100%;
            z-index: -1;
        }

        /* Logo Background pentru Hero Section */
        .hero-logo-bg {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 600px;
            height: 600px;
            opacity: 0.05;
            z-index: -1;
            pointer-events: none;
        }

        .logo-3d-bg {
            width: 100%;
            height: 100%;
            position: relative;
            animation: float3d 20s infinite ease-in-out;
        }

        .logo-3d-bg img {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            filter: blur(1px) brightness(1.2);
        }

        @keyframes float3d {
            0%, 100% { 
                transform: translateY(0px) rotateX(0deg) rotateY(0deg); 
            }
            25% { 
                transform: translateY(-20px) rotateX(5deg) rotateY(5deg); 
            }
            50% { 
                transform: translateY(0px) rotateX(0deg) rotateY(10deg); 
            }
            75% { 
                transform: translateY(20px) rotateX(-5deg) rotateY(5deg); 
            }
        }

        /* 3D Logo Animation */
        .logo-3d-container {
            position: relative;
            width: 80px;
            height: 80px;
            perspective: 1000px;
        }

        .logo-3d {
            width: 100%;
            height: 100%;
            position: relative;
            transform-style: preserve-3d;
            animation: rotate3d 8s infinite linear;
        }

        .logo-3d img {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            position: absolute;
            backface-visibility: hidden;
        }

        .backnote-orbit {
            position: absolute;
            top: 50%;
            left: 50%;
            width: 120px;
            height: 120px;
            transform: translate(-50%, -50%);
            animation: orbit 6s infinite linear;
        }

        .backnote {
            position: absolute;
            width: 20px;
            height: 20px;
            background: var(--neon-cyan);
            border-radius: 50%;
            filter: blur(2px);
            opacity: 0.7;
        }

        .backnote:nth-child(1) { top: 0; left: 50%; transform: translateX(-50%); }
        .backnote:nth-child(2) { top: 50%; right: 0; transform: translateY(-50%); }
        .backnote:nth-child(3) { bottom: 0; left: 50%; transform: translateX(-50%); }
        .backnote:nth-child(4) { top: 50%; left: 0; transform: translateY(-50%); }

        @keyframes rotate3d {
            0% { transform: rotateY(0deg) rotateX(5deg); }
            100% { transform: rotateY(360deg) rotateX(5deg); }
        }

        @keyframes orbit {
            0% { transform: translate(-50%, -50%) rotate(0deg); }
            100% { transform: translate(-50%, -50%) rotate(360deg); }
        }

        /* Buton Modern Re√ÆmprospƒÉteazƒÉ Datele */
        .btn-refresh-modern {
            background: linear-gradient(45deg, var(--blue-tech), var(--purple-innov));
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            position: relative;
            overflow: hidden;
            margin-top: 1rem;
            box-shadow: 0 5px 20px rgba(0, 102, 255, 0.3);
        }

        .btn-refresh-modern:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 10px 30px rgba(0, 102, 255, 0.5);
        }

        .btn-refresh-modern:active {
            transform: translateY(0) scale(1);
        }

        .refresh-icon {
            font-size: 1.3rem;
            transition: transform 0.5s ease;
        }

        .btn-refresh-modern:hover .refresh-icon {
            animation: rotate360 1s linear infinite;
        }

        .refresh-pulse {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            border-radius: 50px;
            background: linear-gradient(45deg, var(--green-growth), var(--neon-cyan));
            opacity: 0;
            z-index: -1;
            animation: pulseEffect 2s infinite;
        }

        @keyframes rotate360 {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        @keyframes pulseEffect {
            0% { 
                transform: scale(1); 
                opacity: 0.7; 
            }
            100% { 
                transform: scale(1.2); 
                opacity: 0; 
            }
        }

        /* Loading animation pentru buton */
        .btn-refresh-modern.loading {
            background: linear-gradient(45deg, #666, #888);
            cursor: wait;
        }

        .btn-refresh-modern.loading .refresh-icon {
            animation: rotate360 1s linear infinite;
        }

        .btn-refresh-modern.loading .refresh-text {
            opacity: 0.7;
        }

        /* Animatie pentru actualizare succes */
        @keyframes successFlash {
            0%, 100% { 
                background: linear-gradient(45deg, var(--blue-tech), var(--purple-innov)); 
            }
            50% { 
                background: linear-gradient(45deg, var(--green-growth), #00cc66); 
            }
        }

        .btn-refresh-modern.success {
            animation: successFlash 0.5s ease 2;
        }

        /* Navigation - Scientific Style */
        .scientific-nav {
            background: rgba(10, 10, 31, 0.9);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid var(--blue-tech);
            position: fixed;
            width: 100%;
            z-index: 1000;
        }

        .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 2rem;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .logo-text {
            font-size: 1.5rem;
            font-weight: bold;
            background: linear-gradient(45deg, var(--blue-tech), var(--green-growth));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .nav-links {
            display: flex;
            gap: 2rem;
        }

        .nav-links a {
            color: white;
            text-decoration: none;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .nav-links a:hover {
            background: rgba(0, 102, 255, 0.2);
            transform: translateY(-2px);
        }

        .nav-links a::before {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 0;
            height: 2px;
            background: linear-gradient(45deg, var(--blue-tech), var(--green-growth));
            transition: width 0.3s ease;
        }

        .nav-links a:hover::before {
            width: 100%;
        }

        /* Main Content Sections */
        .page-section {
            min-height: 100vh;
            padding: 120px 2rem 2rem;
            max-width: 1200px;
            margin: 0 auto;
            display: none;
            position: relative;
            overflow: hidden;
        }

        .active-section {
            display: block;
        }

        /* Hero Section - Prezentare */
        .hero {
            text-align: center;
            padding-top: 150px;
            position: relative;
            z-index: 1;
        }

        .hero h1 {
            font-size: 4.5rem;
            margin-bottom: 1rem;
            background: linear-gradient(45deg, var(--blue-tech), var(--green-growth), var(--purple-innov));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: gradientShift 3s ease infinite;
            text-shadow: 0 0 30px rgba(0, 102, 255, 0.3);
            position: relative;
            z-index: 2;
        }

        @keyframes gradientShift {
            0%, 100% { filter: hue-rotate(0deg); }
            50% { filter: hue-rotate(45deg); }
        }

        /* Sectiune Noutati */
        .news-section {
            margin: 3rem 0;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 20px;
            padding: 2rem;
            border: 1px solid rgba(0, 255, 136, 0.2);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }

        .news-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid var(--green-growth);
        }

        .news-title {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.8rem;
            background: linear-gradient(45deg, var(--green-growth), var(--neon-cyan));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .news-controls {
            display: flex;
            gap: 1rem;
        }

        .news-btn {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(0, 102, 255, 0.3);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }

        .news-btn:hover {
            background: rgba(0, 102, 255, 0.2);
            transform: translateY(-2px);
        }

        .news-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
        }

        .news-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 1.5rem;
            border: 1px solid rgba(0, 102, 255, 0.2);
            transition: all 0.3s ease;
        }

        .news-card:hover {
            transform: translateY(-5px);
            border-color: var(--green-growth);
            box-shadow: 0 10px 25px rgba(0, 255, 136, 0.1);
        }

        .news-card.pinned {
            border: 2px solid var(--orange-alert);
            background: rgba(255, 149, 0, 0.05);
        }

        .news-badge {
            display: inline-block;
            padding: 0.3rem 0.8rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: bold;
            margin-bottom: 1rem;
        }

        .badge-update {
            background: rgba(0, 102, 255, 0.2);
            color: var(--blue-tech);
            border: 1px solid var(--blue-tech);
        }

        .badge-announcement {
            background: rgba(255, 149, 0, 0.2);
            color: var(--orange-alert);
            border: 1px solid var(--orange-alert);
        }

        .badge-event {
            background: rgba(0, 255, 136, 0.2);
            color: var(--green-growth);
            border: 1px solid var(--green-growth);
        }

        .news-date {
            font-size: 0.85rem;
            color: #888;
            margin-top: 1rem;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .news-form {
            margin-top: 2rem;
            padding-top: 1.5rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        .form-row {
            display: flex;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .form-row input {
            flex: 1;
            padding: 0.8rem 1rem;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(0, 102, 255, 0.3);
            border-radius: 8px;
            color: white;
            font-size: 1rem;
        }

        .form-row input:focus {
            border-color: var(--neon-cyan);
            box-shadow: 0 0 15px rgba(0, 255, 255, 0.2);
            outline: none;
        }

        /* Contor Vizite */
        .visit-counter {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: rgba(10, 10, 31, 0.9);
            backdrop-filter: blur(10px);
            border: 1px solid var(--blue-tech);
            border-radius: 15px;
            padding: 0.8rem 1.2rem;
            z-index: 1000;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 0.9rem;
            transition: all 0.3s ease;
        }

        .visit-counter:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(0, 102, 255, 0.3);
        }

        .counter-icon {
            animation: pulse 2s infinite;
        }

        .token-info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
            margin: 3rem 0;
        }

        .info-card {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(0, 102, 255, 0.3);
            border-radius: 15px;
            padding: 2rem;
            text-align: center;
            transition: transform 0.3s ease;
        }

        .info-card:hover {
            transform: translateY(-10px);
            border-color: var(--green-growth);
        }

        /* Social Links in Hero */
        .social-links {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin: 2rem 0;
            flex-wrap: wrap;
        }

        .social-btn {
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            color: white;
            text-decoration: none;
            font-size: 1.2rem;
            transition: all 0.3s ease;
            border: 1px solid rgba(0, 102, 255, 0.3);
        }

        .social-btn:hover {
            background: rgba(0, 102, 255, 0.3);
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 102, 255, 0.3);
        }

        /* Buton Uniswap */
        .uniswap-btn {
            background: linear-gradient(45deg, #ff007a, #8a2be2);
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: 25px;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
            margin: 1rem 0;
            font-weight: bold;
        }

        .uniswap-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(255, 0, 122, 0.4);
        }

        /* Scientific Data Visualization */
        .data-visualization {
            background: rgba(255, 255, 255, 0.02);
            border-radius: 20px;
            padding: 2rem;
            margin: 2rem 0;
            border: 1px solid rgba(0, 255, 136, 0.2);
        }

        .chart-container {
            position: relative;
            height: 400px;
            margin: 2rem 0;
        }

        .chart-controls {
            display: flex;
            gap: 1rem;
            margin-bottom: 1rem;
            flex-wrap: wrap;
        }

        .period-btn {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(0, 102, 255, 0.3);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .period-btn.active {
            background: var(--blue-tech);
            border-color: var(--blue-tech);
        }

        .period-btn:hover {
            background: rgba(0, 102, 255, 0.2);
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-top: 1rem;
        }

        .stat-item {
            background: rgba(255, 255, 255, 0.05);
            padding: 1rem;
            border-radius: 10px;
            text-align: center;
        }

        .stat-value {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--neon-cyan);
            margin: 0.5rem 0;
        }

        .neon-glow {
            box-shadow: 
                0 0 20px rgba(0, 102, 255, 0.3),
                0 0 40px rgba(0, 255, 136, 0.2),
                inset 0 0 20px rgba(138, 43, 226, 0.1);
        }

        /* Status Indicators */
        .status-online {
            color: #00ff88;
            animation: pulse 2s infinite;
        }

        .status-offline {
            color: #ff4444;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        /* Token Price Display */
        .price-display {
            font-size: 2.5rem;
            font-weight: bold;
            margin: 1rem 0;
        }

        .price-change {
            font-size: 1.2rem;
            padding: 0.3rem 1rem;
            border-radius: 20px;
            display: inline-block;
            margin: 0.5rem 0;
        }

        .positive { color: #00ff88; background: rgba(0, 255, 136, 0.1); }
        .negative { color: #ff4444; background: rgba(255, 68, 68, 0.1); }

        /* Whitepaper Specific Styles */
        .whitepaper-header {
            text-align: center;
            margin-bottom: 3rem;
            padding-top: 20px;
        }

        .whitepaper-logo {
            width: 150px;
            height: 150px;
            margin: 0 auto 1.5rem;
            border-radius: 50%;
            background: linear-gradient(45deg, var(--blue-tech), var(--purple-innov));
            padding: 15px;
            box-shadow: 0 0 40px rgba(0, 102, 255, 0.4);
        }

        .whitepaper-logo img {
            width: 100%;
            height: 100%;
            border-radius: 50%;
        }

        .toc {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 2rem;
            margin: 2rem 0;
            border-left: 4px solid var(--green-growth);
        }

        .toc h3 {
            margin-bottom: 1rem;
            color: var(--neon-cyan);
        }

        .toc ul {
            columns: 2;
            column-gap: 3rem;
        }

        .toc li {
            margin-bottom: 0.8rem;
            break-inside: avoid;
        }

        .toc a {
            color: white;
            text-decoration: none;
            transition: color 0.3s ease;
        }

        .toc a:hover {
            color: var(--neon-cyan);
            text-decoration: underline;
        }

        .section-card {
            background: rgba(255, 255, 255, 0.03);
            border-radius: 15px;
            padding: 2rem;
            margin: 2rem 0;
            border: 1px solid rgba(0, 102, 255, 0.2);
            transition: transform 0.3s ease, border-color 0.3s ease;
        }

        .section-card:hover {
            transform: translateY(-5px);
            border-color: var(--neon-cyan);
        }

        .section-card h3 {
            color: var(--green-growth);
            margin-bottom: 1.5rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid rgba(0, 255, 136, 0.3);
        }

        .table-container {
            overflow-x: auto;
            margin: 1.5rem 0;
        }

        .whitepaper-table {
            width: 100%;
            border-collapse: collapse;
            background: rgba(255, 255, 255, 0.02);
            border-radius: 10px;
            overflow: hidden;
        }

        .whitepaper-table th {
            background: linear-gradient(45deg, var(--blue-tech), var(--purple-innov));
            color: white;
            padding: 1rem;
            text-align: left;
            font-weight: bold;
        }

        .whitepaper-table td {
            padding: 1rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .whitepaper-table tr:last-child td {
            border-bottom: none;
        }

        .whitepaper-table tr:hover {
            background: rgba(255, 255, 255, 0.05);
        }

        .badge {
            display: inline-block;
            padding: 0.3rem 0.8rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: bold;
            margin: 0.2rem;
        }

        .badge-success {
            background: rgba(0, 255, 136, 0.2);
            color: var(--green-growth);
            border: 1px solid rgba(0, 255, 136, 0.3);
        }

        .badge-warning {
            background: rgba(255, 204, 0, 0.2);
            color: #ffcc00;
            border: 1px solid rgba(255, 204, 0, 0.3);
        }

        .badge-info {
            background: rgba(0, 204, 255, 0.2);
            color: var(--neon-cyan);
            border: 1px solid rgba(0, 204, 255, 0.3);
        }

        .roadmap-timeline {
            position: relative;
            padding-left: 30px;
            margin: 2rem 0;
        }

        .roadmap-timeline::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 3px;
            background: linear-gradient(to bottom, var(--blue-tech), var(--purple-innov));
        }

        .timeline-item {
            position: relative;
            margin-bottom: 2rem;
            padding-left: 30px;
        }

        .timeline-item::before {
            content: '';
            position: absolute;
            left: -33px;
            top: 5px;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: var(--neon-cyan);
            box-shadow: 0 0 10px var(--neon-cyan);
        }

        .timeline-date {
            font-weight: bold;
            color: var(--green-growth);
            margin-bottom: 0.5rem;
        }

        .download-btn {
            background: linear-gradient(45deg, var(--green-growth), var(--blue-tech));
            color: white;
            border: none;
            padding: 0.8rem 1.5rem;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            transition: all 0.3s ease;
        }

        .download-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 255, 136, 0.3);
        }

        .contact-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            margin-bottom: 3rem;
        }

        .form-group {
            margin-bottom: 1rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            color: var(--neon-cyan);
            font-size: 0.9rem;
        }

        .form-group input,
        .form-group textarea,
        .form-group select {
            width: 100%;
            padding: 0.8rem 1rem;
            background: rgba(255,255,255,0.05);
            border: 1px solid rgba(0, 102, 255, 0.3);
            border-radius: 8px;
            color: white;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .form-group textarea {
            resize: vertical;
            min-height: 120px;
        }

        .form-group input:focus,
        .form-group textarea:focus,
        .form-group select:focus {
            border-color: var(--neon-cyan);
            box-shadow: 0 0 15px rgba(0, 255, 255, 0.2);
            outline: none;
        }

        .social-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
        }

        .social-card {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 1rem;
            background: rgba(255,255,255,0.03);
            border-radius: 10px;
            text-decoration: none;
            color: white;
            transition: all 0.3s ease;
            border: 1px solid rgba(255,255,255,0.1);
        }

        .social-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 102, 255, 0.2);
            border-color: var(--blue-tech);
        }

        .social-icon {
            width: 50px;
            height: 50px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
        }

        .required {
            color: #ff4444;
        }

        .contact-card {
            background: rgba(255,255,255,0.03);
            padding: 1rem;
            border-radius: 10px;
            border-left: 3px solid;
            margin-bottom: 1rem;
        }

        .contact-card.business {
            border-color: var(--green-growth);
            background: rgba(0, 255, 136, 0.05);
        }

        .contact-card.partnership {
            border-color: var(--blue-tech);
            background: rgba(0, 102, 255, 0.05);
        }

        .contact-card.security {
            border-color: var(--purple-innov);
            background: rgba(138, 43, 226, 0.05);
        }

        .time-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-top: 1rem;
        }

        .time-item {
            text-align: center;
            padding: 1rem;
        }

        .time-item .icon {
            font-size: 2rem;
            margin-bottom: 0.5rem;
        }

        /* Mobile Responsive */
        @media (max-width: 768px) {
            .nav-container {
                flex-direction: column;
                gap: 1rem;
            }

            .nav-links {
                gap: 1rem;
                flex-wrap: wrap;
                justify-content: center;
            }

            .hero h1 {
                font-size: 2.8rem;
            }

            .hero-logo-bg {
                width: 400px;
                height: 400px;
            }

            .token-info-grid {
                grid-template-columns: 1fr;
            }

            .price-display {
                font-size: 2rem;
            }

            .chart-container {
                height: 300px;
            }

            .btn-refresh-modern {
                padding: 0.8rem 1.5rem;
                font-size: 1rem;
            }

            .contact-grid {
                grid-template-columns: 1fr;
            }

            .social-grid {
                grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            }

            .toc ul {
                columns: 1;
            }

            .whitepaper-table {
                font-size: 0.9rem;
            }

            .whitepaper-table th,
            .whitepaper-table td {
                padding: 0.5rem;
            }

            .news-grid {
                grid-template-columns: 1fr;
            }

            .form-row {
                flex-direction: column;
            }

            .visit-counter {
                bottom: 10px;
                right: 10px;
                font-size: 0.8rem;
                padding: 0.6rem 1rem;
            }
        }

        @media (max-width: 480px) {
            .hero h1 {
                font-size: 2.2rem;
            }

            .nav-links a {
                padding: 0.4rem 0.8rem;
                font-size: 0.9rem;
            }

            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .social-grid {
                grid-template-columns: 1fr;
            }

            .whitepaper-logo {
                width: 100px;
                height: 100px;
            }
        }
    
        .form-group select option {
            background: var(--darker-bg);
            color: #ffffff;
        }

    
/* ====== ADMIN LOGIN + ADMIN ONLY ====== */
.admin-login{
  margin-top: 80px;
  padding: 40px 20px;
  background: linear-gradient(135deg, #1e1e2f, #2b2b45);
  border-top: 2px solid rgba(122,92,255,.8);
  text-align: center;
  border-radius: 16px;
}
.admin-login h2{ color:#fff; margin:0 0 10px; }
.admin-login .admin-desc{ color:#cfcfe8; margin:0 0 18px; opacity:.9; }
.admin-login-box{ display:flex; justify-content:center; gap:10px; flex-wrap:wrap; }
.admin-login-box input{
  padding:12px 14px; width:280px; max-width:92vw;
  border-radius:10px; border:1px solid rgba(255,255,255,.12);
  background: rgba(0,0,0,.25); color:#fff; outline:none;
}
.admin-login-box button{
  padding:12px 16px; border-radius:10px; border:none;
  background:#7a5cff; color:#fff; font-weight:700; cursor:pointer;
}
.admin-login-box button:hover{ filter: brightness(1.08); }
.admin-msg{ margin-top:12px; font-weight:700; }

.admin-status-row{ margin-top:12px; display:flex; justify-content:center; align-items:center; gap:10px; flex-wrap:wrap; }
.admin-badge{ display:inline-flex; align-items:center; padding:6px 10px; border-radius:999px; font-weight:800; font-size:.9rem; border:1px solid rgba(255,255,255,.14); }
.admin-badge-on{ background: rgba(0,255,136,.12); color:#00ff88; border-color: rgba(0,255,136,.22); }
.admin-badge-off{ background: rgba(255,77,77,.12); color:#ff4d4d; border-color: rgba(255,77,77,.22); }
.admin-user-label{ opacity:.85; font-size:.95rem; }
.admin-pill{
  display:inline-flex; align-items:center; gap:8px;
  padding:6px 10px; border-radius:999px; font-size:.9rem;
  background: rgba(0,255,136,.12); color:#00ff88; border:1px solid rgba(0,255,136,.22);
}
.admin-pill.off{
  background: rgba(255,77,77,.12); color:#ff4d4d; border-color: rgba(255,77,77,.22);
}
.admin-only{ display:none !important; }

/* ====== TROPHY BUTTON (Giveaway add) ====== */
.trophy-btn{
  padding: 10px 14px !important;
  display:inline-flex; align-items:center; justify-content:center; gap:10px;
  min-width: 54px;
}
.trophy-btn .trophy-wrap{ font-size: 1.2rem; }
.trophy-btn .trophy-logo{
  width: 22px; height: 22px; border-radius: 6px;
  box-shadow: 0 0 12px rgba(0,255,136,.25);
}
.table-responsive{ overflow-x:auto; width:100%; }
.lb-table{ width:100%; border-collapse: collapse; }
.lb-table th,.lb-table td{ padding:10px 10px; border-bottom:1px solid rgba(255,255,255,.08); text-align:left; }
.lb-top1{ background: rgba(255,215,0,.12); }
.lb-top2{ background: rgba(192,192,192,.12); }
.lb-top3{ background: rgba(205,127,50,.12); }
.mono{ font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono","Courier New", monospace; }


/* ====== TEAM (Membri) Admin + Firebase ====== */
.team-member-card{display:flex; gap:14px; align-items:flex-start;}
.team-avatar{width:84px; height:84px; border-radius:50%; flex:0 0 84px; background: linear-gradient(45deg, var(--blue-tech), var(--purple-innov)); display:flex; align-items:center; justify-content:center; overflow:hidden; box-shadow: 0 0 18px rgba(0,102,255,0.25);}
.team-avatar img{width:100%; height:100%; object-fit:cover; display:block;}
.team-emoji{font-size:2.4rem;}
.team-meta{flex:1;}
.team-meta h4{margin:0; color: var(--green-growth);}
.team-role{margin-top:6px; opacity:.95;}
.team-since{margin-top:6px; font-size:.9rem; opacity:.8;}
.team-actions{margin-top:10px; display:flex; gap:10px; flex-wrap:wrap;}
.team-file-input{padding:12px 14px; width:280px; max-width:92vw; border-radius:10px; border:1px solid rgba(255,255,255,.12); background: rgba(0,0,0,.25); color:#fff; outline:none;}
#teamPhotoFile{padding:10px; border-radius:10px; border:1px solid rgba(255,255,255,.12); background: rgba(0,0,0,.25); color:#fff;}



/* ====== ROADMAP DRAG & DROP (Admin) ====== */
.roadmap-drag-handle{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  margin-left:10px;
  padding:2px 8px;
  border-radius:10px;
  border:1px solid rgba(255,255,255,.14);
  background: rgba(255,255,255,.06);
  cursor: grab;
  user-select:none;
  font-weight:900;
}
.timeline-item[draggable="true"]{ cursor: grab; }
.timeline-item.dragging{ opacity: .45; }

</style>
<!-- Firebase (compat) -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-storage-compat.js"></script>
</head>
<body>

    <section id="whitepaper" class="page-section active-section">
        <div class="whitepaper-header">
            <div class="whitepaper-logo">
                <img src="https://i.ibb.co/Zzb6ZTG0/logo.png" alt="StancuBYT Logo">
            </div>
            <h1 style="font-size: 3rem; margin-bottom: 0.5rem; background: linear-gradient(45deg, var(--blue-tech), var(--green-growth), var(--purple-innov)); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">
                StancuBYT (SBYT) Whitepaper
            </h1>
            <p style="font-size: 1.2rem; opacity: 0.9; margin-bottom: 0.5rem;">
                Documenta»õie TehnologicƒÉ CompletƒÉ
            </p>
            <p style="color: var(--neon-cyan); font-family: monospace;">
                Lansare token: Oct 26, 2025 ‚Äî 11:23:11‚ÄØPM‚ÄØ+UTC
            </p>
            
            <!-- Butoane Download -->
            <div style="margin: 2rem 0; display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap;">
                <button onclick="downloadWhitepaper('ro')" class="download-btn">
                    <span>üì•</span> DescarcƒÉ Whitepaper RO
                </button>
                <button onclick="downloadWhitepaper('en')" class="download-btn">
                    <span>üì•</span> Download Whitepaper EN
                </button>
                <button onclick="window.open('https://etherscan.io/token/0x44Cf220399be798baeaE45fd7C4fF44623713833', '_blank')" class="download-btn">
                    <span>üîç</span> Vezi Contract pe Etherscan
                </button>
            </div>
        </div>

        <!-- Cuprins -->
        <div class="toc neon-glow">
            <h3>üìö Cuprins</h3>
            <ul>
                <li><a href="#executive-summary" onclick="scrollToSection('executive-summary')">1. Executive Summary</a></li>
                <li><a href="#informatii-generale" onclick="scrollToSection('informatii-generale')">2. Informa»õii generale</a></li>
                <li><a href="#tokenomics" onclick="scrollToSection('tokenomics')">3. Tokenomics & Distribu»õie</a></li>
                <li><a href="#utilitate" onclick="scrollToSection('utilitate')">4. Utilitate & Scop</a></li>
                <li><a href="#roadmap" onclick="scrollToSection('roadmap')">5. Plan de lansare / Roadmap</a></li>
                <li><a href="#taxe" onclick="scrollToSection('taxe')">6. Taxe & Tranzac»õii</a></li>
                <li><a href="#echipa" onclick="scrollToSection('echipa')">7. Echipa</a></li>
                <li><a href="#contact-wp" onclick="scrollToSection('contact-wp')">8. Contact & Linkuri</a></li>
                <li><a href="#recomandari" onclick="scrollToSection('recomandari')">9. Note & RecomandƒÉri</a></li>
                <li><a href="#disclaimer" onclick="scrollToSection('disclaimer')">10. Disclaimer & Riscuri</a></li>
            </ul>
        </div>

        <!-- 1. Executive Summary -->
        <div id="executive-summary" class="section-card neon-glow">
            <h3>1. Executive Summary</h3>
            <p>StancuBYT (SBYT) este un token ERC‚Äë20 creat pentru a sus»õine o comunitate digitalƒÉ modernƒÉ, transparentƒÉ »ôi orientatƒÉ spre utilitate. Cu un supply total de 4.000.000 SBYT »ôi un pre»õ de lansare de 200‚ÄØ000 SBYT = 1 ETH, SBYT este conceput pentru a oferi utilitate realƒÉ ‚Äî plƒÉ»õi interne, recompense, acces la servicii »ôi participare comunitarƒÉ. Lansarea oficialƒÉ a avut loc pe 26 octombrie 2025.</p>
        </div>

        <!-- 2. Informa»õii generale -->
        <div id="informatii-generale" class="section-card neon-glow">
            <h3>2. Informa»õii generale</h3>
            <div class="table-container">
                <table class="whitepaper-table">
                    <tr>
                        <th>Parametru</th>
                        <th>Valoare</th>
                    </tr>
                    <tr>
                        <td><strong>Token</strong></td>
                        <td>StancuBYT (SBYT)</td>
                    </tr>
                    <tr>
                        <td><strong>Standard</strong></td>
                        <td>ERC‚Äë20</td>
                    </tr>
                    <tr>
                        <td><strong>Smart‚Äëcontract address</strong></td>
                        <td>
                            <a href="https://etherscan.io/token/0x44Cf220399be798baeaE45fd7C4fF44623713833" 
                               target="_blank" 
                               style="color: var(--neon-cyan); text-decoration: none; font-family: monospace;">
                                0x44Cf220399be798baeaE45fd7C4fF44623713833
                            </a>
                        </td>
                    </tr>
                    <tr>
                        <td><strong>Website oficial</strong></td>
                        <td>
                            <a href="https://stancubyt.com/" target="_blank" style="color: var(--neon-cyan); text-decoration: none;">
                                https://stancubyt.com/
                            </a>
                        </td>
                    </tr>
                </table>
            </div>
            
            <div style="margin-top: 2rem;">
                <h4 style="color: var(--blue-tech); margin-bottom: 1rem;">Social Media / Comunicare</h4>
                <div class="social-grid">
                    <a href="https://twitter.com/StancuBYT" target="_blank" class="social-card">
                        <div class="social-icon" style="background: rgba(29, 161, 242, 0.2);">
                            üê¶
                        </div>
                        <div>
                            <strong>Twitter</strong>
                            <small>@StancuBYT</small>
                        </div>
                    </a>
                    <a href="https://t.me/StancuBYT_Official" target="_blank" class="social-card">
                        <div class="social-icon" style="background: rgba(0, 136, 204, 0.2);">
                            üì¢
                        </div>
                        <div>
                            <strong>Telegram</strong>
                            <small>Official Channel</small>
                        </div>
                    </a>
                    <a href="https://github.com/StancuBYT" target="_blank" class="social-card">
                        <div class="social-icon" style="background: rgba(24, 23, 23, 0.2);">
                            üíª
                        </div>
                        <div>
                            <strong>GitHub</strong>
                            <small>Cod sursƒÉ</small>
                        </div>
                    </a>
                </div>
            </div>
        </div>

        <!-- 3. Tokenomics & Distribu»õie -->
        <div id="tokenomics" class="section-card neon-glow">
            <h3>3. Tokenomics & Distribu»õie</h3>
            
            <div class="table-container">
                <table class="whitepaper-table">
                    <tr>
                        <th>Aspect</th>
                        <th>Valoare</th>
                    </tr>
                    <tr>
                        <td><strong>Total supply</strong></td>
                        <td>4.000.000 SBYT (18 decimale)</td>
                    </tr>
                    <tr>
                        <td><strong>Pre»õ ini»õial</strong></td>
                        <td>200.000 SBYT = 1 ETH</td>
                    </tr>
                </table>
            </div>

            <div style="margin: 2rem 0;">
                <h4 style="color: var(--green-growth); margin-bottom: 1rem;">Distribu»õie Token</h4>
                <div class="table-container">
                    <table class="whitepaper-table">
                        <tr>
                            <th>Categorie</th>
                            <th>Procentaj</th>
                            <th>Cantitate SBYT</th>
                        </tr>
                        <tr>
                            <td>Fondator / Echipa</td>
                            <td>15%</td>
                            <td>600.000 SBYT</td>
                        </tr>
                        <tr>
                            <td>RezervƒÉ proiect / Dezvoltare</td>
                            <td>40%</td>
                            <td>1.600.000 SBYT</td>
                        </tr>
                        <tr>
                            <td>Marketing & Comunitate</td>
                            <td>15%</td>
                            <td>600.000 SBYT</td>
                        </tr>
                        <tr>
                            <td>Presale / Investitori</td>
                            <td>30%</td>
                            <td>1.200.000 SBYT</td>
                        </tr>
                    </table>
                </div>
            </div>

            <div style="background: rgba(0, 255, 136, 0.05); padding: 1rem; border-radius: 10px; border-left: 3px solid var(--green-growth); margin-top: 1.5rem;">
                <p style="margin: 0; font-size: 0.9rem;">
                    <strong>üìù NotƒÉ:</strong> Se recomandƒÉ lock‚Äëup pentru partea echipei (ex: 12 luni cu eliberare treptatƒÉ) pentru a asigura stabilitate »ôi √Æncredere.
                </p>
            </div>
        </div>

        <!-- 4. Utilitate & Scop -->
        <div id="utilitate" class="section-card neon-glow">
            <h3>4. Utilitate & Scop</h3>
            <p>SBYT este conceput sƒÉ fie coloana vertebralƒÉ a ecosistemului digital al comunitƒÉ»õii StancuBYT. UtilitƒÉ»õi anticipate:</p>
            
            <div style="margin: 1.5rem 0;">
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1rem;">
                    <div style="padding: 1rem; background: rgba(0, 102, 255, 0.1); border-radius: 10px;">
                        <div style="font-size: 2rem; margin-bottom: 0.5rem;">‚ö°</div>
                        <strong>Tranzac»õii interne</strong>
                        <p style="font-size: 0.9rem; margin-top: 0.5rem; opacity: 0.8;">Rapide »ôi sigure pe blockchain</p>
                    </div>
                    <div style="padding: 1rem; background: rgba(0, 255, 136, 0.1); border-radius: 10px;">
                        <div style="font-size: 2rem; margin-bottom: 0.5rem;">üèÜ</div>
                        <strong>Recompense comunitate</strong>
                        <p style="font-size: 0.9rem; margin-top: 0.5rem; opacity: 0.8;">Beneficii pentru membri activi</p>
                    </div>
                    <div style="padding: 1rem; background: rgba(138, 43, 226, 0.1); border-radius: 10px;">
                        <div style="font-size: 2rem; margin-bottom: 0.5rem;">üîí</div>
                        <strong>Acces exclusiv</strong>
                        <p style="font-size: 0.9rem; margin-top: 0.5rem; opacity: 0.8;">Servicii »ôi con»õinut premium</p>
                    </div>
                </div>
            </div>

            <p style="margin-top: 1.5rem;">
                Prin tokenomics clar »ôi supply limitat, SBYT urmƒÉre»ôte sƒÉ devinƒÉ un instrument util ‚Äî nu doar un obiect de specula»õie.
            </p>
        </div>

        <!-- 5. Plan de lansare / Roadmap -->
        <div id="roadmap" class="section-card neon-glow">
            <h3>5. Plan de lansare / Roadmap</h3>
            
            <div class="roadmap-timeline">
                <div class="timeline-item">
                    <div class="timeline-date">Faza 1: Lansare</div>
                    <p>Publicare smart‚Äëcontract, verificare pe Etherscan, v√¢nzare cƒÉtre investitori early adopters.</p>
                    <span class="badge badge-success">Completat</span>
                </div>
                <div class="timeline-item">
                    <div class="timeline-date">Faza 2: Listare</div>
                    <p>Creare pool lichiditate pe Uniswap, listare pe DEX, campanii marketing, construire comunitate.</p>
                    <span class="badge badge-warning">√én Curs</span>
                </div>
                <div class="timeline-item">
                    <div class="timeline-date">Faza 3: Dezvoltare</div>
                    <p>Integrare token √Æn platforme, servicii, func»õii extra, gestionare rezervƒÉ, update‚Äëuri periodice.</p>
                    <span class="badge badge-info">Planificat</span>
                </div>
                <div class="timeline-item">
                    <div class="timeline-date">Faza 4: Extindere</div>
                    <p>Integrare token √Æn platforme/servicii, func»õionalitƒÉ»õi suplimentare, audit smart-contract.</p>
                    <span class="badge badge-info">Planificat</span>
                </div>
            </div>
        </div>

        <!-- 6. Taxe & Tranzac»õii -->
        <div id="taxe" class="section-card neon-glow">
            <h3>6. Taxe & Tranzac»õii</h3>
            
            <div class="table-container">
                <table class="whitepaper-table">
                    <tr>
                        <th>Tip TaxƒÉ</th>
                        <th>Procent</th>
                        <th>Destina»õie</th>
                    </tr>
                    <tr>
                        <td>Comision DEX (Uniswap)</td>
                        <td>‚âà 0.30%</td>
                        <td>Lichiditate & Furnizori</td>
                    </tr>
                    <tr>
                        <td>Gas Fee (Ethereum)</td>
                        <td>Variabil</td>
                        <td>Re»õea Ethereum</td>
                    </tr>
                    <tr>
                        <td>TaxƒÉ suplimentarƒÉ*</td>
                        <td>ConfigurabilƒÉ</td>
                        <td>Marketing / Burn / Recompense</td>
                    </tr>
                </table>
            </div>

            <div style="background: rgba(255, 204, 0, 0.05); padding: 1rem; border-radius: 10px; border-left: 3px solid #ffcc00; margin-top: 1.5rem;">
                <p style="margin: 0; font-size: 0.9rem;">
                    <strong>‚ö†Ô∏è NotƒÉ:</strong> DacƒÉ implementezi *taxƒÉ suplimentarƒÉ pe transfer*, aceasta trebuie definitƒÉ clar √Æn smart‚Äëcontract »ôi poate merge spre lichiditate, marketing, burn sau recompense comunitate.
                </p>
            </div>
        </div>

        <!-- 7. Echipa -->
        <div id="echipa" class="section-card neon-glow">
            <h3>7. Echipa</h3>
            
            <div style="display: flex; align-items: center; gap: 2rem; margin: 2rem 0; flex-wrap: wrap;">
                <div style="width: 100px; height: 100px; border-radius: 50%; background: linear-gradient(45deg, var(--blue-tech), var(--purple-innov)); display: flex; align-items: center; justify-content: center; font-size: 2.5rem;">
                    üë®‚Äçüíº
                </div>
                <div>
                    <h4 style="color: var(--green-growth); margin-bottom: 0.5rem;">Stancu Marian</h4>
                    <p><strong>Fondator & CEO</strong></p>
                    <p style="opacity: 0.8; margin-top: 0.5rem;">Ini»õiator »ôi coordonator proiect StancuBYT</p>
                </div>
            </div>
            <!-- Management echipa (salvare permanenta - Firebase) -->
            <div style="margin-top: 2rem; padding-top: 1.5rem; border-top: 1px solid rgba(255,255,255,0.12);">
                <div style="display:flex; align-items:center; justify-content:space-between; gap:12px; flex-wrap:wrap;">
                    <h4 style="margin:0; color: var(--neon-cyan);">Membri echipa (Live)</h4>
                    <div style="display:flex; gap:10px; flex-wrap:wrap;">
                        <button class="news-btn" id="teamAddBtn" style="display:none;" onclick="openTeamForm()">‚ûï AdaugƒÉ membru</button>
                        <button class="news-btn" id="teamClearBtn" style="display:none;" onclick="clearAllTeamMembers()">üóëÔ∏è »òterge to»õi</button>
                    </div>
                </div>

                <div id="teamList" style="display:grid; grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)); gap:1rem; margin-top:1rem;"></div>

                <div id="teamForm" style="display:none; margin-top:1rem; background: rgba(255,255,255,0.03); border:1px solid rgba(255,255,255,0.1); border-radius:14px; padding:1rem;">
                    <div class="form-row">
                        <input type="text" id="teamName" placeholder="Nume membru" maxlength="80">
                        <input type="text" id="teamRole" placeholder="Func»õia / rol" maxlength="80">
                    </div>
                    <div class="form-row">
                        <input type="date" id="teamJoinDate" placeholder="Data adaugare">
                        <select id="teamFace" aria-label="Selecteaza emoticon" style="flex:1; padding:0.8rem 1rem; background: rgba(255, 255, 255, 0.05); border: 1px solid rgba(0, 102, 255, 0.3); border-radius: 8px; color: white; font-size: 1rem;">
                          <option value="üë®‚Äçüíº">üë®‚Äçüíº Barbat</option>
                          <option value="üë©‚Äçüíº">üë©‚Äçüíº Femeie</option>
                          <option value="üßë‚Äçüíº">üßë‚Äçüíº Neutru</option>
                        </select>
                    </div>
                    <div class="form-row">
                        <input type="file" id="teamPhotoFile" accept="image/*" />
                        <input type="url" id="teamPhotoUrl" placeholder="Link foto (optional, daca nu incarci fisier)" maxlength="240">
                    </div>
                    <p style="opacity:.8; font-size:.85rem; margin-top:8px;">
                      Daca incarci un fisier, fotografia se salveaza in Firebase Storage si va inlocui emoticonul.
                    </p>
                    <div style="display:flex; gap:10px; flex-wrap:wrap; justify-content:flex-end; margin-top:10px;">
                        <button class="news-btn" onclick="saveTeamMember()">üíæ SalveazƒÉ</button>
                        <button class="news-btn" onclick="cancelTeamMember()">‚úñ AnuleazƒÉ</button>
                    </div>
                </div>
            </div>


            <div style="background: rgba(0, 204, 255, 0.05)"; padding: 1rem; border-radius: 10px; border-left: 3px solid var(--neon-cyan);">
                <p style="margin: 0; font-size: 0.9rem;">
                    <strong>üíº Echipa √Æn formare:</strong> Vor fi inclu»ôi dezvoltatori blockchain, marketeri, manager comunitate. Informa»õiile vor fi actualizate pe mƒÉsurƒÉ ce echipa se extinde.
                </p>
            </div>
        </div>

        <!-- 8. Contact & Linkuri -->
        <div id="contact-wp" class="section-card neon-glow">
            <h3>8. Contact & Linkuri</h3>
            
            <div style="margin: 1.5rem 0;">
                <div class="social-grid">
                    <a href="https://stancubyt.com/" target="_blank" class="social-card">
                        <div class="social-icon" style="background: rgba(0, 255, 136, 0.2);">
                            üåê
                        </div>
                        <div>
                            <strong>Website</strong>
                            <small>stancubyt.com</small>
                        </div>
                    </a>
                    <a href="mailto:contact@stancubyt.com" class="social-card">
                        <div class="social-icon" style="background: rgba(255, 68, 68, 0.2);">
                            üìß
                        </div>
                        <div>
                            <strong>Email</strong>
                            <small>contact@stancubyt.com</small>
                        </div>
                    </a>
                    <a href="https://www.linkedin.com/in/sbyt-stancu-212728392/" target="_blank" class="social-card">
                        <div class="social-icon" style="background: rgba(10, 102, 194, 0.2);">
                            üëî
                        </div>
                        <div>
                            <strong>LinkedIn</strong>
                            <small>Business Network</small>
                        </div>
                    </a>
                </div>
            </div>
        </div>

        <!-- 9. Note & RecomandƒÉri -->
        <div id="recomandari" class="section-card neon-glow">
            <h3>9. Note & RecomandƒÉri</h3>
            
            <div style="margin: 1.5rem 0;">
                <div style="display: grid; gap: 1rem;">
                    <div style="display: flex; align-items: flex-start; gap: 1rem; padding: 1rem; background: rgba(0, 102, 255, 0.05); border-radius: 10px;">
                        <span style="font-size: 1.5rem;">üîç</span>
                        <div>
                            <strong>Audit Smart‚ÄëContract</strong>
                            <p style="margin-top: 0.5rem; font-size: 0.9rem; opacity: 0.8;">Recomandat pentru credibilitate »ôi securitate suplimentarƒÉ √Ænainte de listare.</p>
                        </div>
                    </div>
                    <div style="display: flex; align-items: flex-start; gap: 1rem; padding: 1rem; background: rgba(0, 255, 136, 0.05); border-radius: 10px;">
                        <span style="font-size: 1.5rem;">üìä</span>
                        <div>
                            <strong>Transparen»õƒÉ Distribu»õie</strong>
                            <p style="margin-top: 0.5rem; font-size: 0.9rem; opacity: 0.8;">Distribu»õia »ôi vesting‚Äëul trebuie sƒÉ fie clare »ôi transparente pentru investitori.</p>
                        </div>
                    </div>
                    <div style="display: flex; align-items: flex-start; gap: 1rem; padding: 1rem; background: rgba(138, 43, 226, 0.05); border-radius: 10px;">
                        <span style="font-size: 1.5rem;">üí¨</span>
                        <div>
                            <strong>Comunicare Comunitate</strong>
                            <p style="margin-top: 0.5rem; font-size: 0.9rem; opacity: 0.8;">Men»õine comunicare constantƒÉ: actualizƒÉri, roadmap, planuri, echipƒÉ.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 10. Disclaimer & Riscuri -->
        <div id="disclaimer" class="section-card neon-glow">
            <h3>10. Disclaimer & Riscuri</h3>
            
            <div style="background: rgba(255, 68, 68, 0.05); padding: 1.5rem; border-radius: 10px; border: 1px solid rgba(255, 68, 68, 0.2); margin-top: 1rem;">
                <div style="display: flex; align-items: flex-start; gap: 1rem; margin-bottom: 1rem;">
                    <span style="font-size: 1.5rem; color: #ff4444;">‚ö†Ô∏è</span>
                    <div>
                        <h4 style="color: #ff4444; margin-bottom: 0.5rem;">Avertisment important</h4>
                        <p>Tokenul SBYT este un <strong>token de utilitate</strong>. Nu este garantat un instrument financiar, nici un venit garantat.</p>
                    </div>
                </div>
                
                <div style="display: grid; gap: 0.8rem;">
                    <p style="margin: 0; font-size: 0.9rem;">
                        ‚Ä¢ Investi»õiile implicƒÉ riscuri ‚Äî pre»õul este volatil, depinde de adop»õie »ôi acceptare.
                    </p>
                    <p style="margin: 0; font-size: 0.9rem;">
                        ‚Ä¢ Smart‚Äëcontractele pot avea vulnerabilitƒÉ»õi ‚Äî recomandƒÉm audit extern √Ænainte de utilizare.
                    </p>
                    <p style="margin: 0; font-size: 0.9rem;">
                        ‚Ä¢ Proiectul trebuie tratat transparent »ôi responsabil.
                    </p>
                    <p style="margin: 0; font-size: 0.9rem;">
                        ‚Ä¢ Consulta»õi un specialist financiar √Ænainte de orice investi»õie.
                    </p>
                </div>
            </div>
        </div>

        <!-- Butoane Ac»õiune -->
        <div style="text-align: center; margin: 3rem 0;">
            <button onclick="showSection('contact')" class="btn-refresh-modern" style="margin-right: 1rem;">
                <span class="refresh-icon">üì®</span>
                <span class="refresh-text">ContacteazƒÉ Echipa</span>
            </button>
            <button onclick="window.open('https://app.uniswap.org/swap?outputCurrency=0x44Cf220399be798baeaE45fd7C4fF44623713833', '_blank')" class="btn-refresh-modern">
                <span class="refresh-icon">üîÑ</span>
                <span class="refresh-text">CumpƒÉrƒÉ SBYT pe Uniswap</span>
            </button>
        </div>


        <!-- ADMIN LOGIN (Whitepaper - josul paginii) -->
        <section class="admin-login" id="admin-login">
            <h2>üîê Administrator Login</h2>
            <p class="admin-desc">Autentificare necesara pentru editarea sectiunii 5. Plan de lansare / Roadmap.</p>
            <div class="admin-login-box">
                <input autocomplete="username" id="adminEmail" placeholder="Email administrator" type="email"/>
                <input autocomplete="current-password" id="adminPass" placeholder="Parola administrator" type="password"/>
                <button onclick="adminSignIn()" type="button">Autentificare</button>
                <button id="adminLogoutBtn" onclick="adminSignOut()" style="display:none;" type="button">Delogare</button>
            </div>
            <div class="admin-status-row">
                <span class="admin-badge admin-badge-off" id="adminStatusBadge">Neautentificat</span>
                <span class="admin-user-label" id="adminUserLabel"></span>
            </div>
            <p class="admin-msg" id="adminLoginMsg"></p>
        </section>

    </section>

<script>

// Whitepaper-only helpers (extracted / minimal)
window.downloadWhitepaper = function(language){
  const file = (language === 'ro') ? 'StancuBYT_RO.pdf' : 'StancuBYT_EN.pdf';
  const url = `Whitepaper/${file}`;
  const a = document.createElement('a');
  a.href = url;
  a.download = file;
  document.body.appendChild(a);
  a.click();
  a.remove();
};

window.scrollToSection = function(id){
  try{
    const el = document.getElementById(id);
    if (el) el.scrollIntoView({behavior:'smooth', block:'start'});
  }catch(e){}
};

window.addEventListener('load', ()=>{
  // evita conflictul de id duplicat (in cazul in care exista #contact in whitepaper)
  const wpContact = document.querySelector('#whitepaper #contact');
  if (wpContact) wpContact.id = 'contact-wp';
});


/* ============================================================
   FIREBASE INIT + AUTH ADMIN (1:1 principiu ca in prezentare)
   ============================================================ */

try {
  if (typeof firebase !== 'undefined' && firebase.apps && !firebase.apps.length) {
    firebase.initializeApp({
      apiKey: "AIzaSyBPGUlNhohbVrfsIRcIfYAD5Fh7GMZlw2Q",
      authDomain: "stancubyt-fc2b9.firebaseapp.com",
      projectId: "stancubyt-fc2b9",
      // IMPORTANT: Firebase Storage bucket must be the *.appspot.com bucket name
      // Otherwise file uploads may fail even if Auth/Firestore work.
      storageBucket: "stancubyt-fc2b9.appspot.com",
      messagingSenderId: "263244200492",
      appId: "1:263244200492:web:28adf253b726cfdafaaf89",
      measurementId: "G-272S9HSY3K"
    });
  }
} catch (e) {}

const auth = (typeof firebase !== 'undefined' && firebase.auth) ? firebase.auth() : null;
const db = (typeof firebase !== 'undefined' && firebase.firestore) ? firebase.firestore() : null;
const storage = (typeof firebase !== 'undefined' && firebase.storage) ? firebase.storage() : null;

window.__SBYT_ADMIN = false;
const ADMIN_EMAILS = ["stancubyt@gmail.com"]; // ai zis ca acesta e admin

function maskEmail(email) {
  if (!email || typeof email !== 'string') return '';
  const parts = email.split('@');
  if (parts.length !== 2) return email;
  const u = parts[0], d = parts[1];
  const u2 = u.length <= 2 ? (u[0] + '*') : (u.slice(0,2) + '*'.repeat(Math.min(8, u.length-2)));
  return `${u2}@${d}`;
}

async function computeIsAdmin(user) {
  if (!user) return false;
  try {
    const token = await user.getIdTokenResult(true);
    if (token && token.claims && token.claims.admin === true) return true;
  } catch (e) {}
  const email = (user.email || '').toLowerCase();
  return ADMIN_EMAILS.map(x => String(x).toLowerCase()).includes(email);
}

function setAdminUI(isAdmin, user) {
  const badge = document.getElementById('adminStatusBadge');
  const label = document.getElementById('adminUserLabel');
  const msg = document.getElementById('adminLoginMsg');
  const logoutBtn = document.getElementById('adminLogoutBtn');

  if (badge) {
    badge.classList.remove('admin-badge-on','admin-badge-off');
    badge.classList.add(isAdmin ? 'admin-badge-on' : 'admin-badge-off');
    badge.textContent = isAdmin ? 'Autentificat (Admin)' : 'Neautentificat';
  }
  if (label) label.textContent = user ? `User: ${maskEmail(user.email || '')}` : '';
  if (logoutBtn) logoutBtn.style.display = user ? 'inline-block' : 'none';

  if (msg) {
    msg.style.color = isAdmin ? '#00ff9c' : '#ff4d4d';
    msg.textContent = user
      ? (isAdmin ? 'Mod administrator activ. Roadmap poate fi editat.' : 'Autentificat, dar fara drepturi admin.')
      : 'Autentifica-te cu email + parola (Firebase).';
  }

  // activeaza/dezactiveaza controalele roadmap
  try { setRoadmapAdminMode(isAdmin); } catch(e) {}
  // activeaza/dezactiveaza controalele membri echipa
  try { setTeamAdminMode(isAdmin); } catch(e) {}
}

window.adminSignIn = async function adminSignIn(){
  try {
    if (!auth) { alert('Firebase Auth nu este incarcat.'); return; }
    const email = (document.getElementById('adminEmail')?.value || '').trim();
    const pass = (document.getElementById('adminPass')?.value || '');
    if (!email || !pass) {
      const msg = document.getElementById('adminLoginMsg');
      if (msg) { msg.style.color = '#ff4d4d'; msg.textContent = 'Completeaza email si parola.'; }
      return;
    }
    await auth.signInWithEmailAndPassword(email, pass);
  } catch (e) {
    const msg = document.getElementById('adminLoginMsg');
    if (msg) { msg.style.color = '#ff4d4d'; msg.textContent = 'Eroare autentificare: ' + (e?.message || e); }
  }
}

window.adminSignOut = async function adminSignOut(){
  try { if (auth) await auth.signOut(); } catch(e) {}
}

// listener
document.addEventListener('DOMContentLoaded', () => {
  try {
    if (auth) {
      auth.onAuthStateChanged(async (user) => {
        const isAdmin = await computeIsAdmin(user);
        window.__SBYT_ADMIN = isAdmin;
        setAdminUI(isAdmin, user);
      });
    }
  } catch (e) {}

  // init roadmap from firestore (daca exista)
  try { initRoadmapLive(); } catch(e) {}

  // init team from firestore (live)
  try { initTeamLive(); } catch(e) {}
});

/* ============================================================
   ROADMAP CRUD + PERSISTENTA (1:1 ca principiu cu anunturile)
   - Salvare in Firestore: news/roadmap (doc)
   - Citire live pentru oricine: onSnapshot
   - NU schimba structura paginii: foloseste .timeline-item existente
   ============================================================ */

const ROADMAP_STATS_DOC = { col: 'news', doc: 'roadmap' } // folosim colectia 'news' (ca anunturile) pentru a evita rules pe stats;
let __roadmapUnsub = null;
let __roadmapHydrating = false; // evita bucle (snapshot -> render -> save)

function getRoadmapEls(){
  const wrap = document.querySelector('#roadmap .roadmap-timeline');
  const items = Array.from(document.querySelectorAll('#roadmap .roadmap-timeline .timeline-item'));
  return {wrap, items};
}

function statusToBadgeClass(statusText){
  const s = (statusText || '').toLowerCase();
  if (s.includes('complet')) return 'badge-success';
  if (s.includes('curs')) return 'badge-warning';
  return 'badge-info';
}

function ensureAdminButtonsOnItem(item){
  if (!item) return;
  if (item.querySelector('.roadmap-admin-bar')) return;

  const bar = document.createElement('div');
  bar.className = 'roadmap-admin-bar';
  bar.style.display = 'flex';
  bar.style.gap = '10px';
  bar.style.marginTop = '12px';
  bar.style.flexWrap = 'wrap';

  const btnEdit = document.createElement('button');
  btnEdit.type = 'button';
  btnEdit.className = 'news-btn';
  btnEdit.textContent = '‚úèÔ∏è Editeaza';
  btnEdit.onclick = () => editRoadmapItem(item);

  const btnDel = document.createElement('button');
  btnDel.type = 'button';
  btnDel.className = 'news-btn';
  btnDel.textContent = 'üóëÔ∏è Sterge';
  btnDel.onclick = () => deleteRoadmapItem(item);

  bar.appendChild(btnEdit);
  bar.appendChild(btnDel);
  item.appendChild(bar);
}

function removeAdminButtonsFromItem(item){
  item?.querySelector('.roadmap-admin-bar')?.remove();
}

function ensureAddPhaseButton(){
  const {wrap} = getRoadmapEls();
  if (!wrap) return;
  if (document.getElementById('roadmapAddPhaseBtn')) return;

  const row = document.createElement('div');
  row.id = 'roadmapAdminRow';
  row.style.display = 'flex';
  row.style.justifyContent = 'flex-end';
  row.style.marginTop = '14px';

  const btn = document.createElement('button');
  btn.id = 'roadmapAddPhaseBtn';
  btn.type = 'button';
  btn.className = 'news-btn';
  btn.textContent = '‚ûï Adauga faza noua';
  btn.onclick = () => addRoadmapItem();

  row.appendChild(btn);
  wrap.parentElement.appendChild(row);
}

function removeAddPhaseButton(){
  document.getElementById('roadmapAdminRow')?.remove();
}


// --- Drag & Drop reordonare faze (doar admin)
let __roadmapDragEl = null;

function ensureDragHandle(item){
  if (!item) return;
  const titleEl = item.querySelector('.timeline-date');
  if (!titleEl) return;
  if (titleEl.querySelector('.roadmap-drag-handle')) return;

  const h = document.createElement('span');
  h.className = 'roadmap-drag-handle';
  h.title = 'Trage pentru a reordona';
  h.textContent = '‚áÖ';
  titleEl.appendChild(h);
}

function enableRoadmapDragDrop(enable){
  const {wrap, items} = getRoadmapEls();
  if (!wrap) return;

  items.forEach((item) => {
    if (enable){
      ensureDragHandle(item);
      item.setAttribute('draggable','true');

      if (!item.__dndBound){
        item.addEventListener('dragstart', (e) => {
          if (!window.__SBYT_ADMIN) return;
          __roadmapDragEl = item;
          item.classList.add('dragging');
          try{
            e.dataTransfer.effectAllowed = 'move';
            e.dataTransfer.setData('text/plain', 'roadmap');
          }catch(_){}
        });

        item.addEventListener('dragover', (e) => {
          if (!window.__SBYT_ADMIN) return;
          e.preventDefault();
          if (!__roadmapDragEl || __roadmapDragEl === item) return;

          const rect = item.getBoundingClientRect();
          const after = (e.clientY - rect.top) > (rect.height / 2);
          wrap.insertBefore(__roadmapDragEl, after ? item.nextSibling : item);
        });

        item.addEventListener('dragend', async () => {
          item.classList.remove('dragging');
          __roadmapDragEl = null;
          // dupa reordonare, salvam noua ordine in Firestore
          await saveRoadmapToFirestore();
        });

        item.__dndBound = true;
      }
    } else {
      item.removeAttribute('draggable');
      // pastram handle-ul (nu strica), dar poti sa-l ascunzi daca vrei
    }
  });
}

function setRoadmapAdminMode(isAdmin){
  const {items} = getRoadmapEls();
  if (isAdmin){
    items.forEach(ensureAdminButtonsOnItem);
    ensureAddPhaseButton();
    enableRoadmapDragDrop(true);
  } else {
    items.forEach(removeAdminButtonsFromItem);
    removeAddPhaseButton();
    enableRoadmapDragDrop(false);
  }
}

function readRoadmapItem(item){
  const titleEl = item.querySelector('.timeline-date');
  const descEl = item.querySelector('p');
  const badgeEl = item.querySelector('.badge');
  return {
    title: titleEl ? titleEl.textContent.trim() : '',
    description: descEl ? descEl.textContent.trim() : '',
    status: badgeEl ? badgeEl.textContent.trim() : 'Planificat',
  };
}

function writeRoadmapItem(item, data){
  const titleEl = item.querySelector('.timeline-date');
  const descEl = item.querySelector('p') || item.appendChild(document.createElement('p'));
  let badgeEl = item.querySelector('.badge');
  if (!badgeEl){
    badgeEl = document.createElement('span');
    badgeEl.className = 'badge badge-info';
    item.appendChild(badgeEl);
  }

  if (titleEl) titleEl.textContent = data.title || '';
  descEl.textContent = data.description || '';
  badgeEl.textContent = data.status || 'Planificat';

  badgeEl.classList.remove('badge-success','badge-warning','badge-info');
  badgeEl.classList.add(statusToBadgeClass(data.status));
}

function collectRoadmapFromDOM(){
  const items = Array.from(document.querySelectorAll('#roadmap .roadmap-timeline .timeline-item'));
  return items.map((it, idx)=>{
    const d = readRoadmapItem(it);
    return { order: idx, title: d.title, description: d.description, status: d.status };
  });
}

function renderRoadmapFromArray(arr){
  const wrap = document.querySelector('#roadmap .roadmap-timeline');
  if (!wrap) return;
  wrap.innerHTML = '';
  (arr||[]).sort((a,b)=>(Number(a.order)-Number(b.order))).forEach((d)=>{
    const item = document.createElement('div');
    item.className = 'timeline-item';
    item.innerHTML = `
      <div class="timeline-date"></div>
      <p></p>
      <span class="badge badge-info"></span>
    `;
    wrap.appendChild(item);
    writeRoadmapItem(item, {
      title: d.title || '',
      description: d.description || '',
      status: d.status || 'Planificat'
    });
  });
}

async function saveRoadmapToFirestore(){
  if (!db || !auth?.currentUser) return;
  try{
    const isAdmin = await computeIsAdmin(auth.currentUser);
    if (!isAdmin) return;

    const items = collectRoadmapFromDOM();
        // salvam intr-un singur doc, ca in "stats" (usor de permis in Rules)
    await db.collection(ROADMAP_STATS_DOC.col).doc(ROADMAP_STATS_DOC.doc).set({
      items,
      updatedAt: Date.now(),
      updatedBy: auth.currentUser.email || null
    }, { merge: true });
  }catch(e){
    console.warn('Roadmap save (news/roadmap) error:', e);
    alert('Eroare la salvare roadmap in Firestore (verifica Rules pentru news/roadmap).');
  }
}

async function seedRoadmapIfMissing(){
  // Daca doc-ul nu exista, il cream din fazele HTML existente, ca sa nu dispara la refresh
  if (!db) return;
  try{
    const ref = db.collection(ROADMAP_STATS_DOC.col).doc(ROADMAP_STATS_DOC.doc);
    const snap = await ref.get();
    if (snap.exists) return;
    const items = collectRoadmapFromDOM();
    if (!items.length) return;
    await ref.set({ items, createdAt: Date.now() }, { merge: true });
  }catch(e){
    console.warn('Roadmap seed error:', e);
  }
}

async function editRoadmapItem(item){
  if (!window.__SBYT_ADMIN) return;
  await seedRoadmapIfMissing();

  const cur = readRoadmapItem(item);
  const title = prompt('Titlu faza:', cur.title);
  if (title === null) return;
  const description = prompt('Descriere:', cur.description);
  if (description === null) return;
  const status = prompt('Status (Completat / √én Curs / Planificat):', cur.status);
  if (status === null) return;

  writeRoadmapItem(item, {title, description, status});
  ensureAdminButtonsOnItem(item);
  await saveRoadmapToFirestore();
}

async function deleteRoadmapItem(item){
  if (!window.__SBYT_ADMIN) return;
  await seedRoadmapIfMissing();

  if (!confirm('Sigur vrei sa stergi aceasta faza?')) return;
  item.remove();
  await saveRoadmapToFirestore();
}

async function addRoadmapItem(){
  if (!window.__SBYT_ADMIN) return;
  await seedRoadmapIfMissing();

  const title = prompt('Titlu faza (ex: Faza 5: ...):', 'Faza noua');
  if (title === null) return;
  const description = prompt('Descriere:', '');
  if (description === null) return;
  const status = prompt('Status (Completat / √én Curs / Planificat):', 'Planificat');
  if (status === null) return;

  const {wrap} = getRoadmapEls();
  if (!wrap) return;

  const item = document.createElement('div');
  item.className = 'timeline-item';
  item.innerHTML = `
    <div class="timeline-date"></div>
    <p></p>
    <span class="badge badge-info"></span>
  `;
  wrap.appendChild(item);

  writeRoadmapItem(item, {title, description, status});
  ensureAdminButtonsOnItem(item);
  await saveRoadmapToFirestore();
}

function listenRoadmapLive(){
  if (!db) return;
  // evitam dublu subscribe
  if (__roadmapUnsub) { try{__roadmapUnsub();}catch(e){} __roadmapUnsub=null; }

  const ref = db.collection(ROADMAP_STATS_DOC.col).doc(ROADMAP_STATS_DOC.doc);
  __roadmapUnsub = ref.onSnapshot((snap)=>{
    try{
      if (snap.exists){
        const data = snap.data() || {};
        const items = Array.isArray(data.items) ? data.items : [];
        __roadmapHydrating = true;
        renderRoadmapFromArray(items);
        __roadmapHydrating = false;
        setRoadmapAdminMode(!!window.__SBYT_ADMIN);
      } else {
        // daca nu exista doc -> lasam fazele HTML
        setRoadmapAdminMode(!!window.__SBYT_ADMIN);
      }
    }catch(e){
      __roadmapHydrating = false;
      setRoadmapAdminMode(!!window.__SBYT_ADMIN);
    }
  }, (err)=>{
    console.warn('Roadmap listen error:', err);
    setRoadmapAdminMode(!!window.__SBYT_ADMIN);
  });
}

// init: live listen (public read). daca nu exista doc, va ramane HTML-ul.
function initRoadmapLive(){
  listenRoadmapLive();
}




/* ============================================================
   TEAM (Membri) CRUD + PERSISTENTA
   - Salvare in Firestore: news/team (doc)  (aceeasi colectie ca la roadmap/anunturi)
   - Fotografii in Firebase Storage: team/<memberId>/...
   ============================================================ */

const TEAM_STATS_DOC = { col: 'news', doc: 'team' };
let __teamUnsub = null;
let __teamHydrating = false;
let __teamMembers = [];

function setTeamAdminMode(isAdmin){
  const addBtn = document.getElementById('teamAddBtn');
  const clearBtn = document.getElementById('teamClearBtn');
  if (addBtn) addBtn.style.display = isAdmin ? 'inline-block' : 'none';
  if (clearBtn) clearBtn.style.display = isAdmin ? 'inline-block' : 'none';

  if (!isAdmin) {
    const form = document.getElementById('teamForm');
    if (form) form.style.display = 'none';
    clearTeamFormInputs();
  }
  renderTeamList();
}

function clearTeamFormInputs(){
  const name = document.getElementById('teamName');
  const role = document.getElementById('teamRole');
  const date = document.getElementById('teamJoinDate');
  const face = document.getElementById('teamFace');
  const file = document.getElementById('teamPhotoFile');
  const url = document.getElementById('teamPhotoUrl');
  if (name) name.value='';
  if (role) role.value='';
  if (date) date.value='';
  if (face) face.value='üë®‚Äçüíº';
  if (file) file.value='';
  if (url) url.value='';
}

window.openTeamForm = function openTeamForm(){
  if (!window.__SBYT_ADMIN) return;
  const form = document.getElementById('teamForm');
  if (form) form.style.display = 'block';
}

window.cancelTeamMember = function cancelTeamMember(){
  const form = document.getElementById('teamForm');
  if (form) form.style.display = 'none';
  clearTeamFormInputs();
}

function teamId(){
  return 'm_' + Date.now() + '_' + Math.random().toString(16).slice(2);
}

async function uploadTeamPhoto(memberId, file){
  if (!storage || !file) return { url: '', path: '' };

  // Same principle as announcements in index prezentare ok.html:
  // - upload to Storage
  // - wait for completion with a timeout
  // - getDownloadURL
  const safe = String(file.name || 'photo').replace(/[^a-zA-Z0-9._-]+/g,'_').slice(0,80);
  const pathGuess = 'news/' + Date.now() + '_' + safe;
  const ref = storage.ref().child(pathGuess);

  try {
    const task = ref.put(file);

    // Wait for completion (UploadTask is not a Promise in compat)
    const snapshot = await Promise.race([
      new Promise((resolve, reject) => {
        task.on('state_changed',
          () => {},
          (err) => reject(err),
          () => resolve(task.snapshot)
        );
      }),
      new Promise((_, rej) => setTimeout(() => rej(new Error('upload-timeout')), 45000))
    ]);

    const url = await ref.getDownloadURL();
    const fullPath = (snapshot.ref && snapshot.ref.fullPath) ? snapshot.ref.fullPath : pathGuess;
    return { url, path: fullPath };
  } catch (e) {
    console.warn('uploadTeamPhoto failed:', e);
    return { url: '', path: '' };
  }
}

async function saveTeamToFirestore(){
  if (!db) throw new Error('Firestore indisponibil');
  await db.collection(TEAM_STATS_DOC.col).doc(TEAM_STATS_DOC.doc).set({
    members: __teamMembers,
    updatedAt: firebase.firestore.FieldValue.serverTimestamp(),
  }, { merge: true });
}

window.saveTeamMember = async function saveTeamMember(){
  try {
    if (!db || !auth?.currentUser) { alert('Nu esti autentificat.'); return; }
    const isAdmin = await computeIsAdmin(auth.currentUser);
    if (!isAdmin) { alert('Nu ai drepturi admin.'); return; }

    const name = (document.getElementById('teamName')?.value || '').trim();
    const role = (document.getElementById('teamRole')?.value || '').trim();
    const joinDateRaw = (document.getElementById('teamJoinDate')?.value || '').trim();
    const face = (document.getElementById('teamFace')?.value || 'üë®‚Äçüíº');
    const file = document.getElementById('teamPhotoFile')?.files?.[0] || null;
    const urlInput = (document.getElementById('teamPhotoUrl')?.value || '').trim();

    if (!name || !role) { alert('Completeaza Nume si Functie.'); return; }

    const memberId = teamId();
    const memberSince = joinDateRaw ? joinDateRaw : '';

    // 1) Salvam imediat membrul (fara a depinde de upload) ca sa nu se piarda nimic.
    //    Daca exista URL introdus manual, il salvam direct.
    const member = {
      id: memberId,
      name,
      role,
      memberSince,
      face,
      photoUrl: urlInput || '',
      photoPath: '',
      createdAt: Date.now(),
    };

    __teamMembers = [member, ...(__teamMembers || [])];
    renderTeamList();
    await saveTeamToFirestore();

    // 2) Daca user a ales fisier, facem upload si apoi actualizam membrul in Firestore.
    if (file) {
      try {
        const up = await uploadTeamPhoto(memberId, file);
        const idx = (__teamMembers || []).findIndex(m => m.id === memberId);
        if (idx >= 0) {
          __teamMembers[idx].photoUrl = up.url;
          __teamMembers[idx].photoPath = up.path;
          renderTeamList();
          await saveTeamToFirestore();
        }
      } catch (upErr) {
        console.warn('Upload foto esuat:', upErr);
        // nu blocam; membrul ramane salvat cu emoticon sau cu urlInput daca exista
      }
    }

    cancelTeamMember();
  } catch (e) {
    alert('Eroare la salvare membru: ' + (e?.message || e));
    console.warn(e);
  }
}

window.deleteTeamMember = async function deleteTeamMember(memberId){
  try {
    if (!db || !auth?.currentUser) return;
    const isAdmin = await computeIsAdmin(auth.currentUser);
    if (!isAdmin) return;
    if (!confirm('Stergi acest membru?')) return;

    const target = (__teamMembers || []).find(m => m.id === memberId);
    __teamMembers = (__teamMembers || []).filter(m => m.id !== memberId);
    renderTeamList();
    await saveTeamToFirestore();

    if (target?.photoPath && storage) {
      storage.ref().child(target.photoPath).delete().catch(()=>{});
    }
  } catch(e) {
    console.warn(e);
  }
}

window.clearAllTeamMembers = async function clearAllTeamMembers(){
  try {
    if (!db || !auth?.currentUser) return;
    const isAdmin = await computeIsAdmin(auth.currentUser);
    if (!isAdmin) return;
    if (!confirm('Stergi TOTI membrii echipei?')) return;

    const toDelete = (__teamMembers || []).slice();
    __teamMembers = [];
    renderTeamList();
    await saveTeamToFirestore();

    if (storage) {
      for (const m of toDelete) {
        if (m?.photoPath) {
          storage.ref().child(m.photoPath).delete().catch(()=>{});
        }
      }
    }
  } catch(e) {
    console.warn(e);
  }
}

function renderTeamList(){
  const host = document.getElementById('teamList');
  if (!host) return;
  const isAdmin = !!window.__SBYT_ADMIN;

  const members = Array.isArray(__teamMembers) ? __teamMembers : [];

  if (members.length === 0) {
    host.innerHTML = `<div style="opacity:.75; padding:12px;">Nu exista membri adaugati inca.</div>`;
    return;
  }

  host.innerHTML = members.map(m => {
    const avatar = m.photoUrl
      ? `<div class="team-avatar"><img src="${m.photoUrl}" alt="${(m.name||'').replace(/"/g,'&quot;')}"></div>`
      : `<div class="team-avatar"><span class="team-emoji">${m.face || 'üë®‚Äçüíº'}</span></div>`;

    const since = m.memberSince ? `Membru din: <strong>${m.memberSince}</strong>` : '';

    const delBtn = isAdmin
      ? `<div class="team-actions"><button class="news-btn" type="button" onclick="deleteTeamMember('${m.id}')">üóëÔ∏è Sterge</button></div>`
      : '';

    return `
      <div class="info-card team-member-card" style="text-align:left;">
        ${avatar}
        <div class="team-meta">
          <h4>${(m.name||'').replace(/</g,'&lt;')}</h4>
          <div class="team-role"><strong>${(m.role||'').replace(/</g,'&lt;')}</strong></div>
          <div class="team-since">${since}</div>
          ${delBtn}
        </div>
      </div>
    `;
  }).join('');
}

function initTeamLive(){
  if (!db) return;
  try {
    if (__teamUnsub) { __teamUnsub(); __teamUnsub = null; }
    const ref = db.collection(TEAM_STATS_DOC.col).doc(TEAM_STATS_DOC.doc);
    __teamUnsub = ref.onSnapshot((doc) => {
      if (!doc.exists) {
        __teamMembers = [];
        renderTeamList();
        return;
      }
      const data = doc.data() || {};
      const members = Array.isArray(data.members) ? data.members : [];
      // sort: newest first
      members.sort((a,b) => (b?.createdAt||0) - (a?.createdAt||0));
      __teamMembers = members;
      renderTeamList();
    }, (err) => {
      console.warn('team snapshot error', err);
      renderTeamList();
    });
  } catch(e){
    console.warn(e);
  }
}

</script>
</body>
</html>
